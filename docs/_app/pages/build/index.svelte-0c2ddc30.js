import{S as t,i as e,s as l,e as n,c as o,a as r,d as s,b as f,R as a,T as c,f as h,x as i,j as g,m as u,o as p,u as m,v as d,w as $,G as v,k as y,n as w,U as k,D as b,V as x,J as R,r as j}from"../../chunks/vendor-bbe47adb.js";import{S as B,p as D}from"../../chunks/Stack-7e9f1b4c.js";import{G as E}from"../../chunks/Game-c6420ef6.js";import{g as S,m as V}from"../../chunks/stores-95512afe.js";function I(t,e,l){const n=t.slice();return n[7]=e[l],n[9]=l,n}function G(t,e,l){const n=t.slice();return n[10]=e[l],n}function H(t,e,l){const n=t.slice();return n[7]=e[l],n[9]=l,n}function T(t,e,l){const n=t.slice();return n[10]=e[l],n}function q(t){let e,l,f;return l=new B({props:{stack:t[10]}}),{c(){e=n("div"),g(l.$$.fragment)},l(t){e=o(t,"DIV",{});var n=r(e);u(l.$$.fragment,n),n.forEach(s)},m(t,n){h(t,e,n),p(l,e,null),f=!0},p(t,e){const n={};4&e&&(n.stack=t[10]),l.$set(n)},i(t){f||(i(l.$$.fragment,t),f=!0)},o(t){m(l.$$.fragment,t),f=!1},d(t){t&&s(e),d(l)}}}function L(t){let e,l,g=t[7].stacks,u=[];for(let n=0;n<g.length;n+=1)u[n]=q(T(t,g,n));const p=t=>m(u[t],1,1,(()=>{u[t]=null}));return{c(){e=n("div");for(let t=0;t<u.length;t+=1)u[t].c();this.h()},l(t){e=o(t,"DIV",{class:!0,style:!0});var l=r(e);for(let e=0;e<u.length;e+=1)u[e].l(l);l.forEach(s),this.h()},h(){f(e,"class","flex flex-row w-full relative p-4 pointer-events-none"),a(e,"height",(t[2].conf.overlayRows&&t[9]!==t[2].layout.length-1?.7*t[1]:t[4]+t[7].padBottom)+"px"),c(e,"justify-center",t[2].conf.centerRows)},m(t,n){h(t,e,n);for(let l=0;l<u.length;l+=1)u[l].m(e,null);l=!0},p(t,n){if(4&n){let l;for(g=t[7].stacks,l=0;l<g.length;l+=1){const o=T(t,g,l);u[l]?(u[l].p(o,n),i(u[l],1)):(u[l]=q(o),u[l].c(),i(u[l],1),u[l].m(e,null))}for(j(),l=g.length;l<u.length;l+=1)p(l);$()}(!l||22&n)&&a(e,"height",(t[2].conf.overlayRows&&t[9]!==t[2].layout.length-1?.7*t[1]:t[4]+t[7].padBottom)+"px"),4&n&&c(e,"justify-center",t[2].conf.centerRows)},i(t){if(!l){for(let t=0;t<g.length;t+=1)i(u[t]);l=!0}},o(t){u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)m(u[e]);l=!1},d(t){t&&s(e),v(u,t)}}}function M(t){let e,l,f;return l=new B({props:{stack:t[10]}}),{c(){e=n("div"),g(l.$$.fragment)},l(t){e=o(t,"DIV",{});var n=r(e);u(l.$$.fragment,n),n.forEach(s)},m(t,n){h(t,e,n),p(l,e,null),f=!0},p(t,e){const n={};4&e&&(n.stack=t[10]),l.$set(n)},i(t){f||(i(l.$$.fragment,t),f=!0)},o(t){m(l.$$.fragment,t),f=!1},d(t){t&&s(e),d(l)}}}function A(t){let e,l,g=t[7].stacks,u=[];for(let n=0;n<g.length;n+=1)u[n]=M(G(t,g,n));const p=t=>m(u[t],1,1,(()=>{u[t]=null}));return{c(){e=n("div");for(let t=0;t<u.length;t+=1)u[t].c();this.h()},l(t){e=o(t,"DIV",{class:!0,style:!0});var l=r(e);for(let e=0;e<u.length;e+=1)u[e].l(l);l.forEach(s),this.h()},h(){f(e,"class","flex flex-row w-full relative p-4 pointer-events-none"),a(e,"height",(t[2].conf.overlayRows&&t[9]!==t[2].footer.length-1?.7*t[1]:t[4]+t[7].padBottom)+"px"),c(e,"justify-center",t[2].conf.centerRows)},m(t,n){h(t,e,n);for(let l=0;l<u.length;l+=1)u[l].m(e,null);l=!0},p(t,n){if(4&n){let l;for(g=t[7].stacks,l=0;l<g.length;l+=1){const o=G(t,g,l);u[l]?(u[l].p(o,n),i(u[l],1)):(u[l]=M(o),u[l].c(),i(u[l],1),u[l].m(e,null))}for(j(),l=g.length;l<u.length;l+=1)p(l);$()}(!l||22&n)&&a(e,"height",(t[2].conf.overlayRows&&t[9]!==t[2].footer.length-1?.7*t[1]:t[4]+t[7].padBottom)+"px"),4&n&&c(e,"justify-center",t[2].conf.centerRows)},i(t){if(!l){for(let t=0;t<g.length;t+=1)i(u[t]);l=!0}},o(t){u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)m(u[e]);l=!1},d(t){t&&s(e),v(u,t)}}}function J(t){let e,l,a,c,g,u,p,d,R=t[2].conf.toString().replace(/!/g,"<br>$&").replace(/\|/g,"<br> &nbsp; |")+"",B=t[2].layout,D=[];for(let n=0;n<B.length;n+=1)D[n]=L(H(t,B,n));const E=t=>m(D[t],1,1,(()=>{D[t]=null}));let S=t[2].footer,V=[];for(let n=0;n<S.length;n+=1)V[n]=A(I(t,S,n));const G=t=>m(V[t],1,1,(()=>{V[t]=null}));return{c(){e=n("div");for(let t=0;t<D.length;t+=1)D[t].c();l=y();for(let t=0;t<V.length;t+=1)V[t].c();a=y(),c=n("div"),g=n("a"),this.h()},l(t){e=o(t,"DIV",{id:!0,class:!0});var n=r(e);for(let e=0;e<D.length;e+=1)D[e].l(n);l=w(n);for(let e=0;e<V.length;e+=1)V[e].l(n);a=w(n),c=o(n,"DIV",{class:!0});var f=r(c);g=o(f,"A",{href:!0}),r(g).forEach(s),f.forEach(s),n.forEach(s),this.h()},h(){f(g,"href",u="/play?g="+t[2].conf.toString()),f(c,"class","absolute bottom-0 pl-4"),f(e,"id","game"),f(e,"class","flex flex-col text-white"),k((()=>t[5].call(e)))},m(n,o){h(n,e,o);for(let t=0;t<D.length;t+=1)D[t].m(e,null);b(e,l);for(let t=0;t<V.length;t+=1)V[t].m(e,null);b(e,a),b(e,c),b(c,g),g.innerHTML=R,p=x(e,t[5].bind(e)),d=!0},p(t,[n]){if(22&n){let o;for(B=t[2].layout,o=0;o<B.length;o+=1){const r=H(t,B,o);D[o]?(D[o].p(r,n),i(D[o],1)):(D[o]=L(r),D[o].c(),i(D[o],1),D[o].m(e,l))}for(j(),o=B.length;o<D.length;o+=1)E(o);$()}if(22&n){let l;for(S=t[2].footer,l=0;l<S.length;l+=1){const o=I(t,S,l);V[l]?(V[l].p(o,n),i(V[l],1)):(V[l]=A(o),V[l].c(),i(V[l],1),V[l].m(e,a))}for(j(),l=S.length;l<V.length;l+=1)G(l);$()}(!d||4&n)&&R!==(R=t[2].conf.toString().replace(/!/g,"<br>$&").replace(/\|/g,"<br> &nbsp; |")+"")&&(g.innerHTML=R),(!d||4&n&&u!==(u="/play?g="+t[2].conf.toString()))&&f(g,"href",u)},i(t){if(!d){for(let t=0;t<B.length;t+=1)i(D[t]);for(let t=0;t<S.length;t+=1)i(V[t]);d=!0}},o(t){D=D.filter(Boolean);for(let e=0;e<D.length;e+=1)m(D[e]);V=V.filter(Boolean);for(let e=0;e<V.length;e+=1)m(V[e]);d=!1},d(t){t&&s(e),v(D,t),v(V,t),p()}}}function U(t,e,l){let n,o,r,s;R(t,V,(t=>l(1,o=t))),R(t,S,(t=>l(2,r=t))),R(t,D,(t=>l(6,s=t)));{let t=s.query.get("g");t||(t="klondike-vegas");let e=s.query.get("d");S.set(new E(t,e))}let f=0,a=0;return t.$$.update=()=>{5&t.$$.dirty&&V.set(f/r.longestRow-20),2&t.$$.dirty&&l(4,n=1.5*o)},[f,o,r,a,n,function(){f=this.clientWidth,a=this.clientHeight,l(0,f),l(3,a)}]}class W extends t{constructor(t){super(),e(this,t,U,J,l,{})}}export{W as default};
