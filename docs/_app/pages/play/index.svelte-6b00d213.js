import{S as t,i as e,s as l,e as n,c as o,a as s,d as r,b as a,a1 as f,a2 as c,f as h,x as i,j as g,m as u,o as m,u as p,v as d,w as $,U as y,k as w,n as x,K as k,a3 as v,a4 as j,W as R,r as B}from"../../chunks/vendor-91eac218.js";import{S as H,p as b}from"../../chunks/Stack-f9d89392.js";import{g as D,m as E,e as G}from"../../chunks/GameControls-167bc322.js";import{G as I}from"../../chunks/Game-f1a072f2.js";function S(t,e,l){const n=t.slice();return n[10]=e[l],n[12]=l,n}function V(t,e,l){const n=t.slice();return n[13]=e[l],n}function q(t,e,l){const n=t.slice();return n[10]=e[l],n[12]=l,n}function W(t,e,l){const n=t.slice();return n[13]=e[l],n}function C(t){let e,l;return e=new H({props:{stack:t[13]}}),{c(){g(e.$$.fragment)},l(t){u(e.$$.fragment,t)},m(t,n){m(e,t,n),l=!0},p(t,l){const n={};4&l&&(n.stack=t[13]),e.$set(n)},i(t){l||(i(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){d(e,t)}}}function K(t){let e,l,g=t[10].stacks,u=[];for(let n=0;n<g.length;n+=1)u[n]=C(W(t,g,n));const m=t=>p(u[t],1,1,(()=>{u[t]=null}));return{c(){e=n("div");for(let t=0;t<u.length;t+=1)u[t].c();this.h()},l(t){e=o(t,"DIV",{class:!0,style:!0});var l=s(e);for(let e=0;e<u.length;e+=1)u[e].l(l);l.forEach(r),this.h()},h(){a(e,"class","flex flex-row w-full relative md:p-4 pointer-events-none"),f(e,"height",(t[2].conf.overlayRows&&t[12]!==t[2].layout.length-1?.4*t[3]:t[3]+t[10].maxHeight*t[4]+t[4])+"px"),c(e,"justify-center",t[2].conf.centerRows)},m(t,n){h(t,e,n);for(let l=0;l<u.length;l+=1)u[l].m(e,null);l=!0},p(t,n){if(4&n){let l;for(g=t[10].stacks,l=0;l<g.length;l+=1){const o=W(t,g,l);u[l]?(u[l].p(o,n),i(u[l],1)):(u[l]=C(o),u[l].c(),i(u[l],1),u[l].m(e,null))}for(B(),l=g.length;l<u.length;l+=1)m(l);$()}(!l||28&n)&&f(e,"height",(t[2].conf.overlayRows&&t[12]!==t[2].layout.length-1?.4*t[3]:t[3]+t[10].maxHeight*t[4]+t[4])+"px"),4&n&&c(e,"justify-center",t[2].conf.centerRows)},i(t){if(!l){for(let t=0;t<g.length;t+=1)i(u[t]);l=!0}},o(t){u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)p(u[e]);l=!1},d(t){t&&r(e),y(u,t)}}}function M(t){let e,l;return e=new H({props:{stack:t[13]}}),{c(){g(e.$$.fragment)},l(t){u(e.$$.fragment,t)},m(t,n){m(e,t,n),l=!0},p(t,l){const n={};4&l&&(n.stack=t[13]),e.$set(n)},i(t){l||(i(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){d(e,t)}}}function U(t){let e,l,g,u=t[10].stacks,m=[];for(let n=0;n<u.length;n+=1)m[n]=M(V(t,u,n));const d=t=>p(m[t],1,1,(()=>{m[t]=null}));return{c(){e=n("div");for(let t=0;t<m.length;t+=1)m[t].c();l=w(),this.h()},l(t){e=o(t,"DIV",{class:!0,style:!0});var n=s(e);for(let e=0;e<m.length;e+=1)m[e].l(n);l=x(n),n.forEach(r),this.h()},h(){a(e,"class","flex flex-row w-full relative md:p-4 pointer-events-none"),f(e,"height",t[3]+"px"),c(e,"justify-center",t[2].conf.centerRows)},m(t,n){h(t,e,n);for(let l=0;l<m.length;l+=1)m[l].m(e,null);k(e,l),g=!0},p(t,n){if(4&n){let o;for(u=t[10].stacks,o=0;o<u.length;o+=1){const s=V(t,u,o);m[o]?(m[o].p(s,n),i(m[o],1)):(m[o]=M(s),m[o].c(),i(m[o],1),m[o].m(e,l))}for(B(),o=u.length;o<m.length;o+=1)d(o);$()}(!g||8&n)&&f(e,"height",t[3]+"px"),4&n&&c(e,"justify-center",t[2].conf.centerRows)},i(t){if(!g){for(let t=0;t<u.length;t+=1)i(m[t]);g=!0}},o(t){m=m.filter(Boolean);for(let e=0;e<m.length;e+=1)p(m[e]);g=!1},d(t){t&&r(e),y(m,t)}}}function z(t){let e,l,f,c,g=t[2].layout,u=[];for(let n=0;n<g.length;n+=1)u[n]=K(q(t,g,n));const m=t=>p(u[t],1,1,(()=>{u[t]=null}));let d=t[2].footer,R=[];for(let n=0;n<d.length;n+=1)R[n]=U(S(t,d,n));const H=t=>p(R[t],1,1,(()=>{R[t]=null}));return{c(){e=n("div");for(let t=0;t<u.length;t+=1)u[t].c();l=w();for(let t=0;t<R.length;t+=1)R[t].c();this.h()},l(t){e=o(t,"DIV",{id:!0,class:!0});var n=s(e);for(let e=0;e<u.length;e+=1)u[e].l(n);l=x(n);for(let e=0;e<R.length;e+=1)R[e].l(n);n.forEach(r),this.h()},h(){a(e,"id","game"),a(e,"class","flex flex-col text-white h-full"),v((()=>t[6].call(e)))},m(n,o){h(n,e,o);for(let t=0;t<u.length;t+=1)u[t].m(e,null);k(e,l);for(let t=0;t<R.length;t+=1)R[t].m(e,null);f=j(e,t[6].bind(e)),c=!0},p(t,[n]){if(28&n){let o;for(g=t[2].layout,o=0;o<g.length;o+=1){const s=q(t,g,o);u[o]?(u[o].p(s,n),i(u[o],1)):(u[o]=K(s),u[o].c(),i(u[o],1),u[o].m(e,l))}for(B(),o=g.length;o<u.length;o+=1)m(o);$()}if(12&n){let l;for(d=t[2].footer,l=0;l<d.length;l+=1){const o=S(t,d,l);R[l]?(R[l].p(o,n),i(R[l],1)):(R[l]=U(o),R[l].c(),i(R[l],1),R[l].m(e,null))}for(B(),l=d.length;l<R.length;l+=1)H(l);$()}},i(t){if(!c){for(let t=0;t<g.length;t+=1)i(u[t]);for(let t=0;t<d.length;t+=1)i(R[t]);c=!0}},o(t){u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)p(u[e]);R=R.filter(Boolean);for(let e=0;e<R.length;e+=1)p(R[e]);c=!1},d(t){t&&r(e),y(u,t),y(R,t),f()}}}function A(t,e,l){let n,o,s,r,a;R(t,E,(t=>l(5,o=t))),R(t,D,(t=>l(2,s=t))),R(t,b,(t=>l(7,r=t))),R(t,G,(t=>l(4,a=t)));{let t=r.query.get("g");t||(t="klondike-vegas");let e=r.query.get("d");D.set(new I(t,e))}let f=0,c=0,h=s.layout.length+s.footer.length,i=s.layout.reduce(((t,e)=>t+(e.maxHeight-1)),0);return t.$$.update=()=>{7&t.$$.dirty&&E.set(Math.min(f/s.longestRow-5,(-.018*c*i+.66*c)/(h*(s.conf.overlayRows?.1*s.layout.length:1)))),32&t.$$.dirty&&l(3,n=1.5*o)},[f,c,s,n,a,o,function(){f=this.clientWidth,c=this.clientHeight,l(0,f),l(1,c)}]}class F extends t{constructor(t){super(),e(this,t,A,z,l,{})}}export{F as default};
