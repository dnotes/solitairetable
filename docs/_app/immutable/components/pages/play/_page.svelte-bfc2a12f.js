import{S as le,i as re,s as ie,H as Te,k as E,a as L,l as N,m as V,c as F,h,n as v,X as B,b,G as j,Q,I as Pe,J as Je,K as Le,f as g,t as w,C as Fe,F as H,T as Xe,W as Y,e as D,g as S,d as R,$ as _e,a0 as Z,p as C,a1 as Ye,v as M,w as z,x as G,y as T,a2 as Ke,q as P,r as J,A as U,u as Oe,a3 as Ze,E as x,Y as xe}from"../../../chunks/index-4f26f8ba.js";import{b as et,a as tt}from"../../../chunks/navigation-e2146536.js";import{p as lt}from"../../../chunks/stores-df3726a5.js";import{n as ee,o as de,q as Qe,g as q,r as ue,I as ae,l as rt,i as pe,j as it,k as nt}from"../../../chunks/index.es-725136b3.js";import{A as st,a as ot,G as ft}from"../../../chunks/Game-6b953bb7.js";import"../../../chunks/singletons-ba9da0f9.js";import"../../../chunks/index-6634cca6.js";function ct(f){let e,t,l;return{c(){e=E("div"),t=E("img"),this.h()},l(r){e=N(r,"DIV",{});var s=V(e);t=N(s,"IMG",{class:!0,src:!0,alt:!0}),s.forEach(h),this.h()},h(){v(t,"class","w-full"),Y(t.src,l=f[11]+"_empty.svg")||v(t,"src",l),v(t,"alt","-")},m(r,s){b(r,e,s),j(e,t)},p(r,s){s&2048&&!Y(t.src,l=r[11]+"_empty.svg")&&v(t,"src",l)},d(r){r&&h(e)}}}function at(f){let e,t,l;const r=[_t,ut],s=[];function o(n,i){return n[1]||n[0].facedown?0:1}return e=o(f),t=s[e]=r[e](f),{c(){t.c(),l=D()},l(n){t.l(n),l=D()},m(n,i){s[e].m(n,i),b(n,l,i)},p(n,i){let c=e;e=o(n),e===c?s[e].p(n,i):(S(),w(s[c],1,1,()=>{s[c]=null}),R(),t=s[e],t?t.p(n,i):(t=s[e]=r[e](n),t.c()),g(t,1),t.m(l.parentNode,l))},d(n){s[e].d(n),n&&h(l)}}}function ut(f){let e,t,l,r,s;return{c(){e=E("div"),t=E("img"),this.h()},l(o){e=N(o,"DIV",{});var n=V(e);t=N(n,"IMG",{class:!0,src:!0,alt:!0}),n.forEach(h),this.h()},h(){v(t,"class","w-full"),Y(t.src,l=f[11]+f[9]+".svg")||v(t,"src",l),v(t,"alt",f[10])},m(o,n){b(o,e,n),j(e,t),s=!0},p(o,n){(!s||n&2560&&!Y(t.src,l=o[11]+o[9]+".svg"))&&v(t,"src",l),(!s||n&1024)&&v(t,"alt",o[10])},i(o){s||(o&&_e(()=>{r||(r=Z(e,te,{},!0)),r.run(1)}),s=!0)},o(o){o&&(r||(r=Z(e,te,{},!1)),r.run(0)),s=!1},d(o){o&&h(e),o&&r&&r.end()}}}function _t(f){let e,t,l,r,s;return{c(){e=E("div"),t=E("img"),this.h()},l(o){e=N(o,"DIV",{});var n=V(e);t=N(n,"IMG",{class:!0,src:!0,alt:!0}),n.forEach(h),this.h()},h(){v(t,"class","w-full"),Y(t.src,l=f[11]+"_back.svg")||v(t,"src",l),v(t,"alt","?")},m(o,n){b(o,e,n),j(e,t),s=!0},p(o,n){(!s||n&2048&&!Y(t.src,l=o[11]+"_back.svg"))&&v(t,"src",l)},i(o){s||(o&&_e(()=>{r||(r=Z(e,te,{},!0)),r.run(1)}),s=!0)},o(o){o&&(r||(r=Z(e,te,{},!1)),r.run(0)),s=!1},d(o){o&&h(e),o&&r&&r.end()}}}function dt(f){let e,t,l,r,s,o,n,i,c,_,y;function u(k,I){return k[0]?at:ct}let a=u(f),d=a(f);const m=f[19].default,$=Te(m,f,f[18],null);return{c(){e=E("div"),t=E("div"),d.c(),l=L(),r=E("div"),$&&$.c(),this.h()},l(k){e=N(k,"DIV",{class:!0,style:!0});var I=V(e);t=N(I,"DIV",{class:!0,draggable:!0});var W=V(t);d.l(W),l=F(W),r=N(W,"DIV",{class:!0});var A=V(r);$&&$.l(A),A.forEach(h),W.forEach(h),I.forEach(h),this.h()},h(){var k,I;v(r,"class",s="absolute w-full h-full text-center top-2 text-"+(f[4]<100?"xs":"sm")),v(t,"class","cursor-pointer"),v(t,"draggable",o=Boolean(f[12])),v(e,"class",n="card container "+f[8]+" rounded-xl absolute svelte-oigr2j"),v(e,"style",i=f[6]+":"+f[7]+"px"),B(e,"selected",(I=(k=f[5])==null?void 0:k.selection)==null?void 0:I.filter(f[23]).length)},m(k,I){b(k,e,I),j(e,t),d.m(t,null),j(t,l),j(t,r),$&&$.m(r,null),c=!0,_||(y=[Q(e,"dragstart",f[21]),Q(e,"dragend",f[22]),Q(e,"click",f[20])],_=!0)},p(k,[I]){var W,A;a===(a=u(k))&&d?d.p(k,I):(d.d(1),d=a(k),d&&(d.c(),d.m(t,l))),$&&$.p&&(!c||I&262144)&&Pe($,m,k,k[18],c?Le(m,k[18],I,null):Je(k[18]),null),(!c||I&16&&s!==(s="absolute w-full h-full text-center top-2 text-"+(k[4]<100?"xs":"sm")))&&v(r,"class",s),(!c||I&4096&&o!==(o=Boolean(k[12])))&&v(t,"draggable",o),(!c||I&256&&n!==(n="card container "+k[8]+" rounded-xl absolute svelte-oigr2j"))&&v(e,"class",n),(!c||I&192&&i!==(i=k[6]+":"+k[7]+"px"))&&v(e,"style",i),I&289&&B(e,"selected",(A=(W=k[5])==null?void 0:W.selection)==null?void 0:A.filter(k[23]).length)},i(k){c||(g($,k),c=!0)},o(k){w($,k),c=!1},d(k){k&&h(e),d.d(),$&&$.d(k),_=!1,Fe(y)}}}function te(f,{delay:e=0,duration:t=80}){return{delay:e,duration:t,css:(l,r)=>`
				transform: rotateY(${1-r*180}deg);
				opacity: ${1-r};
        ${r?"position:absolute;":"position:static"}
			`}}function ht(f,e,t){let l,r,s,o,n,i,c,_;H(f,ee,p=>t(4,n=p)),H(f,de,p=>t(16,i=p)),H(f,Qe,p=>t(17,c=p)),H(f,q,p=>t(5,_=p));let{$$slots:y={},$$scope:u}=e,{card:a=void 0}=e,{facedown:d=!1}=e,{stack:m=void 0}=e,{cardIndex:$=0}=e,k,I,W,A,X,O;a&&(A=["hearts","diamonds"].includes(a.suitName)?"text-red-600":"text-black",X=a.isJoker?a.char==="1"?"_joker_black":"_joker_red":`${a.rank}_${a.suitName}`,O=a.isJoker?"joker":`${a.rank}${a.suit}`);function se(p){Xe.call(this,f,p)}const oe=p=>{m&&(r==null?void 0:r.length)&&(ue.set({cards:r,cardDepth:l,fromStack:m==null?void 0:m.index}),_==null||_.clearSelected(),_==null||_.setSelected(r,m))},fe=p=>{ue.set({}),_==null||_.clearSelected(),q.set(_)},ce=p=>(p==null?void 0:p.id)===(a==null?void 0:a.id);return f.$$set=p=>{"card"in p&&t(0,a=p.card),"facedown"in p&&t(1,d=p.facedown),"stack"in p&&t(2,m=p.stack),"cardIndex"in p&&t(14,$=p.cardIndex),"$$scope"in p&&t(18,u=p.$$scope)},f.$$.update=()=>{var p,K,he;f.$$.dirty&16388&&t(3,l=m==null?void 0:m.getCardDepth($)),f.$$.dirty&12&&t(13,r=l?m==null?void 0:m.look(l):[]),f.$$.dirty&47&&t(12,s=a&&!d&&!((p=_==null?void 0:_.conf)!=null&&p.multiSelect)&&l&&!a.facedown&&(((K=_==null?void 0:_.conf)==null?void 0:K.selectBlockedStacks)||!(m!=null&&m.isBlocked))&&(!((he=m==null?void 0:m.conf)!=null&&he.limitAvailable)||l<=m.conf.limitAvailable)),f.$$.dirty&245764&&m&&(t(15,k=Math.max($-m.firstVisible,0)),t(7,W=m!=null&&m.isDeck?0:k*(m.conf.horizontal?c:i)),t(6,I=m.conf.horizontal?"left":"top")),f.$$.dirty&16&&t(11,o=n>100?"/cards/":"/cards/small/")},[a,d,m,l,n,_,I,W,A,X,O,o,s,r,$,k,i,c,u,y,se,oe,fe,ce]}class ne extends le{constructor(e){super(),re(this,e,ht,dt,ie,{card:0,facedown:1,stack:2,cardIndex:14})}}function me(f,e,t){const l=f.slice();return l[25]=e[t],l[27]=t,l}function ge(f,e,t){const l=f.slice();return l[25]=e[t],l[27]=t,l}function pt(f){let e,t,l;const r=f[13].default,s=Te(r,f,f[21],null);return{c(){e=E("div"),s&&s.c(),this.h()},l(o){e=N(o,"DIV",{class:!0,style:!0});var n=V(e);s&&s.l(n),n.forEach(h),this.h()},h(){v(e,"class",t="relative "+f[4]+" box-content"),C(e,"width",(f[0]==="-"?f[2]/2:f[2])+"px")},m(o,n){b(o,e,n),s&&s.m(e,null),l=!0},p(o,n){s&&s.p&&(!l||n&2097152)&&Pe(s,r,o,o[21],l?Le(r,o[21],n,null):Je(o[21]),null),(!l||n&16&&t!==(t="relative "+o[4]+" box-content"))&&v(e,"class",t),(!l||n&5)&&C(e,"width",(o[0]==="-"?o[2]/2:o[2])+"px")},i(o){l||(g(s,o),l=!0)},o(o){w(s,o),l=!1},d(o){o&&h(e),s&&s.d(o)}}}function mt(f){let e,t,l,r,s,o=f[0]&&ke(f);return{c(){e=E("div"),t=E("div"),o&&o.c(),this.h()},l(n){e=N(n,"DIV",{class:!0,style:!0});var i=V(e);t=N(i,"DIV",{class:!0,style:!0});var c=V(t);o&&o.l(c),c.forEach(h),i.forEach(h),this.h()},h(){v(t,"class","relative h-full"),C(t,"max-width",f[2]+"px"),v(e,"class","relative justify-center"),C(e,"height",f[7]+"px"),C(e,"width",f[8]+"px"),B(e,"pointer-events-auto",f[0]&&(f[0].length||f[0].isDeck||f[0].conf.showEmpty)),B(e,"p-1",f[2]>100)},m(n,i){b(n,e,i),j(e,t),o&&o.m(t,null),l=!0,r||(s=[Q(e,"dragover",Ct),Q(e,"drop",f[20])],r=!0)},p(n,i){n[0]?o?(o.p(n,i),i&1&&g(o,1)):(o=ke(n),o.c(),g(o,1),o.m(t,null)):o&&(S(),w(o,1,1,()=>{o=null}),R()),(!l||i&4)&&C(t,"max-width",n[2]+"px"),(!l||i&128)&&C(e,"height",n[7]+"px"),(!l||i&256)&&C(e,"width",n[8]+"px"),i&1&&B(e,"pointer-events-auto",n[0]&&(n[0].length||n[0].isDeck||n[0].conf.showEmpty)),i&4&&B(e,"p-1",n[2]>100)},i(n){l||(g(o),l=!0)},o(n){w(o),l=!1},d(n){n&&h(e),o&&o.d(),r=!1,Fe(s)}}}function ke(f){let e,t,l,r;const s=[kt,gt],o=[];function n(i,c){return i[0].isDeck?0:1}return e=n(f),t=o[e]=s[e](f),{c(){t.c(),l=D()},l(i){t.l(i),l=D()},m(i,c){o[e].m(i,c),b(i,l,c),r=!0},p(i,c){let _=e;e=n(i),e===_?o[e].p(i,c):(S(),w(o[_],1,1,()=>{o[_]=null}),R(),t=o[e],t?t.p(i,c):(t=o[e]=s[e](i),t.c()),g(t,1),t.m(l.parentNode,l))},i(i){r||(g(t),r=!0)},o(i){w(t),r=!1},d(i){o[e].d(i),i&&h(l)}}}function gt(f){let e=[],t=new Map,l,r,s=f[0].stack;const o=i=>i[25].id;for(let i=0;i<s.length;i+=1){let c=me(f,s,i),_=o(c);t.set(_,e[i]=$e(_,c))}let n=null;return s.length||(n=be(f)),{c(){for(let i=0;i<e.length;i+=1)e[i].c();l=D(),n&&n.c()},l(i){for(let c=0;c<e.length;c+=1)e[c].l(i);l=D(),n&&n.l(i)},m(i,c){for(let _=0;_<e.length;_+=1)e[_].m(i,c);b(i,l,c),n&&n.m(i,c),r=!0},p(i,c){c&1605&&(s=i[0].stack,S(),e=Ye(e,c,o,1,i,s,t,l.parentNode,Ke,$e,l,me),R(),!s.length&&n?n.p(i,c):s.length?n&&(S(),w(n,1,1,()=>{n=null}),R()):(n=be(i),n.c(),g(n,1),n.m(l.parentNode,l)))},i(i){if(!r){for(let c=0;c<s.length;c+=1)g(e[c]);r=!0}},o(i){for(let c=0;c<e.length;c+=1)w(e[c]);r=!1},d(i){for(let c=0;c<e.length;c+=1)e[c].d(i);i&&h(l),n&&n.d(i)}}}function kt(f){let e=[],t=new Map,l,r,s=f[0].stack;const o=i=>i[25].id;for(let i=0;i<s.length;i+=1){let c=ge(f,s,i),_=o(c);t.set(_,e[i]=Ce(_,c))}let n=null;return s.length||(n=Ie(f)),{c(){for(let i=0;i<e.length;i+=1)e[i].c();l=D(),n&&n.c()},l(i){for(let c=0;c<e.length;c+=1)e[c].l(i);l=D(),n&&n.l(i)},m(i,c){for(let _=0;_<e.length;_+=1)e[_].m(i,c);b(i,l,c),n&&n.m(i,c),r=!0},p(i,c){c&1571&&(s=i[0].stack,S(),e=Ye(e,c,o,1,i,s,t,l.parentNode,Ke,Ce,l,ge),R(),!s.length&&n?n.p(i,c):s.length?n&&(S(),w(n,1,1,()=>{n=null}),R()):(n=Ie(i),n.c(),g(n,1),n.m(l.parentNode,l)))},i(i){if(!r){for(let c=0;c<s.length;c+=1)g(e[c]);r=!0}},o(i){for(let c=0;c<e.length;c+=1)w(e[c]);r=!1},d(i){for(let c=0;c<e.length;c+=1)e[c].d(i);i&&h(l),n&&n.d(i)}}}function be(f){let e,t,l=f[9].conf.showEmpty&&ve(f);return{c(){l&&l.c(),e=D()},l(r){l&&l.l(r),e=D()},m(r,s){l&&l.m(r,s),b(r,e,s),t=!0},p(r,s){r[9].conf.showEmpty?l?(l.p(r,s),s&512&&g(l,1)):(l=ve(r),l.c(),g(l,1),l.m(e.parentNode,e)):l&&(S(),w(l,1,1,()=>{l=null}),R())},i(r){t||(g(l),t=!0)},o(r){w(l),t=!1},d(r){l&&l.d(r),r&&h(e)}}}function ve(f){let e,t;return e=new ne({props:{$$slots:{default:[bt]},$$scope:{ctx:f}}}),{c(){M(e.$$.fragment)},l(l){z(e.$$.fragment,l)},m(l,r){G(e,l,r),t=!0},p(l,r){const s={};r&2097220&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}function we(f){let e,t;return{c(){e=E("div"),t=P("\xA0"),this.h()},l(l){e=N(l,"DIV",{class:!0,style:!0});var r=V(e);t=J(r,"\xA0"),r.forEach(h),this.h()},h(){v(e,"class","absolute w-full top-0 bg-blue-300 opacity-40 rounded-xl -my-2"),C(e,"height",f[2]*1.5+"px")},m(l,r){b(l,e,r),j(e,t)},p(l,r){r&4&&C(e,"height",l[2]*1.5+"px")},d(l){l&&h(e)}}}function bt(f){let e,t=f[6]&&we(f);return{c(){t&&t.c(),e=L()},l(l){t&&t.l(l),e=F(l)},m(l,r){t&&t.m(l,r),b(l,e,r)},p(l,r){l[6]?t?t.p(l,r):(t=we(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){t&&t.d(l),l&&h(e)}}}function ye(f){let e,t;return{c(){e=E("div"),t=P("\xA0"),this.h()},l(l){e=N(l,"DIV",{class:!0,style:!0});var r=V(e);t=J(r,"\xA0"),r.forEach(h),this.h()},h(){v(e,"class","absolute w-full top-0 bg-blue-500 opacity-40 rounded-xl -my-2"),C(e,"height",f[2]*1.5+"px")},m(l,r){b(l,e,r),j(e,t)},p(l,r){r&4&&C(e,"height",l[2]*1.5+"px")},d(l){l&&h(e)}}}function vt(f){let e,t=f[6]&&f[27]===f[0].length-1&&ye(f);return{c(){t&&t.c(),e=L()},l(l){t&&t.l(l),e=F(l)},m(l,r){t&&t.m(l,r),b(l,e,r)},p(l,r){l[6]&&l[27]===l[0].length-1?t?t.p(l,r):(t=ye(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){t&&t.d(l),l&&h(e)}}}function $e(f,e){let t,l,r;function s(){return e[19](e[25])}return l=new ne({props:{card:e[25],stack:e[0],cardIndex:e[27],$$slots:{default:[vt]},$$scope:{ctx:e}}}),l.$on("click",s),{key:f,first:null,c(){t=D(),M(l.$$.fragment),this.h()},l(o){t=D(),z(l.$$.fragment,o),this.h()},h(){this.first=t},m(o,n){b(o,t,n),G(l,o,n),r=!0},p(o,n){e=o;const i={};n&1&&(i.card=e[25]),n&1&&(i.stack=e[0]),n&1&&(i.cardIndex=e[27]),n&2097221&&(i.$$scope={dirty:n,ctx:e}),l.$set(i)},i(o){r||(g(l.$$.fragment,o),r=!0)},o(o){w(l.$$.fragment,o),r=!1},d(o){o&&h(t),T(l,o)}}}function Ie(f){let e,t;return e=new ne({props:{$$slots:{default:[Nt]},$$scope:{ctx:f}}}),e.$on("click",f[18]),{c(){M(e.$$.fragment)},l(l){z(e.$$.fragment,l)},m(l,r){G(e,l,r),t=!0},p(l,r){const s={};r&2097698&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}function wt(f){let e,t,l,r,s,o,n;return t=new ae({props:{icon:rt,dropdownFrom:"top",href:f[9].href,class:"no-link "+(f[5]?"text-lg":"text-xs")+" "+(f[1]?"":"py-0"),$$slots:{menu:[It],default:[$t]},$$scope:{ctx:f}}}),t.$on("click",f[15]),r=new ae({props:{icon:pe,overlay:it,class:(f[5]?"text-lg":"text-xs")+" "+(f[1]?"":"py-0"),$$slots:{default:[Dt]},$$scope:{ctx:f}}}),r.$on("click",f[16]),o=new ae({props:{icon:pe,overlay:nt,class:(f[5]?"text-lg":"text-xs")+" "+(f[1]?"":"py-0"),$$slots:{default:[Et]},$$scope:{ctx:f}}}),o.$on("click",f[17]),{c(){e=E("div"),M(t.$$.fragment),l=L(),M(r.$$.fragment),s=L(),M(o.$$.fragment),this.h()},l(i){e=N(i,"DIV",{class:!0});var c=V(e);z(t.$$.fragment,c),l=F(c),z(r.$$.fragment,c),s=F(c),z(o.$$.fragment,c),c.forEach(h),this.h()},h(){v(e,"class","flex flex-col justify-center items-center")},m(i,c){b(i,e,c),G(t,e,null),j(e,l),G(r,e,null),j(e,s),G(o,e,null),n=!0},p(i,c){const _={};c&512&&(_.href=i[9].href),c&34&&(_.class="no-link "+(i[5]?"text-lg":"text-xs")+" "+(i[1]?"":"py-0")),c&2097154&&(_.$$scope={dirty:c,ctx:i}),t.$set(_);const y={};c&34&&(y.class=(i[5]?"text-lg":"text-xs")+" "+(i[1]?"":"py-0")),c&2097154&&(y.$$scope={dirty:c,ctx:i}),r.$set(y);const u={};c&34&&(u.class=(i[5]?"text-lg":"text-xs")+" "+(i[1]?"":"py-0")),c&2097154&&(u.$$scope={dirty:c,ctx:i}),o.$set(u)},i(i){n||(g(t.$$.fragment,i),g(r.$$.fragment,i),g(o.$$.fragment,i),n=!0)},o(i){w(t.$$.fragment,i),w(r.$$.fragment,i),w(o.$$.fragment,i),n=!1},d(i){i&&h(e),T(t),T(r),T(o)}}}function yt(f){let e,t,l=typeof f[9].canRecycle=="number"&&Ve(f);return{c(){e=E("div"),t=P(`Cycle
                  `),l&&l.c(),this.h()},l(r){e=N(r,"DIV",{});var s=V(e);t=J(s,`Cycle
                  `),l&&l.l(s),s.forEach(h),this.h()},h(){B(e,"text-gray-600",!f[9].canRecycle)},m(r,s){b(r,e,s),j(e,t),l&&l.m(e,null)},p(r,s){typeof r[9].canRecycle=="number"?l?l.p(r,s):(l=Ve(r),l.c(),l.m(e,null)):l&&(l.d(1),l=null),s&512&&B(e,"text-gray-600",!r[9].canRecycle)},i:U,o:U,d(r){r&&h(e),l&&l.d()}}}function De(f){let e;return{c(){e=P("Share")},l(t){e=J(t,"Share")},m(t,l){b(t,e,l)},d(t){t&&h(e)}}}function $t(f){let e,t=f[1]&&De();return{c(){t&&t.c(),e=D()},l(l){t&&t.l(l),e=D()},m(l,r){t&&t.m(l,r),b(l,e,r)},p(l,r){l[1]?t||(t=De(),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){t&&t.d(l),l&&h(e)}}}function It(f){let e,t;return{c(){e=E("span"),t=P("Link\xA0copied!"),this.h()},l(l){e=N(l,"SPAN",{class:!0,slot:!0});var r=V(e);t=J(r,"Link\xA0copied!"),r.forEach(h),this.h()},h(){v(e,"class","p-2"),v(e,"slot","menu")},m(l,r){b(l,e,r),j(e,t)},p:U,d(l){l&&h(e)}}}function Ee(f){let e;return{c(){e=P("Restart")},l(t){e=J(t,"Restart")},m(t,l){b(t,e,l)},d(t){t&&h(e)}}}function Dt(f){let e,t=f[1]&&Ee();return{c(){t&&t.c(),e=D()},l(l){t&&t.l(l),e=D()},m(l,r){t&&t.m(l,r),b(l,e,r)},p(l,r){l[1]?t||(t=Ee(),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){t&&t.d(l),l&&h(e)}}}function Ne(f){let e;return{c(){e=P("New")},l(t){e=J(t,"New")},m(t,l){b(t,e,l)},d(t){t&&h(e)}}}function Et(f){let e,t=f[1]&&Ne();return{c(){t&&t.c(),e=D()},l(l){t&&t.l(l),e=D()},m(l,r){t&&t.m(l,r),b(l,e,r)},p(l,r){l[1]?t||(t=Ne(),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){t&&t.d(l),l&&h(e)}}}function Ve(f){let e,t=f[9].canRecycle+"",l,r;return{c(){e=P("("),l=P(t),r=P(")")},l(s){e=J(s,"("),l=J(s,t),r=J(s,")")},m(s,o){b(s,e,o),b(s,l,o),b(s,r,o)},p(s,o){o&512&&t!==(t=s[9].canRecycle+"")&&Oe(l,t)},d(s){s&&h(e),s&&h(l),s&&h(r)}}}function Nt(f){let e,t,l,r;const s=[yt,wt],o=[];function n(i,c){return i[9].canRecycle?0:1}return e=n(f),t=o[e]=s[e](f),{c(){t.c(),l=L()},l(i){t.l(i),l=F(i)},m(i,c){o[e].m(i,c),b(i,l,c),r=!0},p(i,c){let _=e;e=n(i),e===_?o[e].p(i,c):(S(),w(o[_],1,1,()=>{o[_]=null}),R(),t=o[e],t?t.p(i,c):(t=o[e]=s[e](i),t.c()),g(t,1),t.m(l.parentNode,l))},i(i){r||(g(t),r=!0)},o(i){w(t),r=!1},d(i){o[e].d(i),i&&h(l)}}}function Ce(f,e){let t,l,r;return l=new ne({props:{card:e[25],stack:e[9].deck,facedown:!0,cardIndex:e[27]}}),l.$on("click",e[14]),{key:f,first:null,c(){t=D(),M(l.$$.fragment),this.h()},l(s){t=D(),z(l.$$.fragment,s),this.h()},h(){this.first=t},m(s,o){b(s,t,o),G(l,s,o),r=!0},p(s,o){e=s;const n={};o&1&&(n.card=e[25]),o&512&&(n.stack=e[9].deck),o&1&&(n.cardIndex=e[27]),l.$set(n)},i(s){r||(g(l.$$.fragment,s),r=!0)},o(s){w(l.$$.fragment,s),r=!1},d(s){s&&h(t),T(l,s)}}}function Vt(f){let e,t,l,r;const s=[mt,pt],o=[];function n(i,c){return i[9]&&typeof i[0]!="string"?0:1}return e=n(f),t=o[e]=s[e](f),{c(){t.c(),l=D()},l(i){t.l(i),l=D()},m(i,c){o[e].m(i,c),b(i,l,c),r=!0},p(i,[c]){let _=e;e=n(i),e===_?o[e].p(i,c):(S(),w(o[_],1,1,()=>{o[_]=null}),R(),t=o[e],t?t.p(i,c):(t=o[e]=s[e](i),t.c()),g(t,1),t.m(l.parentNode,l))},i(i){r||(g(t),r=!0)},o(i){w(t),r=!1},d(i){o[e].d(i),i&&h(l)}}}const Ct=f=>{f.preventDefault()};function St(f,e,t){let l,r,s,o,n,i,c,_;H(f,ee,p=>t(2,o=p)),H(f,ue,p=>t(3,n=p)),H(f,q,p=>t(9,i=p)),H(f,de,p=>t(23,c=p)),H(f,Qe,p=>t(24,_=p));let{$$slots:y={},$$scope:u}=e,{stack:a}=e,d="",m=0,$=0;typeof a=="string"?(a==="-"&&(d="flex-shrink"),a==="_"&&(d="flex-grow")):a&&!a.isDeck&&(a.conf.horizontal?$=a.maxWidth*_:m=a.maxHeight*c);function k(p,K){!p||typeof p=="string"||(K?i==null||i.clickCard(K,p):i==null||i.deal(),q.set(i))}let I,W;const A=()=>k(a),X=p=>{p.preventDefault(),navigator.clipboard.writeText(new URL(i.href,window.location.href).toString())},O=()=>{i.reset(),q.set(i)},se=()=>{i.new(),q.set(i)},oe=()=>k(a),fe=p=>k(a,p),ce=p=>{p.preventDefault(),a.wants(n.cards)&&(console.log("dropped!"),i.do(new st("move",new ot(n.cardDepth,n.fromStack,a.index))))};return f.$$set=p=>{"stack"in p&&t(0,a=p.stack),"$$scope"in p&&t(21,u=p.$$scope)},f.$$.update=()=>{f.$$.dirty&4100&&t(8,l=o+$),f.$$.dirty&2052&&t(7,r=o*1.5+m),f.$$.dirty&9&&t(6,s=a&&typeof a!="string"&&(n==null?void 0:n.cards)&&a.wants(n.cards)),f.$$.dirty&4&&t(1,I=o>95),f.$$.dirty&4&&t(5,W=o>150),f.$$.dirty&2},[a,I,o,n,d,W,s,r,l,i,k,m,$,y,A,X,O,se,oe,fe,ce,u]}class Ue extends le{constructor(e){super(),re(this,e,St,Vt,ie,{stack:0})}}function Se(f,e,t){const l=f.slice();return l[9]=e[t],l}function Re(f,e,t){const l=f.slice();return l[12]=e[t],l}function He(f,e,t){const l=f.slice();return l[9]=e[t],l[16]=t,l}function je(f,e,t){const l=f.slice();return l[12]=e[t],l}function We(f){let e,t,l,r=f[2].layout,s=[];for(let u=0;u<r.length;u+=1)s[u]=qe(He(f,r,u));const o=u=>w(s[u],1,1,()=>{s[u]=null});let n=null;r.length||(n=Be());let i=f[2].footer,c=[];for(let u=0;u<i.length;u+=1)c[u]=Ge(Se(f,i,u));const _=u=>w(c[u],1,1,()=>{c[u]=null});let y=null;return i.length||(y=Me()),{c(){for(let u=0;u<s.length;u+=1)s[u].c();n&&n.c(),e=L();for(let u=0;u<c.length;u+=1)c[u].c();t=D(),y&&y.c()},l(u){for(let a=0;a<s.length;a+=1)s[a].l(u);n&&n.l(u),e=F(u);for(let a=0;a<c.length;a+=1)c[a].l(u);t=D(),y&&y.l(u)},m(u,a){for(let d=0;d<s.length;d+=1)s[d].m(u,a);n&&n.m(u,a),b(u,e,a);for(let d=0;d<c.length;d+=1)c[d].m(u,a);b(u,t,a),y&&y.m(u,a),l=!0},p(u,a){if(a&28){r=u[2].layout;let d;for(d=0;d<r.length;d+=1){const m=He(u,r,d);s[d]?(s[d].p(m,a),g(s[d],1)):(s[d]=qe(m),s[d].c(),g(s[d],1),s[d].m(e.parentNode,e))}for(S(),d=r.length;d<s.length;d+=1)o(d);R(),!r.length&&n?n.p(u,a):r.length?n&&(n.d(1),n=null):(n=Be(),n.c(),n.m(e.parentNode,e))}if(a&12){i=u[2].footer;let d;for(d=0;d<i.length;d+=1){const m=Se(u,i,d);c[d]?(c[d].p(m,a),g(c[d],1)):(c[d]=Ge(m),c[d].c(),g(c[d],1),c[d].m(t.parentNode,t))}for(S(),d=i.length;d<c.length;d+=1)_(d);R(),!i.length&&y?y.p(u,a):i.length?y&&(y.d(1),y=null):(y=Me(),y.c(),y.m(t.parentNode,t))}},i(u){if(!l){for(let a=0;a<r.length;a+=1)g(s[a]);for(let a=0;a<i.length;a+=1)g(c[a]);l=!0}},o(u){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)w(s[a]);c=c.filter(Boolean);for(let a=0;a<c.length;a+=1)w(c[a]);l=!1},d(u){x(s,u),n&&n.d(u),u&&h(e),x(c,u),u&&h(t),y&&y.d(u)}}}function Be(f){let e;return{c(){e=E("div"),this.h()},l(t){e=N(t,"DIV",{class:!0}),V(e).forEach(h),this.h()},h(){v(e,"class","w-full relative md:p-4 pointer-events-none")},m(t,l){b(t,e,l)},p:U,d(t){t&&h(e)}}}function Ae(f){let e,t;return e=new Ue({props:{stack:f[12]}}),{c(){M(e.$$.fragment)},l(l){z(e.$$.fragment,l)},m(l,r){G(e,l,r),t=!0},p(l,r){const s={};r&4&&(s.stack=l[12]),e.$set(s)},i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}function qe(f){let e,t,l=f[9].stacks,r=[];for(let o=0;o<l.length;o+=1)r[o]=Ae(je(f,l,o));const s=o=>w(r[o],1,1,()=>{r[o]=null});return{c(){e=E("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=N(o,"DIV",{class:!0,style:!0});var n=V(e);for(let i=0;i<r.length;i+=1)r[i].l(n);n.forEach(h),this.h()},h(){v(e,"class","flex flex-row w-full relative md:p-4 pointer-events-none select-none"),C(e,"height",(f[2].conf.overlayRows&&f[16]!==f[2].layout.length-1?f[3]*.4:f[3]+f[9].maxHeight*f[4]+f[4])+"px"),B(e,"justify-center",f[2].conf.centerRows)},m(o,n){b(o,e,n);for(let i=0;i<r.length;i+=1)r[i].m(e,null);t=!0},p(o,n){if(n&4){l=o[9].stacks;let i;for(i=0;i<l.length;i+=1){const c=je(o,l,i);r[i]?(r[i].p(c,n),g(r[i],1)):(r[i]=Ae(c),r[i].c(),g(r[i],1),r[i].m(e,null))}for(S(),i=l.length;i<r.length;i+=1)s(i);R()}(!t||n&28)&&C(e,"height",(o[2].conf.overlayRows&&o[16]!==o[2].layout.length-1?o[3]*.4:o[3]+o[9].maxHeight*o[4]+o[4])+"px"),n&4&&B(e,"justify-center",o[2].conf.centerRows)},i(o){if(!t){for(let n=0;n<l.length;n+=1)g(r[n]);t=!0}},o(o){r=r.filter(Boolean);for(let n=0;n<r.length;n+=1)w(r[n]);t=!1},d(o){o&&h(e),x(r,o)}}}function Me(f){let e;return{c(){e=E("div"),this.h()},l(t){e=N(t,"DIV",{class:!0}),V(e).forEach(h),this.h()},h(){v(e,"class","w-full relative md:p-4 pointer-events-none")},m(t,l){b(t,e,l)},p:U,d(t){t&&h(e)}}}function ze(f){let e,t;return e=new Ue({props:{stack:f[12]}}),{c(){M(e.$$.fragment)},l(l){z(e.$$.fragment,l)},m(l,r){G(e,l,r),t=!0},p(l,r){const s={};r&4&&(s.stack=l[12]),e.$set(s)},i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}function Ge(f){let e,t,l,r=f[9].stacks,s=[];for(let n=0;n<r.length;n+=1)s[n]=ze(Re(f,r,n));const o=n=>w(s[n],1,1,()=>{s[n]=null});return{c(){e=E("div");for(let n=0;n<s.length;n+=1)s[n].c();t=L(),this.h()},l(n){e=N(n,"DIV",{class:!0,style:!0});var i=V(e);for(let c=0;c<s.length;c+=1)s[c].l(i);t=F(i),i.forEach(h),this.h()},h(){v(e,"class","flex flex-row w-full relative md:p-4 pointer-events-none"),C(e,"height",f[3]+"px"),B(e,"justify-center",f[2].conf.centerRows)},m(n,i){b(n,e,i);for(let c=0;c<s.length;c+=1)s[c].m(e,null);j(e,t),l=!0},p(n,i){if(i&4){r=n[9].stacks;let c;for(c=0;c<r.length;c+=1){const _=Re(n,r,c);s[c]?(s[c].p(_,i),g(s[c],1)):(s[c]=ze(_),s[c].c(),g(s[c],1),s[c].m(e,t))}for(S(),c=r.length;c<s.length;c+=1)o(c);R()}(!l||i&8)&&C(e,"height",n[3]+"px"),i&4&&B(e,"justify-center",n[2].conf.centerRows)},i(n){if(!l){for(let i=0;i<r.length;i+=1)g(s[i]);l=!0}},o(n){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)w(s[i]);l=!1},d(n){n&&h(e),x(s,n)}}}function Rt(f){let e,t,l,r=f[2]&&We(f);return{c(){e=E("div"),r&&r.c(),this.h()},l(s){e=N(s,"DIV",{id:!0,class:!0});var o=V(e);r&&r.l(o),o.forEach(h),this.h()},h(){v(e,"id","game"),v(e,"class","flex flex-col text-white h-full"),_e(()=>f[8].call(e))},m(s,o){b(s,e,o),r&&r.m(e,null),t=Ze(e,f[8].bind(e)),l=!0},p(s,[o]){s[2]?r?(r.p(s,o),o&4&&g(r,1)):(r=We(s),r.c(),g(r,1),r.m(e,null)):r&&(S(),w(r,1,1,()=>{r=null}),R())},i(s){l||(g(r),l=!0)},o(s){w(r),l=!1},d(s){s&&h(e),r&&r.d(),t()}}}function Ht(f,e,t){let l,r,s,o,n,i;H(f,ee,u=>t(7,o=u)),H(f,q,u=>t(2,n=u)),H(f,de,u=>t(4,i=u));let c=0,_=0;function y(){c=this.clientWidth,_=this.clientHeight,t(0,c),t(1,_)}return f.$$.update=()=>{var u,a,d,m,$;f.$$.dirty&4&&t(5,l=((u=n==null?void 0:n.layout)==null?void 0:u.length)+((a=n==null?void 0:n.footer)==null?void 0:a.length)),f.$$.dirty&4&&t(6,r=(d=n==null?void 0:n.layout)==null?void 0:d.reduce((k,I)=>k+=I.maxHeight-1,0)),f.$$.dirty&103&&ee.set(Math.min(c/(n==null?void 0:n.longestRow)-5,(-.018*_*r+_*.55)/(l*((m=n==null?void 0:n.conf)!=null&&m.overlayRows?(($=n==null?void 0:n.layout)==null?void 0:$.length)*.1:1)))),f.$$.dirty&128&&t(3,s=o*1.5)},[c,_,n,s,i,l,r,o,y]}class jt extends le{constructor(e){super(),re(this,e,Ht,Rt,ie,{})}}function Wt(f){var o;let e,t,l,r,s;return document.title=e=((o=f[0])==null?void 0:o.title)+" | Solitaire Table",r=new jt({}),{c(){t=L(),l=E("div"),M(r.$$.fragment),this.h()},l(n){xe('[data-svelte="svelte-18ey8t2"]',document.head).forEach(h),t=F(n),l=N(n,"DIV",{class:!0});var c=V(l);z(r.$$.fragment,c),c.forEach(h),this.h()},h(){v(l,"class","w-full h-full bg-green-800 overflow-x-auto pt-4 md:pt-8")},m(n,i){b(n,t,i),b(n,l,i),G(r,l,null),s=!0},p(n,[i]){var c;(!s||i&1)&&e!==(e=((c=n[0])==null?void 0:c.title)+" | Solitaire Table")&&(document.title=e)},i(n){s||(g(r.$$.fragment,n),s=!0)},o(n){w(r.$$.fragment,n),s=!1},d(n){n&&h(t),n&&h(l),T(r)}}}function Bt(f,e,t){let l,r;return H(f,lt,s=>t(1,l=s)),H(f,q,s=>t(0,r=s)),et(s=>{q.set(void 0)}),tt(s=>{let o=l.url.searchParams.get("g");o||(o="klondike-vegas");let n=l.url.searchParams.get("d")||void 0;q.set(new ft(o,n))}),[r]}class Jt extends le{constructor(e){super(),re(this,e,Bt,Wt,ie,{})}}export{Jt as default};
