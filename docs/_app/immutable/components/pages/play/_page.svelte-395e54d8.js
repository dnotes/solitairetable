import{S as le,i as re,s as ne,H as ze,k as D,a as L,l as E,m as N,c as F,h as d,n as w,X as W,b as v,G as B,Q,I as Ge,J as Te,K as Pe,f as m,t as b,C as Je,F as H,T as Ue,W as Y,e as C,g as S,d as R,$ as _e,a0 as Z,p as V,a1 as Le,v as A,w as q,x as M,y as z,a2 as Fe,q as P,r as J,A as U,u as Xe,a3 as Oe,E as x,Y as Ze}from"../../../chunks/index-4f26f8ba.js";import{b as xe,a as et}from"../../../chunks/navigation-d91a7844.js";import{p as tt}from"../../../chunks/stores-e1794a0a.js";import{n as ee,o as he,q as Ye,g as T,r as ae,I as ue,i as Ke,k as lt,l as rt,j as nt,L as it}from"../../../chunks/LinkCopied-fff47d77.js";import{A as st,a as ot,G as ft}from"../../../chunks/Game-2cabc409.js";import"../../../chunks/singletons-7037dab1.js";import"../../../chunks/index-6634cca6.js";function ct(f){let e,l,t;return{c(){e=D("div"),l=D("img"),this.h()},l(r){e=E(r,"DIV",{});var n=N(e);l=E(n,"IMG",{class:!0,src:!0,alt:!0}),n.forEach(d),this.h()},h(){w(l,"class","w-full"),Y(l.src,t=f[11]+"_empty.svg")||w(l,"src",t),w(l,"alt","-")},m(r,n){v(r,e,n),B(e,l)},p(r,n){n&2048&&!Y(l.src,t=r[11]+"_empty.svg")&&w(l,"src",t)},d(r){r&&d(e)}}}function at(f){let e,l,t;const r=[_t,ut],n=[];function o(i,s){return i[1]||i[0].facedown?0:1}return e=o(f),l=n[e]=r[e](f),{c(){l.c(),t=C()},l(i){l.l(i),t=C()},m(i,s){n[e].m(i,s),v(i,t,s)},p(i,s){let c=e;e=o(i),e===c?n[e].p(i,s):(S(),b(n[c],1,1,()=>{n[c]=null}),R(),l=n[e],l?l.p(i,s):(l=n[e]=r[e](i),l.c()),m(l,1),l.m(t.parentNode,t))},d(i){n[e].d(i),i&&d(t)}}}function ut(f){let e,l,t,r,n;return{c(){e=D("div"),l=D("img"),this.h()},l(o){e=E(o,"DIV",{});var i=N(e);l=E(i,"IMG",{class:!0,src:!0,alt:!0}),i.forEach(d),this.h()},h(){w(l,"class","w-full"),Y(l.src,t=f[11]+f[9]+".svg")||w(l,"src",t),w(l,"alt",f[10])},m(o,i){v(o,e,i),B(e,l),n=!0},p(o,i){(!n||i&2560&&!Y(l.src,t=o[11]+o[9]+".svg"))&&w(l,"src",t),(!n||i&1024)&&w(l,"alt",o[10])},i(o){n||(o&&_e(()=>{r||(r=Z(e,te,{},!0)),r.run(1)}),n=!0)},o(o){o&&(r||(r=Z(e,te,{},!1)),r.run(0)),n=!1},d(o){o&&d(e),o&&r&&r.end()}}}function _t(f){let e,l,t,r,n;return{c(){e=D("div"),l=D("img"),this.h()},l(o){e=E(o,"DIV",{});var i=N(e);l=E(i,"IMG",{class:!0,src:!0,alt:!0}),i.forEach(d),this.h()},h(){w(l,"class","w-full"),Y(l.src,t=f[11]+"_back.svg")||w(l,"src",t),w(l,"alt","?")},m(o,i){v(o,e,i),B(e,l),n=!0},p(o,i){(!n||i&2048&&!Y(l.src,t=o[11]+"_back.svg"))&&w(l,"src",t)},i(o){n||(o&&_e(()=>{r||(r=Z(e,te,{},!0)),r.run(1)}),n=!0)},o(o){o&&(r||(r=Z(e,te,{},!1)),r.run(0)),n=!1},d(o){o&&d(e),o&&r&&r.end()}}}function ht(f){let e,l,t,r,n,o,i,s,c,_,y;function u(k,I){return k[0]?at:ct}let a=u(f),h=a(f);const g=f[19].default,$=ze(g,f,f[18],null);return{c(){e=D("div"),l=D("div"),h.c(),t=L(),r=D("div"),$&&$.c(),this.h()},l(k){e=E(k,"DIV",{class:!0,style:!0});var I=N(e);l=E(I,"DIV",{class:!0,draggable:!0});var j=N(l);h.l(j),t=F(j),r=E(j,"DIV",{class:!0});var G=N(r);$&&$.l(G),G.forEach(d),j.forEach(d),I.forEach(d),this.h()},h(){var k,I;w(r,"class",n="absolute w-full h-full text-center top-2 text-"+(f[4]<100?"xs":"sm")),w(l,"class","cursor-pointer"),w(l,"draggable",o=Boolean(f[12])),w(e,"class",i="card container "+f[8]+" rounded-xl absolute svelte-oigr2j"),w(e,"style",s=f[6]+":"+f[7]+"px"),W(e,"selected",(I=(k=f[5])==null?void 0:k.selection)==null?void 0:I.filter(f[23]).length)},m(k,I){v(k,e,I),B(e,l),h.m(l,null),B(l,t),B(l,r),$&&$.m(r,null),c=!0,_||(y=[Q(e,"dragstart",f[21]),Q(e,"dragend",f[22]),Q(e,"click",f[20])],_=!0)},p(k,[I]){var j,G;a===(a=u(k))&&h?h.p(k,I):(h.d(1),h=a(k),h&&(h.c(),h.m(l,t))),$&&$.p&&(!c||I&262144)&&Ge($,g,k,k[18],c?Pe(g,k[18],I,null):Te(k[18]),null),(!c||I&16&&n!==(n="absolute w-full h-full text-center top-2 text-"+(k[4]<100?"xs":"sm")))&&w(r,"class",n),(!c||I&4096&&o!==(o=Boolean(k[12])))&&w(l,"draggable",o),(!c||I&256&&i!==(i="card container "+k[8]+" rounded-xl absolute svelte-oigr2j"))&&w(e,"class",i),(!c||I&192&&s!==(s=k[6]+":"+k[7]+"px"))&&w(e,"style",s),I&289&&W(e,"selected",(G=(j=k[5])==null?void 0:j.selection)==null?void 0:G.filter(k[23]).length)},i(k){c||(m($,k),c=!0)},o(k){b($,k),c=!1},d(k){k&&d(e),h.d(),$&&$.d(k),_=!1,Je(y)}}}function te(f,{delay:e=0,duration:l=80}){return{delay:e,duration:l,css:(t,r)=>`
				transform: rotateY(${1-r*180}deg);
				opacity: ${1-r};
        ${r?"position:absolute;":"position:static"}
			`}}function dt(f,e,l){let t,r,n,o,i,s,c,_;H(f,ee,p=>l(4,i=p)),H(f,he,p=>l(16,s=p)),H(f,Ye,p=>l(17,c=p)),H(f,T,p=>l(5,_=p));let{$$slots:y={},$$scope:u}=e,{card:a=void 0}=e,{facedown:h=!1}=e,{stack:g=void 0}=e,{cardIndex:$=0}=e,k,I,j,G,X,O;a&&(G=["hearts","diamonds"].includes(a.suitName)?"text-red-600":"text-black",X=a.isJoker?a.char==="1"?"_joker_black":"_joker_red":`${a.rank}_${a.suitName}`,O=a.isJoker?"joker":`${a.rank}${a.suit}`);function se(p){Ue.call(this,f,p)}const oe=p=>{g&&(r==null?void 0:r.length)&&(ae.set({cards:r,cardDepth:t,fromStack:g==null?void 0:g.index}),_==null||_.clearSelected(),_==null||_.setSelected(r,g))},fe=p=>{ae.set({}),_==null||_.clearSelected(),T.set(_)},ce=p=>(p==null?void 0:p.id)===(a==null?void 0:a.id);return f.$$set=p=>{"card"in p&&l(0,a=p.card),"facedown"in p&&l(1,h=p.facedown),"stack"in p&&l(2,g=p.stack),"cardIndex"in p&&l(14,$=p.cardIndex),"$$scope"in p&&l(18,u=p.$$scope)},f.$$.update=()=>{var p,K,de;f.$$.dirty&16388&&l(3,t=g==null?void 0:g.getCardDepth($)),f.$$.dirty&12&&l(13,r=t?g==null?void 0:g.look(t):[]),f.$$.dirty&47&&l(12,n=a&&!h&&!((p=_==null?void 0:_.conf)!=null&&p.multiSelect)&&t&&!a.facedown&&(((K=_==null?void 0:_.conf)==null?void 0:K.selectBlockedStacks)||!(g!=null&&g.isBlocked))&&(!((de=g==null?void 0:g.conf)!=null&&de.limitAvailable)||t<=g.conf.limitAvailable)),f.$$.dirty&245764&&g&&(l(15,k=Math.max($-g.firstVisible,0)),l(7,j=g!=null&&g.isDeck?0:k*(g.conf.horizontal?c:s)),l(6,I=g.conf.horizontal?"left":"top")),f.$$.dirty&16&&l(11,o=i>100?"/cards/":"/cards/small/")},[a,h,g,t,i,_,I,j,G,X,O,o,n,r,$,k,s,c,u,y,se,oe,fe,ce]}class ie extends le{constructor(e){super(),re(this,e,dt,ht,ne,{card:0,facedown:1,stack:2,cardIndex:14})}}function pe(f,e,l){const t=f.slice();return t[25]=e[l],t[27]=l,t}function me(f,e,l){const t=f.slice();return t[25]=e[l],t[27]=l,t}function pt(f){let e,l,t;const r=f[13].default,n=ze(r,f,f[21],null);return{c(){e=D("div"),n&&n.c(),this.h()},l(o){e=E(o,"DIV",{class:!0,style:!0});var i=N(e);n&&n.l(i),i.forEach(d),this.h()},h(){w(e,"class",l="relative "+f[4]+" box-content"),V(e,"width",(f[0]==="-"?f[2]/2:f[2])+"px")},m(o,i){v(o,e,i),n&&n.m(e,null),t=!0},p(o,i){n&&n.p&&(!t||i&2097152)&&Ge(n,r,o,o[21],t?Pe(r,o[21],i,null):Te(o[21]),null),(!t||i&16&&l!==(l="relative "+o[4]+" box-content"))&&w(e,"class",l),(!t||i&5)&&V(e,"width",(o[0]==="-"?o[2]/2:o[2])+"px")},i(o){t||(m(n,o),t=!0)},o(o){b(n,o),t=!1},d(o){o&&d(e),n&&n.d(o)}}}function mt(f){let e,l,t,r,n,o=f[0]&&ge(f);return{c(){e=D("div"),l=D("div"),o&&o.c(),this.h()},l(i){e=E(i,"DIV",{class:!0,style:!0});var s=N(e);l=E(s,"DIV",{class:!0,style:!0});var c=N(l);o&&o.l(c),c.forEach(d),s.forEach(d),this.h()},h(){w(l,"class","relative h-full"),V(l,"max-width",f[2]+"px"),w(e,"class","relative justify-center"),V(e,"height",f[7]+"px"),V(e,"width",f[8]+"px"),W(e,"pointer-events-auto",f[0]&&(f[0].length||f[0].isDeck||f[0].conf.showEmpty)),W(e,"p-1",f[2]>100)},m(i,s){v(i,e,s),B(e,l),o&&o.m(l,null),t=!0,r||(n=[Q(e,"dragover",Vt),Q(e,"drop",f[20])],r=!0)},p(i,s){i[0]?o?(o.p(i,s),s&1&&m(o,1)):(o=ge(i),o.c(),m(o,1),o.m(l,null)):o&&(S(),b(o,1,1,()=>{o=null}),R()),(!t||s&4)&&V(l,"max-width",i[2]+"px"),(!t||s&128)&&V(e,"height",i[7]+"px"),(!t||s&256)&&V(e,"width",i[8]+"px"),s&1&&W(e,"pointer-events-auto",i[0]&&(i[0].length||i[0].isDeck||i[0].conf.showEmpty)),s&4&&W(e,"p-1",i[2]>100)},i(i){t||(m(o),t=!0)},o(i){b(o),t=!1},d(i){i&&d(e),o&&o.d(),r=!1,Je(n)}}}function ge(f){let e,l,t,r;const n=[kt,gt],o=[];function i(s,c){return s[0].isDeck?0:1}return e=i(f),l=o[e]=n[e](f),{c(){l.c(),t=C()},l(s){l.l(s),t=C()},m(s,c){o[e].m(s,c),v(s,t,c),r=!0},p(s,c){let _=e;e=i(s),e===_?o[e].p(s,c):(S(),b(o[_],1,1,()=>{o[_]=null}),R(),l=o[e],l?l.p(s,c):(l=o[e]=n[e](s),l.c()),m(l,1),l.m(t.parentNode,t))},i(s){r||(m(l),r=!0)},o(s){b(l),r=!1},d(s){o[e].d(s),s&&d(t)}}}function gt(f){let e=[],l=new Map,t,r,n=f[0].stack;const o=s=>s[25].id;for(let s=0;s<n.length;s+=1){let c=pe(f,n,s),_=o(c);l.set(_,e[s]=ye(_,c))}let i=null;return n.length||(i=ke(f)),{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=C(),i&&i.c()},l(s){for(let c=0;c<e.length;c+=1)e[c].l(s);t=C(),i&&i.l(s)},m(s,c){for(let _=0;_<e.length;_+=1)e[_].m(s,c);v(s,t,c),i&&i.m(s,c),r=!0},p(s,c){c&1605&&(n=s[0].stack,S(),e=Le(e,c,o,1,s,n,l,t.parentNode,Fe,ye,t,pe),R(),!n.length&&i?i.p(s,c):n.length?i&&(S(),b(i,1,1,()=>{i=null}),R()):(i=ke(s),i.c(),m(i,1),i.m(t.parentNode,t)))},i(s){if(!r){for(let c=0;c<n.length;c+=1)m(e[c]);r=!0}},o(s){for(let c=0;c<e.length;c+=1)b(e[c]);r=!1},d(s){for(let c=0;c<e.length;c+=1)e[c].d(s);s&&d(t),i&&i.d(s)}}}function kt(f){let e=[],l=new Map,t,r,n=f[0].stack;const o=s=>s[25].id;for(let s=0;s<n.length;s+=1){let c=me(f,n,s),_=o(c);l.set(_,e[s]=Ne(_,c))}let i=null;return n.length||(i=$e(f)),{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=C(),i&&i.c()},l(s){for(let c=0;c<e.length;c+=1)e[c].l(s);t=C(),i&&i.l(s)},m(s,c){for(let _=0;_<e.length;_+=1)e[_].m(s,c);v(s,t,c),i&&i.m(s,c),r=!0},p(s,c){c&1571&&(n=s[0].stack,S(),e=Le(e,c,o,1,s,n,l,t.parentNode,Fe,Ne,t,me),R(),!n.length&&i?i.p(s,c):n.length?i&&(S(),b(i,1,1,()=>{i=null}),R()):(i=$e(s),i.c(),m(i,1),i.m(t.parentNode,t)))},i(s){if(!r){for(let c=0;c<n.length;c+=1)m(e[c]);r=!0}},o(s){for(let c=0;c<e.length;c+=1)b(e[c]);r=!1},d(s){for(let c=0;c<e.length;c+=1)e[c].d(s);s&&d(t),i&&i.d(s)}}}function ke(f){let e,l,t=f[9].conf.showEmpty&&be(f);return{c(){t&&t.c(),e=C()},l(r){t&&t.l(r),e=C()},m(r,n){t&&t.m(r,n),v(r,e,n),l=!0},p(r,n){r[9].conf.showEmpty?t?(t.p(r,n),n&512&&m(t,1)):(t=be(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(S(),b(t,1,1,()=>{t=null}),R())},i(r){l||(m(t),l=!0)},o(r){b(t),l=!1},d(r){t&&t.d(r),r&&d(e)}}}function be(f){let e,l;return e=new ie({props:{$$slots:{default:[bt]},$$scope:{ctx:f}}}),{c(){A(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,r){M(e,t,r),l=!0},p(t,r){const n={};r&2097220&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){z(e,t)}}}function ve(f){let e,l;return{c(){e=D("div"),l=P("\xA0"),this.h()},l(t){e=E(t,"DIV",{class:!0,style:!0});var r=N(e);l=J(r,"\xA0"),r.forEach(d),this.h()},h(){w(e,"class","absolute w-full top-0 bg-blue-300 opacity-40 rounded-xl -my-2"),V(e,"height",f[2]*1.5+"px")},m(t,r){v(t,e,r),B(e,l)},p(t,r){r&4&&V(e,"height",t[2]*1.5+"px")},d(t){t&&d(e)}}}function bt(f){let e,l=f[6]&&ve(f);return{c(){l&&l.c(),e=L()},l(t){l&&l.l(t),e=F(t)},m(t,r){l&&l.m(t,r),v(t,e,r)},p(t,r){t[6]?l?l.p(t,r):(l=ve(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){l&&l.d(t),t&&d(e)}}}function we(f){let e,l;return{c(){e=D("div"),l=P("\xA0"),this.h()},l(t){e=E(t,"DIV",{class:!0,style:!0});var r=N(e);l=J(r,"\xA0"),r.forEach(d),this.h()},h(){w(e,"class","absolute w-full top-0 bg-blue-500 opacity-40 rounded-xl -my-2"),V(e,"height",f[2]*1.5+"px")},m(t,r){v(t,e,r),B(e,l)},p(t,r){r&4&&V(e,"height",t[2]*1.5+"px")},d(t){t&&d(e)}}}function vt(f){let e,l=f[6]&&f[27]===f[0].length-1&&we(f);return{c(){l&&l.c(),e=L()},l(t){l&&l.l(t),e=F(t)},m(t,r){l&&l.m(t,r),v(t,e,r)},p(t,r){t[6]&&t[27]===t[0].length-1?l?l.p(t,r):(l=we(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){l&&l.d(t),t&&d(e)}}}function ye(f,e){let l,t,r;function n(){return e[19](e[25])}return t=new ie({props:{card:e[25],stack:e[0],cardIndex:e[27],$$slots:{default:[vt]},$$scope:{ctx:e}}}),t.$on("click",n),{key:f,first:null,c(){l=C(),A(t.$$.fragment),this.h()},l(o){l=C(),q(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,i){v(o,l,i),M(t,o,i),r=!0},p(o,i){e=o;const s={};i&1&&(s.card=e[25]),i&1&&(s.stack=e[0]),i&1&&(s.cardIndex=e[27]),i&2097221&&(s.$$scope={dirty:i,ctx:e}),t.$set(s)},i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){b(t.$$.fragment,o),r=!1},d(o){o&&d(l),z(t,o)}}}function $e(f){let e,l;return e=new ie({props:{$$slots:{default:[Nt]},$$scope:{ctx:f}}}),e.$on("click",f[18]),{c(){A(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,r){M(e,t,r),l=!0},p(t,r){const n={};r&2097698&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){z(e,t)}}}function wt(f){let e,l,t,r,n=f[1]&&Ie(f);return t=new ue({props:{icon:Ke,overlay:lt,class:(f[5]?"text-lg":"text-xs")+" "+(f[1]?"":"py-0"),$$slots:{default:[Et]},$$scope:{ctx:f}}}),t.$on("click",f[17]),{c(){e=D("div"),n&&n.c(),l=L(),A(t.$$.fragment),this.h()},l(o){e=E(o,"DIV",{class:!0});var i=N(e);n&&n.l(i),l=F(i),q(t.$$.fragment,i),i.forEach(d),this.h()},h(){w(e,"class","flex flex-col justify-center items-center")},m(o,i){v(o,e,i),n&&n.m(e,null),B(e,l),M(t,e,null),r=!0},p(o,i){o[1]?n?(n.p(o,i),i&2&&m(n,1)):(n=Ie(o),n.c(),m(n,1),n.m(e,l)):n&&(S(),b(n,1,1,()=>{n=null}),R());const s={};i&34&&(s.class=(o[5]?"text-lg":"text-xs")+" "+(o[1]?"":"py-0")),i&2097154&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){r||(m(n),m(t.$$.fragment,o),r=!0)},o(o){b(n),b(t.$$.fragment,o),r=!1},d(o){o&&d(e),n&&n.d(),z(t)}}}function yt(f){let e,l,t=typeof f[9].canRecycle=="number"&&Ee(f);return{c(){e=D("div"),l=P(`Cycle
                  `),t&&t.c(),this.h()},l(r){e=E(r,"DIV",{});var n=N(e);l=J(n,`Cycle
                  `),t&&t.l(n),n.forEach(d),this.h()},h(){W(e,"text-gray-600",!f[9].canRecycle)},m(r,n){v(r,e,n),B(e,l),t&&t.m(e,null)},p(r,n){typeof r[9].canRecycle=="number"?t?t.p(r,n):(t=Ee(r),t.c(),t.m(e,null)):t&&(t.d(1),t=null),n&512&&W(e,"text-gray-600",!r[9].canRecycle)},i:U,o:U,d(r){r&&d(e),t&&t.d()}}}function Ie(f){let e,l,t,r;return e=new ue({props:{icon:rt,dropdownFrom:"top",href:f[9].href,class:"no-link "+(f[5]?"text-lg":"text-xs")+" "+(f[1]?"":"py-0"),$$slots:{menu:[It],default:[$t]},$$scope:{ctx:f}}}),e.$on("click",f[15]),t=new ue({props:{icon:Ke,overlay:nt,class:(f[5]?"text-lg":"text-xs")+" "+(f[1]?"":"py-0"),$$slots:{default:[Dt]},$$scope:{ctx:f}}}),t.$on("click",f[16]),{c(){A(e.$$.fragment),l=L(),A(t.$$.fragment)},l(n){q(e.$$.fragment,n),l=F(n),q(t.$$.fragment,n)},m(n,o){M(e,n,o),v(n,l,o),M(t,n,o),r=!0},p(n,o){const i={};o&512&&(i.href=n[9].href),o&34&&(i.class="no-link "+(n[5]?"text-lg":"text-xs")+" "+(n[1]?"":"py-0")),o&2097152&&(i.$$scope={dirty:o,ctx:n}),e.$set(i);const s={};o&34&&(s.class=(n[5]?"text-lg":"text-xs")+" "+(n[1]?"":"py-0")),o&2097152&&(s.$$scope={dirty:o,ctx:n}),t.$set(s)},i(n){r||(m(e.$$.fragment,n),m(t.$$.fragment,n),r=!0)},o(n){b(e.$$.fragment,n),b(t.$$.fragment,n),r=!1},d(n){z(e,n),n&&d(l),z(t,n)}}}function $t(f){let e;return{c(){e=P("Share")},l(l){e=J(l,"Share")},m(l,t){v(l,e,t)},d(l){l&&d(e)}}}function It(f){let e,l,t;return l=new it({}),{c(){e=D("span"),A(l.$$.fragment),this.h()},l(r){e=E(r,"SPAN",{slot:!0});var n=N(e);q(l.$$.fragment,n),n.forEach(d),this.h()},h(){w(e,"slot","menu")},m(r,n){v(r,e,n),M(l,e,null),t=!0},p:U,i(r){t||(m(l.$$.fragment,r),t=!0)},o(r){b(l.$$.fragment,r),t=!1},d(r){r&&d(e),z(l)}}}function Dt(f){let e;return{c(){e=P("Restart")},l(l){e=J(l,"Restart")},m(l,t){v(l,e,t)},d(l){l&&d(e)}}}function De(f){let e;return{c(){e=P("New")},l(l){e=J(l,"New")},m(l,t){v(l,e,t)},d(l){l&&d(e)}}}function Et(f){let e,l=f[1]&&De();return{c(){l&&l.c(),e=C()},l(t){l&&l.l(t),e=C()},m(t,r){l&&l.m(t,r),v(t,e,r)},p(t,r){t[1]?l||(l=De(),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){l&&l.d(t),t&&d(e)}}}function Ee(f){let e,l=f[9].canRecycle+"",t,r;return{c(){e=P("("),t=P(l),r=P(")")},l(n){e=J(n,"("),t=J(n,l),r=J(n,")")},m(n,o){v(n,e,o),v(n,t,o),v(n,r,o)},p(n,o){o&512&&l!==(l=n[9].canRecycle+"")&&Xe(t,l)},d(n){n&&d(e),n&&d(t),n&&d(r)}}}function Nt(f){let e,l,t,r;const n=[yt,wt],o=[];function i(s,c){return s[9].canRecycle?0:1}return e=i(f),l=o[e]=n[e](f),{c(){l.c(),t=L()},l(s){l.l(s),t=F(s)},m(s,c){o[e].m(s,c),v(s,t,c),r=!0},p(s,c){let _=e;e=i(s),e===_?o[e].p(s,c):(S(),b(o[_],1,1,()=>{o[_]=null}),R(),l=o[e],l?l.p(s,c):(l=o[e]=n[e](s),l.c()),m(l,1),l.m(t.parentNode,t))},i(s){r||(m(l),r=!0)},o(s){b(l),r=!1},d(s){o[e].d(s),s&&d(t)}}}function Ne(f,e){let l,t,r;return t=new ie({props:{card:e[25],stack:e[9].deck,facedown:!0,cardIndex:e[27]}}),t.$on("click",e[14]),{key:f,first:null,c(){l=C(),A(t.$$.fragment),this.h()},l(n){l=C(),q(t.$$.fragment,n),this.h()},h(){this.first=l},m(n,o){v(n,l,o),M(t,n,o),r=!0},p(n,o){e=n;const i={};o&1&&(i.card=e[25]),o&512&&(i.stack=e[9].deck),o&1&&(i.cardIndex=e[27]),t.$set(i)},i(n){r||(m(t.$$.fragment,n),r=!0)},o(n){b(t.$$.fragment,n),r=!1},d(n){n&&d(l),z(t,n)}}}function Ct(f){let e,l,t,r;const n=[mt,pt],o=[];function i(s,c){return s[9]&&typeof s[0]!="string"?0:1}return e=i(f),l=o[e]=n[e](f),{c(){l.c(),t=C()},l(s){l.l(s),t=C()},m(s,c){o[e].m(s,c),v(s,t,c),r=!0},p(s,[c]){let _=e;e=i(s),e===_?o[e].p(s,c):(S(),b(o[_],1,1,()=>{o[_]=null}),R(),l=o[e],l?l.p(s,c):(l=o[e]=n[e](s),l.c()),m(l,1),l.m(t.parentNode,t))},i(s){r||(m(l),r=!0)},o(s){b(l),r=!1},d(s){o[e].d(s),s&&d(t)}}}const Vt=f=>{f.preventDefault()};function St(f,e,l){let t,r,n,o,i,s,c,_;H(f,ee,p=>l(2,o=p)),H(f,ae,p=>l(3,i=p)),H(f,T,p=>l(9,s=p)),H(f,he,p=>l(23,c=p)),H(f,Ye,p=>l(24,_=p));let{$$slots:y={},$$scope:u}=e,{stack:a}=e,h="",g=0,$=0;typeof a=="string"?(a==="-"&&(h="flex-shrink"),a==="_"&&(h="flex-grow")):a&&!a.isDeck&&(a.conf.horizontal?$=a.maxWidth*_:g=a.maxHeight*c);function k(p,K){!p||typeof p=="string"||(K?s==null||s.clickCard(K,p):s==null||s.deal(),T.set(s))}let I,j;const G=()=>k(a),X=p=>{p.preventDefault(),navigator.clipboard.writeText(new URL(s.href,window.location.href).toString())},O=()=>{s.reset(),T.set(s)},se=()=>{s.new(),T.set(s)},oe=()=>k(a),fe=p=>k(a,p),ce=p=>{p.preventDefault(),a.wants(i.cards)&&(console.log("dropped!"),s.do(new st("move",new ot(i.cardDepth,i.fromStack,a.index))))};return f.$$set=p=>{"stack"in p&&l(0,a=p.stack),"$$scope"in p&&l(21,u=p.$$scope)},f.$$.update=()=>{f.$$.dirty&4100&&l(8,t=o+$),f.$$.dirty&2052&&l(7,r=o*1.5+g),f.$$.dirty&9&&l(6,n=a&&typeof a!="string"&&(i==null?void 0:i.cards)&&a.wants(i.cards)),f.$$.dirty&4&&l(1,I=o>95),f.$$.dirty&4&&l(5,j=o>150),f.$$.dirty&2},[a,I,o,i,h,j,n,r,t,s,k,g,$,y,G,X,O,se,oe,fe,ce,u]}class Qe extends le{constructor(e){super(),re(this,e,St,Ct,ne,{stack:0})}}function Ce(f,e,l){const t=f.slice();return t[9]=e[l],t}function Ve(f,e,l){const t=f.slice();return t[12]=e[l],t}function Se(f,e,l){const t=f.slice();return t[9]=e[l],t[16]=l,t}function Re(f,e,l){const t=f.slice();return t[12]=e[l],t}function He(f){let e,l,t,r=f[2].layout,n=[];for(let u=0;u<r.length;u+=1)n[u]=Be(Se(f,r,u));const o=u=>b(n[u],1,1,()=>{n[u]=null});let i=null;r.length||(i=je());let s=f[2].footer,c=[];for(let u=0;u<s.length;u+=1)c[u]=Me(Ce(f,s,u));const _=u=>b(c[u],1,1,()=>{c[u]=null});let y=null;return s.length||(y=Ae()),{c(){for(let u=0;u<n.length;u+=1)n[u].c();i&&i.c(),e=L();for(let u=0;u<c.length;u+=1)c[u].c();l=C(),y&&y.c()},l(u){for(let a=0;a<n.length;a+=1)n[a].l(u);i&&i.l(u),e=F(u);for(let a=0;a<c.length;a+=1)c[a].l(u);l=C(),y&&y.l(u)},m(u,a){for(let h=0;h<n.length;h+=1)n[h].m(u,a);i&&i.m(u,a),v(u,e,a);for(let h=0;h<c.length;h+=1)c[h].m(u,a);v(u,l,a),y&&y.m(u,a),t=!0},p(u,a){if(a&28){r=u[2].layout;let h;for(h=0;h<r.length;h+=1){const g=Se(u,r,h);n[h]?(n[h].p(g,a),m(n[h],1)):(n[h]=Be(g),n[h].c(),m(n[h],1),n[h].m(e.parentNode,e))}for(S(),h=r.length;h<n.length;h+=1)o(h);R(),!r.length&&i?i.p(u,a):r.length?i&&(i.d(1),i=null):(i=je(),i.c(),i.m(e.parentNode,e))}if(a&12){s=u[2].footer;let h;for(h=0;h<s.length;h+=1){const g=Ce(u,s,h);c[h]?(c[h].p(g,a),m(c[h],1)):(c[h]=Me(g),c[h].c(),m(c[h],1),c[h].m(l.parentNode,l))}for(S(),h=s.length;h<c.length;h+=1)_(h);R(),!s.length&&y?y.p(u,a):s.length?y&&(y.d(1),y=null):(y=Ae(),y.c(),y.m(l.parentNode,l))}},i(u){if(!t){for(let a=0;a<r.length;a+=1)m(n[a]);for(let a=0;a<s.length;a+=1)m(c[a]);t=!0}},o(u){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)b(n[a]);c=c.filter(Boolean);for(let a=0;a<c.length;a+=1)b(c[a]);t=!1},d(u){x(n,u),i&&i.d(u),u&&d(e),x(c,u),u&&d(l),y&&y.d(u)}}}function je(f){let e;return{c(){e=D("div"),this.h()},l(l){e=E(l,"DIV",{class:!0}),N(e).forEach(d),this.h()},h(){w(e,"class","w-full relative md:p-4 pointer-events-none")},m(l,t){v(l,e,t)},p:U,d(l){l&&d(e)}}}function We(f){let e,l;return e=new Qe({props:{stack:f[12]}}),{c(){A(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,r){M(e,t,r),l=!0},p(t,r){const n={};r&4&&(n.stack=t[12]),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){z(e,t)}}}function Be(f){let e,l,t=f[9].stacks,r=[];for(let o=0;o<t.length;o+=1)r[o]=We(Re(f,t,o));const n=o=>b(r[o],1,1,()=>{r[o]=null});return{c(){e=D("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=E(o,"DIV",{class:!0,style:!0});var i=N(e);for(let s=0;s<r.length;s+=1)r[s].l(i);i.forEach(d),this.h()},h(){w(e,"class","flex flex-row w-full relative md:p-4 pointer-events-none select-none"),V(e,"height",(f[2].conf.overlayRows&&f[16]!==f[2].layout.length-1?f[3]*.4:f[3]+f[9].maxHeight*f[4]+f[4])+"px"),W(e,"justify-center",f[2].conf.centerRows)},m(o,i){v(o,e,i);for(let s=0;s<r.length;s+=1)r[s].m(e,null);l=!0},p(o,i){if(i&4){t=o[9].stacks;let s;for(s=0;s<t.length;s+=1){const c=Re(o,t,s);r[s]?(r[s].p(c,i),m(r[s],1)):(r[s]=We(c),r[s].c(),m(r[s],1),r[s].m(e,null))}for(S(),s=t.length;s<r.length;s+=1)n(s);R()}(!l||i&28)&&V(e,"height",(o[2].conf.overlayRows&&o[16]!==o[2].layout.length-1?o[3]*.4:o[3]+o[9].maxHeight*o[4]+o[4])+"px"),i&4&&W(e,"justify-center",o[2].conf.centerRows)},i(o){if(!l){for(let i=0;i<t.length;i+=1)m(r[i]);l=!0}},o(o){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)b(r[i]);l=!1},d(o){o&&d(e),x(r,o)}}}function Ae(f){let e;return{c(){e=D("div"),this.h()},l(l){e=E(l,"DIV",{class:!0}),N(e).forEach(d),this.h()},h(){w(e,"class","w-full relative md:p-4 pointer-events-none")},m(l,t){v(l,e,t)},p:U,d(l){l&&d(e)}}}function qe(f){let e,l;return e=new Qe({props:{stack:f[12]}}),{c(){A(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,r){M(e,t,r),l=!0},p(t,r){const n={};r&4&&(n.stack=t[12]),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){z(e,t)}}}function Me(f){let e,l,t,r=f[9].stacks,n=[];for(let i=0;i<r.length;i+=1)n[i]=qe(Ve(f,r,i));const o=i=>b(n[i],1,1,()=>{n[i]=null});return{c(){e=D("div");for(let i=0;i<n.length;i+=1)n[i].c();l=L(),this.h()},l(i){e=E(i,"DIV",{class:!0,style:!0});var s=N(e);for(let c=0;c<n.length;c+=1)n[c].l(s);l=F(s),s.forEach(d),this.h()},h(){w(e,"class","flex flex-row w-full relative md:p-4 pointer-events-none"),V(e,"height",f[3]+"px"),W(e,"justify-center",f[2].conf.centerRows)},m(i,s){v(i,e,s);for(let c=0;c<n.length;c+=1)n[c].m(e,null);B(e,l),t=!0},p(i,s){if(s&4){r=i[9].stacks;let c;for(c=0;c<r.length;c+=1){const _=Ve(i,r,c);n[c]?(n[c].p(_,s),m(n[c],1)):(n[c]=qe(_),n[c].c(),m(n[c],1),n[c].m(e,l))}for(S(),c=r.length;c<n.length;c+=1)o(c);R()}(!t||s&8)&&V(e,"height",i[3]+"px"),s&4&&W(e,"justify-center",i[2].conf.centerRows)},i(i){if(!t){for(let s=0;s<r.length;s+=1)m(n[s]);t=!0}},o(i){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)b(n[s]);t=!1},d(i){i&&d(e),x(n,i)}}}function Rt(f){let e,l,t,r=f[2]&&He(f);return{c(){e=D("div"),r&&r.c(),this.h()},l(n){e=E(n,"DIV",{id:!0,class:!0});var o=N(e);r&&r.l(o),o.forEach(d),this.h()},h(){w(e,"id","game"),w(e,"class","flex flex-col text-white h-full"),_e(()=>f[8].call(e))},m(n,o){v(n,e,o),r&&r.m(e,null),l=Oe(e,f[8].bind(e)),t=!0},p(n,[o]){n[2]?r?(r.p(n,o),o&4&&m(r,1)):(r=He(n),r.c(),m(r,1),r.m(e,null)):r&&(S(),b(r,1,1,()=>{r=null}),R())},i(n){t||(m(r),t=!0)},o(n){b(r),t=!1},d(n){n&&d(e),r&&r.d(),l()}}}function Ht(f,e,l){let t,r,n,o,i,s;H(f,ee,u=>l(7,o=u)),H(f,T,u=>l(2,i=u)),H(f,he,u=>l(4,s=u));let c=0,_=0;function y(){c=this.clientWidth,_=this.clientHeight,l(0,c),l(1,_)}return f.$$.update=()=>{var u,a,h,g,$;f.$$.dirty&4&&l(5,t=((u=i==null?void 0:i.layout)==null?void 0:u.length)+((a=i==null?void 0:i.footer)==null?void 0:a.length)),f.$$.dirty&4&&l(6,r=(h=i==null?void 0:i.layout)==null?void 0:h.reduce((k,I)=>k+=I.maxHeight-1,0)),f.$$.dirty&103&&ee.set(Math.min(c/(i==null?void 0:i.longestRow)-5,(-.018*_*r+_*.55)/(t*((g=i==null?void 0:i.conf)!=null&&g.overlayRows?(($=i==null?void 0:i.layout)==null?void 0:$.length)*.1:1)))),f.$$.dirty&128&&l(3,n=o*1.5)},[c,_,i,n,s,t,r,o,y]}class jt extends le{constructor(e){super(),re(this,e,Ht,Rt,ne,{})}}function Wt(f){var o;let e,l,t,r,n;return document.title=e=((o=f[0])==null?void 0:o.title)+" | Solitaire Table",r=new jt({}),{c(){l=L(),t=D("div"),A(r.$$.fragment),this.h()},l(i){Ze('[data-svelte="svelte-18ey8t2"]',document.head).forEach(d),l=F(i),t=E(i,"DIV",{class:!0});var c=N(t);q(r.$$.fragment,c),c.forEach(d),this.h()},h(){w(t,"class","w-full h-full bg-green-800 overflow-x-auto pt-4 md:pt-8")},m(i,s){v(i,l,s),v(i,t,s),M(r,t,null),n=!0},p(i,[s]){var c;(!n||s&1)&&e!==(e=((c=i[0])==null?void 0:c.title)+" | Solitaire Table")&&(document.title=e)},i(i){n||(m(r.$$.fragment,i),n=!0)},o(i){b(r.$$.fragment,i),n=!1},d(i){i&&d(l),i&&d(t),z(r)}}}function Bt(f,e,l){let t,r;return H(f,tt,n=>l(1,t=n)),H(f,T,n=>l(0,r=n)),xe(n=>{T.set(void 0)}),et(n=>{let o=t.url.searchParams.get("g");o||(o="klondike-vegas");let i=t.url.searchParams.get("d")||void 0;T.set(new ft(o,i))}),[r]}class Jt extends le{constructor(e){super(),re(this,e,Bt,Wt,ne,{})}}export{Jt as default};
