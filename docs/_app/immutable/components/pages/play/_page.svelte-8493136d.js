import{S as re,i as ne,s as ie,H as ze,k as I,a as Y,l as D,m as N,c as K,h,n as w,X as A,b,G as q,Q as Z,g as V,t as k,d as S,f as m,I as Ge,J as Te,K as Pe,C as Je,F as W,T as Ue,W as X,A as Q,e as C,$ as _e,a0 as x,p as R,a1 as Le,v as M,w as z,x as G,y as T,a2 as Fe,q as L,r as F,u as Xe,a3 as Oe,E as ee,Y as Ze}from"../../../chunks/index-4f26f8ba.js";import{b as xe,a as el}from"../../../chunks/navigation-cbe181e1.js";import{p as ll}from"../../../chunks/stores-da88eb8c.js";import{n as le,o as he,q as Ye,g as J,r as ae,I as ue,i as Ke,k as tl,l as rl,j as nl,L as il}from"../../../chunks/LinkCopied-fff47d77.js";import{A as ol,a as sl,G as fl}from"../../../chunks/Game-2cabc409.js";import"../../../chunks/singletons-8b064a00.js";import"../../../chunks/index-6634cca6.js";function cl(f){let e,t,l;return{c(){e=I("div"),t=I("img"),this.h()},l(r){e=D(r,"DIV",{});var n=N(e);t=D(n,"IMG",{class:!0,src:!0,alt:!0}),n.forEach(h),this.h()},h(){w(t,"class","w-full"),X(t.src,l=f[11]+"_empty.svg")||w(t,"src",l),w(t,"alt","-")},m(r,n){b(r,e,n),q(e,t)},p(r,n){n&2048&&!X(t.src,l=r[11]+"_empty.svg")&&w(t,"src",l)},i:Q,o:Q,d(r){r&&h(e)}}}function al(f){let e,t,l,r;const n=[_l,ul],s=[];function i(o,c){return o[1]||o[0].facedown?0:1}return e=i(f),t=s[e]=n[e](f),{c(){t.c(),l=C()},l(o){t.l(o),l=C()},m(o,c){s[e].m(o,c),b(o,l,c),r=!0},p(o,c){let _=e;e=i(o),e===_?s[e].p(o,c):(V(),k(s[_],1,1,()=>{s[_]=null}),S(),t=s[e],t?t.p(o,c):(t=s[e]=n[e](o),t.c()),m(t,1),t.m(l.parentNode,l))},i(o){r||(m(t),r=!0)},o(o){k(t),r=!1},d(o){s[e].d(o),o&&h(l)}}}function ul(f){let e,t,l,r,n;return{c(){e=I("div"),t=I("img"),this.h()},l(s){e=D(s,"DIV",{});var i=N(e);t=D(i,"IMG",{class:!0,src:!0,alt:!0}),i.forEach(h),this.h()},h(){w(t,"class","w-full"),X(t.src,l=f[11]+f[9]+".svg")||w(t,"src",l),w(t,"alt",f[10])},m(s,i){b(s,e,i),q(e,t),n=!0},p(s,i){(!n||i&2560&&!X(t.src,l=s[11]+s[9]+".svg"))&&w(t,"src",l),(!n||i&1024)&&w(t,"alt",s[10])},i(s){n||(_e(()=>{r||(r=x(e,te,{},!0)),r.run(1)}),n=!0)},o(s){r||(r=x(e,te,{},!1)),r.run(0),n=!1},d(s){s&&h(e),s&&r&&r.end()}}}function _l(f){let e,t,l,r,n;return{c(){e=I("div"),t=I("img"),this.h()},l(s){e=D(s,"DIV",{});var i=N(e);t=D(i,"IMG",{class:!0,src:!0,alt:!0}),i.forEach(h),this.h()},h(){w(t,"class","w-full"),X(t.src,l=f[11]+"_back.svg")||w(t,"src",l),w(t,"alt","?")},m(s,i){b(s,e,i),q(e,t),n=!0},p(s,i){(!n||i&2048&&!X(t.src,l=s[11]+"_back.svg"))&&w(t,"src",l)},i(s){n||(_e(()=>{r||(r=x(e,te,{},!0)),r.run(1)}),n=!0)},o(s){r||(r=x(e,te,{},!1)),r.run(0),n=!1},d(s){s&&h(e),s&&r&&r.end()}}}function hl(f){let e,t,l,r,n,s,i,o,c,_,y,u,a;const p=[al,cl],g=[];function H(v,$){return v[0]?0:1}l=H(f),r=g[l]=p[l](f);const j=f[19].default,E=ze(j,f,f[18],null);return{c(){e=I("div"),t=I("div"),r.c(),n=Y(),s=I("div"),E&&E.c(),this.h()},l(v){e=D(v,"DIV",{class:!0,style:!0});var $=N(e);t=D($,"DIV",{class:!0,draggable:!0});var B=N(t);r.l(B),n=K(B),s=D(B,"DIV",{class:!0});var P=N(s);E&&E.l(P),P.forEach(h),B.forEach(h),$.forEach(h),this.h()},h(){var v,$;w(s,"class",i="absolute w-full h-full text-center top-2 text-"+(f[4]<100?"xs":"sm")),w(t,"class","cursor-pointer"),w(t,"draggable",o=Boolean(f[12])),w(e,"class",c="card container "+f[8]+" rounded-xl absolute svelte-oigr2j"),w(e,"style",_=f[6]+":"+f[7]+"px"),A(e,"selected",($=(v=f[5])==null?void 0:v.selection)==null?void 0:$.filter(f[23]).length)},m(v,$){b(v,e,$),q(e,t),g[l].m(t,null),q(t,n),q(t,s),E&&E.m(s,null),y=!0,u||(a=[Z(e,"dragstart",f[21]),Z(e,"dragend",f[22]),Z(e,"click",f[20])],u=!0)},p(v,[$]){var P,U;let B=l;l=H(v),l===B?g[l].p(v,$):(V(),k(g[B],1,1,()=>{g[B]=null}),S(),r=g[l],r?r.p(v,$):(r=g[l]=p[l](v),r.c()),m(r,1),r.m(t,n)),E&&E.p&&(!y||$&262144)&&Ge(E,j,v,v[18],y?Pe(j,v[18],$,null):Te(v[18]),null),(!y||$&16&&i!==(i="absolute w-full h-full text-center top-2 text-"+(v[4]<100?"xs":"sm")))&&w(s,"class",i),(!y||$&4096&&o!==(o=Boolean(v[12])))&&w(t,"draggable",o),(!y||$&256&&c!==(c="card container "+v[8]+" rounded-xl absolute svelte-oigr2j"))&&w(e,"class",c),(!y||$&192&&_!==(_=v[6]+":"+v[7]+"px"))&&w(e,"style",_),$&289&&A(e,"selected",(U=(P=v[5])==null?void 0:P.selection)==null?void 0:U.filter(v[23]).length)},i(v){y||(m(r),m(E,v),y=!0)},o(v){k(r),k(E,v),y=!1},d(v){v&&h(e),g[l].d(),E&&E.d(v),u=!1,Je(a)}}}function te(f,{delay:e=0,duration:t=80}){return{delay:e,duration:t,css:(l,r)=>`
				transform: rotateY(${1-r*180}deg);
				opacity: ${1-r};
        ${r?"position:absolute;":"position:static"}
			`}}function dl(f,e,t){let l,r,n,s,i,o,c,_;W(f,le,d=>t(4,i=d)),W(f,he,d=>t(16,o=d)),W(f,Ye,d=>t(17,c=d)),W(f,J,d=>t(5,_=d));let{$$slots:y={},$$scope:u}=e,{card:a=void 0}=e,{facedown:p=!1}=e,{stack:g=void 0}=e,{cardIndex:H=0}=e,j,E,v,$,B,P;a&&($=["hearts","diamonds"].includes(a.suitName)?"text-red-600":"text-black",B=a.isJoker?a.char==="1"?"_joker_black":"_joker_red":`${a.rank}_${a.suitName}`,P=a.isJoker?"joker":`${a.rank}${a.suit}`);function U(d){Ue.call(this,f,d)}const se=d=>{g&&(r==null?void 0:r.length)&&(ae.set({cards:r,cardDepth:l,fromStack:g==null?void 0:g.index}),_==null||_.clearSelected(),_==null||_.setSelected(r,g))},fe=d=>{ae.set({}),_==null||_.clearSelected(),J.set(_)},ce=d=>(d==null?void 0:d.id)===(a==null?void 0:a.id);return f.$$set=d=>{"card"in d&&t(0,a=d.card),"facedown"in d&&t(1,p=d.facedown),"stack"in d&&t(2,g=d.stack),"cardIndex"in d&&t(14,H=d.cardIndex),"$$scope"in d&&t(18,u=d.$$scope)},f.$$.update=()=>{var d,O,de;f.$$.dirty&16388&&t(3,l=g==null?void 0:g.getCardDepth(H)),f.$$.dirty&12&&t(13,r=l?g==null?void 0:g.look(l):[]),f.$$.dirty&47&&t(12,n=a&&!p&&!((d=_==null?void 0:_.conf)!=null&&d.multiSelect)&&l&&!a.facedown&&(((O=_==null?void 0:_.conf)==null?void 0:O.selectBlockedStacks)||!(g!=null&&g.isBlocked))&&(!((de=g==null?void 0:g.conf)!=null&&de.limitAvailable)||l<=g.conf.limitAvailable)),f.$$.dirty&245764&&g&&(t(15,j=Math.max(H-g.firstVisible,0)),t(7,v=g!=null&&g.isDeck?0:j*(g.conf.horizontal?c:o)),t(6,E=g.conf.horizontal?"left":"top")),f.$$.dirty&16&&t(11,s=i>100?"/cards/":"/cards/small/")},[a,p,g,l,i,_,E,v,$,B,P,s,n,r,H,j,o,c,u,y,U,se,fe,ce]}class oe extends re{constructor(e){super(),ne(this,e,dl,hl,ie,{card:0,facedown:1,stack:2,cardIndex:14})}}function pe(f,e,t){const l=f.slice();return l[25]=e[t],l[27]=t,l}function me(f,e,t){const l=f.slice();return l[25]=e[t],l[27]=t,l}function pl(f){let e,t,l;const r=f[13].default,n=ze(r,f,f[21],null);return{c(){e=I("div"),n&&n.c(),this.h()},l(s){e=D(s,"DIV",{class:!0,style:!0});var i=N(e);n&&n.l(i),i.forEach(h),this.h()},h(){w(e,"class",t="relative "+f[4]+" box-content"),R(e,"width",(f[0]==="-"?f[2]/2:f[2])+"px")},m(s,i){b(s,e,i),n&&n.m(e,null),l=!0},p(s,i){n&&n.p&&(!l||i&2097152)&&Ge(n,r,s,s[21],l?Pe(r,s[21],i,null):Te(s[21]),null),(!l||i&16&&t!==(t="relative "+s[4]+" box-content"))&&w(e,"class",t),(!l||i&5)&&R(e,"width",(s[0]==="-"?s[2]/2:s[2])+"px")},i(s){l||(m(n,s),l=!0)},o(s){k(n,s),l=!1},d(s){s&&h(e),n&&n.d(s)}}}function ml(f){let e,t,l,r,n,s=f[0]&&ge(f);return{c(){e=I("div"),t=I("div"),s&&s.c(),this.h()},l(i){e=D(i,"DIV",{class:!0,style:!0});var o=N(e);t=D(o,"DIV",{class:!0,style:!0});var c=N(t);s&&s.l(c),c.forEach(h),o.forEach(h),this.h()},h(){w(t,"class","relative h-full"),R(t,"max-width",f[2]+"px"),w(e,"class","relative justify-center"),R(e,"height",f[7]+"px"),R(e,"width",f[8]+"px"),A(e,"pointer-events-auto",f[0]&&(f[0].length||f[0].isDeck||f[0].conf.showEmpty)),A(e,"p-1",f[2]>100)},m(i,o){b(i,e,o),q(e,t),s&&s.m(t,null),l=!0,r||(n=[Z(e,"dragover",Vl),Z(e,"drop",f[20])],r=!0)},p(i,o){i[0]?s?(s.p(i,o),o&1&&m(s,1)):(s=ge(i),s.c(),m(s,1),s.m(t,null)):s&&(V(),k(s,1,1,()=>{s=null}),S()),(!l||o&4)&&R(t,"max-width",i[2]+"px"),(!l||o&128)&&R(e,"height",i[7]+"px"),(!l||o&256)&&R(e,"width",i[8]+"px"),o&1&&A(e,"pointer-events-auto",i[0]&&(i[0].length||i[0].isDeck||i[0].conf.showEmpty)),o&4&&A(e,"p-1",i[2]>100)},i(i){l||(m(s),l=!0)},o(i){k(s),l=!1},d(i){i&&h(e),s&&s.d(),r=!1,Je(n)}}}function ge(f){let e,t,l,r;const n=[kl,gl],s=[];function i(o,c){return o[0].isDeck?0:1}return e=i(f),t=s[e]=n[e](f),{c(){t.c(),l=C()},l(o){t.l(o),l=C()},m(o,c){s[e].m(o,c),b(o,l,c),r=!0},p(o,c){let _=e;e=i(o),e===_?s[e].p(o,c):(V(),k(s[_],1,1,()=>{s[_]=null}),S(),t=s[e],t?t.p(o,c):(t=s[e]=n[e](o),t.c()),m(t,1),t.m(l.parentNode,l))},i(o){r||(m(t),r=!0)},o(o){k(t),r=!1},d(o){s[e].d(o),o&&h(l)}}}function gl(f){let e=[],t=new Map,l,r,n=f[0].stack;const s=o=>o[25].id;for(let o=0;o<n.length;o+=1){let c=pe(f,n,o),_=s(c);t.set(_,e[o]=ye(_,c))}let i=null;return n.length||(i=ke(f)),{c(){for(let o=0;o<e.length;o+=1)e[o].c();l=C(),i&&i.c()},l(o){for(let c=0;c<e.length;c+=1)e[c].l(o);l=C(),i&&i.l(o)},m(o,c){for(let _=0;_<e.length;_+=1)e[_].m(o,c);b(o,l,c),i&&i.m(o,c),r=!0},p(o,c){c&1605&&(n=o[0].stack,V(),e=Le(e,c,s,1,o,n,t,l.parentNode,Fe,ye,l,pe),S(),!n.length&&i?i.p(o,c):n.length?i&&(V(),k(i,1,1,()=>{i=null}),S()):(i=ke(o),i.c(),m(i,1),i.m(l.parentNode,l)))},i(o){if(!r){for(let c=0;c<n.length;c+=1)m(e[c]);r=!0}},o(o){for(let c=0;c<e.length;c+=1)k(e[c]);r=!1},d(o){for(let c=0;c<e.length;c+=1)e[c].d(o);o&&h(l),i&&i.d(o)}}}function kl(f){let e=[],t=new Map,l,r,n=f[0].stack;const s=o=>o[25].id;for(let o=0;o<n.length;o+=1){let c=me(f,n,o),_=s(c);t.set(_,e[o]=Ne(_,c))}let i=null;return n.length||(i=$e(f)),{c(){for(let o=0;o<e.length;o+=1)e[o].c();l=C(),i&&i.c()},l(o){for(let c=0;c<e.length;c+=1)e[c].l(o);l=C(),i&&i.l(o)},m(o,c){for(let _=0;_<e.length;_+=1)e[_].m(o,c);b(o,l,c),i&&i.m(o,c),r=!0},p(o,c){c&1571&&(n=o[0].stack,V(),e=Le(e,c,s,1,o,n,t,l.parentNode,Fe,Ne,l,me),S(),!n.length&&i?i.p(o,c):n.length?i&&(V(),k(i,1,1,()=>{i=null}),S()):(i=$e(o),i.c(),m(i,1),i.m(l.parentNode,l)))},i(o){if(!r){for(let c=0;c<n.length;c+=1)m(e[c]);r=!0}},o(o){for(let c=0;c<e.length;c+=1)k(e[c]);r=!1},d(o){for(let c=0;c<e.length;c+=1)e[c].d(o);o&&h(l),i&&i.d(o)}}}function ke(f){let e,t,l=f[9].conf.showEmpty&&be(f);return{c(){l&&l.c(),e=C()},l(r){l&&l.l(r),e=C()},m(r,n){l&&l.m(r,n),b(r,e,n),t=!0},p(r,n){r[9].conf.showEmpty?l?(l.p(r,n),n&512&&m(l,1)):(l=be(r),l.c(),m(l,1),l.m(e.parentNode,e)):l&&(V(),k(l,1,1,()=>{l=null}),S())},i(r){t||(m(l),t=!0)},o(r){k(l),t=!1},d(r){l&&l.d(r),r&&h(e)}}}function be(f){let e,t;return e=new oe({props:{$$slots:{default:[bl]},$$scope:{ctx:f}}}),{c(){M(e.$$.fragment)},l(l){z(e.$$.fragment,l)},m(l,r){G(e,l,r),t=!0},p(l,r){const n={};r&2097220&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){k(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}function ve(f){let e,t;return{c(){e=I("div"),t=L("\xA0"),this.h()},l(l){e=D(l,"DIV",{class:!0,style:!0});var r=N(e);t=F(r,"\xA0"),r.forEach(h),this.h()},h(){w(e,"class","absolute w-full top-0 bg-blue-300 opacity-40 rounded-xl -my-2"),R(e,"height",f[2]*1.5+"px")},m(l,r){b(l,e,r),q(e,t)},p(l,r){r&4&&R(e,"height",l[2]*1.5+"px")},d(l){l&&h(e)}}}function bl(f){let e,t=f[6]&&ve(f);return{c(){t&&t.c(),e=Y()},l(l){t&&t.l(l),e=K(l)},m(l,r){t&&t.m(l,r),b(l,e,r)},p(l,r){l[6]?t?t.p(l,r):(t=ve(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){t&&t.d(l),l&&h(e)}}}function we(f){let e,t;return{c(){e=I("div"),t=L("\xA0"),this.h()},l(l){e=D(l,"DIV",{class:!0,style:!0});var r=N(e);t=F(r,"\xA0"),r.forEach(h),this.h()},h(){w(e,"class","absolute w-full top-0 bg-blue-500 opacity-40 rounded-xl -my-2"),R(e,"height",f[2]*1.5+"px")},m(l,r){b(l,e,r),q(e,t)},p(l,r){r&4&&R(e,"height",l[2]*1.5+"px")},d(l){l&&h(e)}}}function vl(f){let e,t=f[6]&&f[27]===f[0].length-1&&we(f);return{c(){t&&t.c(),e=Y()},l(l){t&&t.l(l),e=K(l)},m(l,r){t&&t.m(l,r),b(l,e,r)},p(l,r){l[6]&&l[27]===l[0].length-1?t?t.p(l,r):(t=we(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){t&&t.d(l),l&&h(e)}}}function ye(f,e){let t,l,r;function n(){return e[19](e[25])}return l=new oe({props:{card:e[25],stack:e[0],cardIndex:e[27],$$slots:{default:[vl]},$$scope:{ctx:e}}}),l.$on("click",n),{key:f,first:null,c(){t=C(),M(l.$$.fragment),this.h()},l(s){t=C(),z(l.$$.fragment,s),this.h()},h(){this.first=t},m(s,i){b(s,t,i),G(l,s,i),r=!0},p(s,i){e=s;const o={};i&1&&(o.card=e[25]),i&1&&(o.stack=e[0]),i&1&&(o.cardIndex=e[27]),i&2097221&&(o.$$scope={dirty:i,ctx:e}),l.$set(o)},i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){k(l.$$.fragment,s),r=!1},d(s){s&&h(t),T(l,s)}}}function $e(f){let e,t;return e=new oe({props:{$$slots:{default:[Nl]},$$scope:{ctx:f}}}),e.$on("click",f[18]),{c(){M(e.$$.fragment)},l(l){z(e.$$.fragment,l)},m(l,r){G(e,l,r),t=!0},p(l,r){const n={};r&2097698&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){k(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}function wl(f){let e,t,l,r,n=f[1]&&Ie(f);return l=new ue({props:{icon:Ke,overlay:tl,class:(f[5]?"text-lg":"text-xs")+" "+(f[1]?"":"py-0"),$$slots:{default:[El]},$$scope:{ctx:f}}}),l.$on("click",f[17]),{c(){e=I("div"),n&&n.c(),t=Y(),M(l.$$.fragment),this.h()},l(s){e=D(s,"DIV",{class:!0});var i=N(e);n&&n.l(i),t=K(i),z(l.$$.fragment,i),i.forEach(h),this.h()},h(){w(e,"class","flex flex-col justify-center items-center")},m(s,i){b(s,e,i),n&&n.m(e,null),q(e,t),G(l,e,null),r=!0},p(s,i){s[1]?n?(n.p(s,i),i&2&&m(n,1)):(n=Ie(s),n.c(),m(n,1),n.m(e,t)):n&&(V(),k(n,1,1,()=>{n=null}),S());const o={};i&34&&(o.class=(s[5]?"text-lg":"text-xs")+" "+(s[1]?"":"py-0")),i&2097154&&(o.$$scope={dirty:i,ctx:s}),l.$set(o)},i(s){r||(m(n),m(l.$$.fragment,s),r=!0)},o(s){k(n),k(l.$$.fragment,s),r=!1},d(s){s&&h(e),n&&n.d(),T(l)}}}function yl(f){let e,t,l=typeof f[9].canRecycle=="number"&&Ee(f);return{c(){e=I("div"),t=L(`Cycle
                  `),l&&l.c(),this.h()},l(r){e=D(r,"DIV",{});var n=N(e);t=F(n,`Cycle
                  `),l&&l.l(n),n.forEach(h),this.h()},h(){A(e,"text-gray-600",!f[9].canRecycle)},m(r,n){b(r,e,n),q(e,t),l&&l.m(e,null)},p(r,n){typeof r[9].canRecycle=="number"?l?l.p(r,n):(l=Ee(r),l.c(),l.m(e,null)):l&&(l.d(1),l=null),n&512&&A(e,"text-gray-600",!r[9].canRecycle)},i:Q,o:Q,d(r){r&&h(e),l&&l.d()}}}function Ie(f){let e,t,l,r;return e=new ue({props:{icon:rl,dropdownFrom:"top",href:f[9].href,class:"no-link "+(f[5]?"text-lg":"text-xs")+" "+(f[1]?"":"py-0"),$$slots:{menu:[Il],default:[$l]},$$scope:{ctx:f}}}),e.$on("click",f[15]),l=new ue({props:{icon:Ke,overlay:nl,class:(f[5]?"text-lg":"text-xs")+" "+(f[1]?"":"py-0"),$$slots:{default:[Dl]},$$scope:{ctx:f}}}),l.$on("click",f[16]),{c(){M(e.$$.fragment),t=Y(),M(l.$$.fragment)},l(n){z(e.$$.fragment,n),t=K(n),z(l.$$.fragment,n)},m(n,s){G(e,n,s),b(n,t,s),G(l,n,s),r=!0},p(n,s){const i={};s&512&&(i.href=n[9].href),s&34&&(i.class="no-link "+(n[5]?"text-lg":"text-xs")+" "+(n[1]?"":"py-0")),s&2097152&&(i.$$scope={dirty:s,ctx:n}),e.$set(i);const o={};s&34&&(o.class=(n[5]?"text-lg":"text-xs")+" "+(n[1]?"":"py-0")),s&2097152&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){r||(m(e.$$.fragment,n),m(l.$$.fragment,n),r=!0)},o(n){k(e.$$.fragment,n),k(l.$$.fragment,n),r=!1},d(n){T(e,n),n&&h(t),T(l,n)}}}function $l(f){let e;return{c(){e=L("Share")},l(t){e=F(t,"Share")},m(t,l){b(t,e,l)},d(t){t&&h(e)}}}function Il(f){let e,t,l;return t=new il({}),{c(){e=I("span"),M(t.$$.fragment),this.h()},l(r){e=D(r,"SPAN",{slot:!0});var n=N(e);z(t.$$.fragment,n),n.forEach(h),this.h()},h(){w(e,"slot","menu")},m(r,n){b(r,e,n),G(t,e,null),l=!0},p:Q,i(r){l||(m(t.$$.fragment,r),l=!0)},o(r){k(t.$$.fragment,r),l=!1},d(r){r&&h(e),T(t)}}}function Dl(f){let e;return{c(){e=L("Restart")},l(t){e=F(t,"Restart")},m(t,l){b(t,e,l)},d(t){t&&h(e)}}}function De(f){let e;return{c(){e=L("New")},l(t){e=F(t,"New")},m(t,l){b(t,e,l)},d(t){t&&h(e)}}}function El(f){let e,t=f[1]&&De();return{c(){t&&t.c(),e=C()},l(l){t&&t.l(l),e=C()},m(l,r){t&&t.m(l,r),b(l,e,r)},p(l,r){l[1]?t||(t=De(),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){t&&t.d(l),l&&h(e)}}}function Ee(f){let e,t=f[9].canRecycle+"",l,r;return{c(){e=L("("),l=L(t),r=L(")")},l(n){e=F(n,"("),l=F(n,t),r=F(n,")")},m(n,s){b(n,e,s),b(n,l,s),b(n,r,s)},p(n,s){s&512&&t!==(t=n[9].canRecycle+"")&&Xe(l,t)},d(n){n&&h(e),n&&h(l),n&&h(r)}}}function Nl(f){let e,t,l,r;const n=[yl,wl],s=[];function i(o,c){return o[9].canRecycle?0:1}return e=i(f),t=s[e]=n[e](f),{c(){t.c(),l=Y()},l(o){t.l(o),l=K(o)},m(o,c){s[e].m(o,c),b(o,l,c),r=!0},p(o,c){let _=e;e=i(o),e===_?s[e].p(o,c):(V(),k(s[_],1,1,()=>{s[_]=null}),S(),t=s[e],t?t.p(o,c):(t=s[e]=n[e](o),t.c()),m(t,1),t.m(l.parentNode,l))},i(o){r||(m(t),r=!0)},o(o){k(t),r=!1},d(o){s[e].d(o),o&&h(l)}}}function Ne(f,e){let t,l,r;return l=new oe({props:{card:e[25],stack:e[9].deck,facedown:!0,cardIndex:e[27]}}),l.$on("click",e[14]),{key:f,first:null,c(){t=C(),M(l.$$.fragment),this.h()},l(n){t=C(),z(l.$$.fragment,n),this.h()},h(){this.first=t},m(n,s){b(n,t,s),G(l,n,s),r=!0},p(n,s){e=n;const i={};s&1&&(i.card=e[25]),s&512&&(i.stack=e[9].deck),s&1&&(i.cardIndex=e[27]),l.$set(i)},i(n){r||(m(l.$$.fragment,n),r=!0)},o(n){k(l.$$.fragment,n),r=!1},d(n){n&&h(t),T(l,n)}}}function Cl(f){let e,t,l,r;const n=[ml,pl],s=[];function i(o,c){return o[9]&&typeof o[0]!="string"?0:1}return e=i(f),t=s[e]=n[e](f),{c(){t.c(),l=C()},l(o){t.l(o),l=C()},m(o,c){s[e].m(o,c),b(o,l,c),r=!0},p(o,[c]){let _=e;e=i(o),e===_?s[e].p(o,c):(V(),k(s[_],1,1,()=>{s[_]=null}),S(),t=s[e],t?t.p(o,c):(t=s[e]=n[e](o),t.c()),m(t,1),t.m(l.parentNode,l))},i(o){r||(m(t),r=!0)},o(o){k(t),r=!1},d(o){s[e].d(o),o&&h(l)}}}const Vl=f=>{f.preventDefault()};function Sl(f,e,t){let l,r,n,s,i,o,c,_;W(f,le,d=>t(2,s=d)),W(f,ae,d=>t(3,i=d)),W(f,J,d=>t(9,o=d)),W(f,he,d=>t(23,c=d)),W(f,Ye,d=>t(24,_=d));let{$$slots:y={},$$scope:u}=e,{stack:a}=e,p="",g=0,H=0;typeof a=="string"?(a==="-"&&(p="flex-shrink"),a==="_"&&(p="flex-grow")):a&&!a.isDeck&&(a.conf.horizontal?H=a.maxWidth*_:g=a.maxHeight*c);function j(d,O){!d||typeof d=="string"||(O?o==null||o.clickCard(O,d):o==null||o.deal(),J.set(o))}let E,v;const $=()=>j(a),B=d=>{d.preventDefault(),navigator.clipboard.writeText(new URL(o.href,window.location.href).toString())},P=()=>{o.reset(),J.set(o)},U=()=>{o.new(),J.set(o)},se=()=>j(a),fe=d=>j(a,d),ce=d=>{d.preventDefault(),a.wants(i.cards)&&(console.log("dropped!"),o.do(new ol("move",new sl(i.cardDepth,i.fromStack,a.index))))};return f.$$set=d=>{"stack"in d&&t(0,a=d.stack),"$$scope"in d&&t(21,u=d.$$scope)},f.$$.update=()=>{f.$$.dirty&4100&&t(8,l=s+H),f.$$.dirty&2052&&t(7,r=s*1.5+g),f.$$.dirty&9&&t(6,n=a&&typeof a!="string"&&(i==null?void 0:i.cards)&&a.wants(i.cards)),f.$$.dirty&4&&t(1,E=s>95),f.$$.dirty&4&&t(5,v=s>150),f.$$.dirty&2},[a,E,s,i,p,v,n,r,l,o,j,g,H,y,$,B,P,U,se,fe,ce,u]}class Qe extends re{constructor(e){super(),ne(this,e,Sl,Cl,ie,{stack:0})}}function Ce(f,e,t){const l=f.slice();return l[9]=e[t],l}function Ve(f,e,t){const l=f.slice();return l[12]=e[t],l}function Se(f,e,t){const l=f.slice();return l[9]=e[t],l[16]=t,l}function Re(f,e,t){const l=f.slice();return l[12]=e[t],l}function He(f){let e,t,l,r=f[2].layout,n=[];for(let u=0;u<r.length;u+=1)n[u]=Be(Se(f,r,u));const s=u=>k(n[u],1,1,()=>{n[u]=null});let i=null;r.length||(i=je());let o=f[2].footer,c=[];for(let u=0;u<o.length;u+=1)c[u]=Me(Ce(f,o,u));const _=u=>k(c[u],1,1,()=>{c[u]=null});let y=null;return o.length||(y=Ae()),{c(){for(let u=0;u<n.length;u+=1)n[u].c();i&&i.c(),e=Y();for(let u=0;u<c.length;u+=1)c[u].c();t=C(),y&&y.c()},l(u){for(let a=0;a<n.length;a+=1)n[a].l(u);i&&i.l(u),e=K(u);for(let a=0;a<c.length;a+=1)c[a].l(u);t=C(),y&&y.l(u)},m(u,a){for(let p=0;p<n.length;p+=1)n[p].m(u,a);i&&i.m(u,a),b(u,e,a);for(let p=0;p<c.length;p+=1)c[p].m(u,a);b(u,t,a),y&&y.m(u,a),l=!0},p(u,a){if(a&28){r=u[2].layout;let p;for(p=0;p<r.length;p+=1){const g=Se(u,r,p);n[p]?(n[p].p(g,a),m(n[p],1)):(n[p]=Be(g),n[p].c(),m(n[p],1),n[p].m(e.parentNode,e))}for(V(),p=r.length;p<n.length;p+=1)s(p);S(),!r.length&&i?i.p(u,a):r.length?i&&(i.d(1),i=null):(i=je(),i.c(),i.m(e.parentNode,e))}if(a&12){o=u[2].footer;let p;for(p=0;p<o.length;p+=1){const g=Ce(u,o,p);c[p]?(c[p].p(g,a),m(c[p],1)):(c[p]=Me(g),c[p].c(),m(c[p],1),c[p].m(t.parentNode,t))}for(V(),p=o.length;p<c.length;p+=1)_(p);S(),!o.length&&y?y.p(u,a):o.length?y&&(y.d(1),y=null):(y=Ae(),y.c(),y.m(t.parentNode,t))}},i(u){if(!l){for(let a=0;a<r.length;a+=1)m(n[a]);for(let a=0;a<o.length;a+=1)m(c[a]);l=!0}},o(u){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)k(n[a]);c=c.filter(Boolean);for(let a=0;a<c.length;a+=1)k(c[a]);l=!1},d(u){ee(n,u),i&&i.d(u),u&&h(e),ee(c,u),u&&h(t),y&&y.d(u)}}}function je(f){let e;return{c(){e=I("div"),this.h()},l(t){e=D(t,"DIV",{class:!0}),N(e).forEach(h),this.h()},h(){w(e,"class","w-full relative md:p-4 pointer-events-none")},m(t,l){b(t,e,l)},p:Q,d(t){t&&h(e)}}}function We(f){let e,t;return e=new Qe({props:{stack:f[12]}}),{c(){M(e.$$.fragment)},l(l){z(e.$$.fragment,l)},m(l,r){G(e,l,r),t=!0},p(l,r){const n={};r&4&&(n.stack=l[12]),e.$set(n)},i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){k(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}function Be(f){let e,t,l=f[9].stacks,r=[];for(let s=0;s<l.length;s+=1)r[s]=We(Re(f,l,s));const n=s=>k(r[s],1,1,()=>{r[s]=null});return{c(){e=I("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=D(s,"DIV",{class:!0,style:!0});var i=N(e);for(let o=0;o<r.length;o+=1)r[o].l(i);i.forEach(h),this.h()},h(){w(e,"class","flex flex-row w-full relative md:p-4 pointer-events-none select-none"),R(e,"height",(f[2].conf.overlayRows&&f[16]!==f[2].layout.length-1?f[3]*.4:f[3]+f[9].maxHeight*f[4]+f[4])+"px"),A(e,"justify-center",f[2].conf.centerRows)},m(s,i){b(s,e,i);for(let o=0;o<r.length;o+=1)r[o].m(e,null);t=!0},p(s,i){if(i&4){l=s[9].stacks;let o;for(o=0;o<l.length;o+=1){const c=Re(s,l,o);r[o]?(r[o].p(c,i),m(r[o],1)):(r[o]=We(c),r[o].c(),m(r[o],1),r[o].m(e,null))}for(V(),o=l.length;o<r.length;o+=1)n(o);S()}(!t||i&28)&&R(e,"height",(s[2].conf.overlayRows&&s[16]!==s[2].layout.length-1?s[3]*.4:s[3]+s[9].maxHeight*s[4]+s[4])+"px"),i&4&&A(e,"justify-center",s[2].conf.centerRows)},i(s){if(!t){for(let i=0;i<l.length;i+=1)m(r[i]);t=!0}},o(s){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)k(r[i]);t=!1},d(s){s&&h(e),ee(r,s)}}}function Ae(f){let e;return{c(){e=I("div"),this.h()},l(t){e=D(t,"DIV",{class:!0}),N(e).forEach(h),this.h()},h(){w(e,"class","w-full relative md:p-4 pointer-events-none")},m(t,l){b(t,e,l)},p:Q,d(t){t&&h(e)}}}function qe(f){let e,t;return e=new Qe({props:{stack:f[12]}}),{c(){M(e.$$.fragment)},l(l){z(e.$$.fragment,l)},m(l,r){G(e,l,r),t=!0},p(l,r){const n={};r&4&&(n.stack=l[12]),e.$set(n)},i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){k(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}function Me(f){let e,t,l,r=f[9].stacks,n=[];for(let i=0;i<r.length;i+=1)n[i]=qe(Ve(f,r,i));const s=i=>k(n[i],1,1,()=>{n[i]=null});return{c(){e=I("div");for(let i=0;i<n.length;i+=1)n[i].c();t=Y(),this.h()},l(i){e=D(i,"DIV",{class:!0,style:!0});var o=N(e);for(let c=0;c<n.length;c+=1)n[c].l(o);t=K(o),o.forEach(h),this.h()},h(){w(e,"class","flex flex-row w-full relative md:p-4 pointer-events-none"),R(e,"height",f[3]+"px"),A(e,"justify-center",f[2].conf.centerRows)},m(i,o){b(i,e,o);for(let c=0;c<n.length;c+=1)n[c].m(e,null);q(e,t),l=!0},p(i,o){if(o&4){r=i[9].stacks;let c;for(c=0;c<r.length;c+=1){const _=Ve(i,r,c);n[c]?(n[c].p(_,o),m(n[c],1)):(n[c]=qe(_),n[c].c(),m(n[c],1),n[c].m(e,t))}for(V(),c=r.length;c<n.length;c+=1)s(c);S()}(!l||o&8)&&R(e,"height",i[3]+"px"),o&4&&A(e,"justify-center",i[2].conf.centerRows)},i(i){if(!l){for(let o=0;o<r.length;o+=1)m(n[o]);l=!0}},o(i){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)k(n[o]);l=!1},d(i){i&&h(e),ee(n,i)}}}function Rl(f){let e,t,l,r=f[2]&&He(f);return{c(){e=I("div"),r&&r.c(),this.h()},l(n){e=D(n,"DIV",{id:!0,class:!0});var s=N(e);r&&r.l(s),s.forEach(h),this.h()},h(){w(e,"id","game"),w(e,"class","flex flex-col text-white h-full"),_e(()=>f[8].call(e))},m(n,s){b(n,e,s),r&&r.m(e,null),t=Oe(e,f[8].bind(e)),l=!0},p(n,[s]){n[2]?r?(r.p(n,s),s&4&&m(r,1)):(r=He(n),r.c(),m(r,1),r.m(e,null)):r&&(V(),k(r,1,1,()=>{r=null}),S())},i(n){l||(m(r),l=!0)},o(n){k(r),l=!1},d(n){n&&h(e),r&&r.d(),t()}}}function Hl(f,e,t){let l,r,n,s,i,o;W(f,le,u=>t(7,s=u)),W(f,J,u=>t(2,i=u)),W(f,he,u=>t(4,o=u));let c=0,_=0;function y(){c=this.clientWidth,_=this.clientHeight,t(0,c),t(1,_)}return f.$$.update=()=>{var u,a,p,g,H;f.$$.dirty&4&&t(5,l=((u=i==null?void 0:i.layout)==null?void 0:u.length)+((a=i==null?void 0:i.footer)==null?void 0:a.length)),f.$$.dirty&4&&t(6,r=(p=i==null?void 0:i.layout)==null?void 0:p.reduce((j,E)=>j+=E.maxHeight-1,0)),f.$$.dirty&103&&le.set(Math.min(c/(i==null?void 0:i.longestRow)-5,(-.018*_*r+_*.55)/(l*((g=i==null?void 0:i.conf)!=null&&g.overlayRows?((H=i==null?void 0:i.layout)==null?void 0:H.length)*.1:1)))),f.$$.dirty&128&&t(3,n=s*1.5)},[c,_,i,n,o,l,r,s,y]}class jl extends re{constructor(e){super(),ne(this,e,Hl,Rl,ie,{})}}function Wl(f){var s;let e,t,l,r,n;return document.title=e=((s=f[0])==null?void 0:s.title)+" | Solitaire Table",r=new jl({}),{c(){t=Y(),l=I("div"),M(r.$$.fragment),this.h()},l(i){Ze('[data-svelte="svelte-18ey8t2"]',document.head).forEach(h),t=K(i),l=D(i,"DIV",{class:!0});var c=N(l);z(r.$$.fragment,c),c.forEach(h),this.h()},h(){w(l,"class","w-full h-full bg-green-800 overflow-x-auto pt-4 md:pt-8")},m(i,o){b(i,t,o),b(i,l,o),G(r,l,null),n=!0},p(i,[o]){var c;(!n||o&1)&&e!==(e=((c=i[0])==null?void 0:c.title)+" | Solitaire Table")&&(document.title=e)},i(i){n||(m(r.$$.fragment,i),n=!0)},o(i){k(r.$$.fragment,i),n=!1},d(i){i&&h(t),i&&h(l),T(r)}}}function Bl(f,e,t){let l,r;return W(f,ll,n=>t(1,l=n)),W(f,J,n=>t(0,r=n)),xe(n=>{J.set(void 0)}),el(n=>{let s=l.url.searchParams.get("g");s||(s="klondike-vegas");let i=l.url.searchParams.get("d")||void 0;J.set(new fl(s,i))}),[r]}class Jl extends re{constructor(e){super(),ne(this,e,Bl,Wl,ie,{})}}export{Jl as default};
