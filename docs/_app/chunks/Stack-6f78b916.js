import{V as t,S as e,i as n,s,K as l,e as c,k as a,c as r,a as o,n as i,d,b as u,R as f,f as p,D as h,E as $,r as g,u as m,w as v,x,L as y,M as b,N as k,W as w,J as D,X as I,P as E,F as V,l as N,T as _,Y as j,Q as R,j as S,m as M,o as G,v as C,Z as z,t as A,g as J,h as B,_ as W}from"./vendor-706b4b12.js";import{e as Y,a as F,g as H,d as K,m as L,G as P}from"./GameControls-c9acd653.js";import{A as Q,a as T}from"./Game-f1a072f2.js";const X={subscribe:e=>(()=>{const e=t("__svelte__");return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:e.navigating.subscribe}},session:e.session}})().page.subscribe(e)};function Z(t){let e,n,s;return{c(){e=c("div"),n=c("img"),this.h()},l(t){e=r(t,"DIV",{});var s=o(e);n=r(s,"IMG",{draggable:!0,class:!0,src:!0,alt:!0}),s.forEach(d),this.h()},h(){u(n,"draggable","false"),u(n,"class","w-full"),E(n.src,s="/cards/_empty.svg")||u(n,"src","/cards/_empty.svg"),u(n,"alt","-")},m(t,s){p(t,e,s),h(e,n)},p:V,i:V,o:V,d(t){t&&d(e)}}}function q(t){let e,n,s,l;const c=[U,O],a=[];function r(t,e){return t[1]||t[0].facedown?0:1}return e=r(t),n=a[e]=c[e](t),{c(){n.c(),s=N()},l(t){n.l(t),s=N()},m(t,n){a[e].m(t,n),p(t,s,n),l=!0},p(t,l){let o=e;e=r(t),e===o?a[e].p(t,l):(g(),m(a[o],1,1,(()=>{a[o]=null})),v(),n=a[e],n?n.p(t,l):(n=a[e]=c[e](t),n.c()),x(n,1),n.m(s.parentNode,s))},i(t){l||(x(n),l=!0)},o(t){m(n),l=!1},d(t){a[e].d(t),t&&d(s)}}}function O(t){let e,n,s,l,a;return{c(){e=c("div"),n=c("img"),this.h()},l(t){e=r(t,"DIV",{});var s=o(e);n=r(s,"IMG",{draggable:!0,class:!0,src:!0,alt:!0}),s.forEach(d),this.h()},h(){u(n,"draggable",t[10]),u(n,"class","w-full"),E(n.src,s="/cards/"+t[8]+".svg")||u(n,"src",s),u(n,"alt",t[9])},m(t,s){p(t,e,s),h(e,n),a=!0},p(t,e){(!a||1024&e)&&u(n,"draggable",t[10]),(!a||256&e&&!E(n.src,s="/cards/"+t[8]+".svg"))&&u(n,"src",s),(!a||512&e)&&u(n,"alt",t[9])},i(t){a||(_((()=>{l||(l=j(e,et,{},!0)),l.run(1)})),a=!0)},o(t){l||(l=j(e,et,{},!1)),l.run(0),a=!1},d(t){t&&d(e),t&&l&&l.end()}}}function U(t){let e,n,s,l,a;return{c(){e=c("div"),n=c("img"),this.h()},l(t){e=r(t,"DIV",{});var s=o(e);n=r(s,"IMG",{draggable:!0,class:!0,src:!0,alt:!0}),s.forEach(d),this.h()},h(){u(n,"draggable","false"),u(n,"class","w-full"),E(n.src,s="/cards/_back.svg")||u(n,"src","/cards/_back.svg"),u(n,"alt","?")},m(t,s){p(t,e,s),h(e,n),a=!0},p:V,i(t){a||(_((()=>{l||(l=j(e,et,{},!0)),l.run(1)})),a=!0)},o(t){l||(l=j(e,et,{},!1)),l.run(0),a=!1},d(t){t&&d(e),t&&l&&l.end()}}}function tt(t){let e,n,s,D,I,E,V,N,_,j,R;const S=[q,Z],M=[];function G(t,e){return t[0]?0:1}s=G(t),D=M[s]=S[s](t);const C=t[17].default,z=l(C,t,t[16],null);return{c(){e=c("div"),n=c("div"),D.c(),I=a(),E=c("div"),z&&z.c(),this.h()},l(t){e=r(t,"DIV",{class:!0,style:!0});var s=o(e);n=r(s,"DIV",{class:!0});var l=o(n);D.l(l),I=i(l),E=r(l,"DIV",{class:!0});var c=o(E);z&&z.l(c),c.forEach(d),l.forEach(d),s.forEach(d),this.h()},h(){u(E,"class","absolute w-full text-center top-2"),u(n,"class","cursor-pointer"),u(e,"class",V="card container "+t[7]+" rounded-xl absolute svelte-oigr2j"),u(e,"style",N=t[5]+":"+t[6]+"px"),f(e,"selected",t[4].selection.filter(t[21]).length)},m(l,c){p(l,e,c),h(e,n),M[s].m(n,null),h(n,I),h(n,E),z&&z.m(E,null),_=!0,j||(R=[$(e,"dragstart",t[19]),$(e,"dragend",t[20]),$(e,"click",t[18])],j=!0)},p(t,[l]){let c=s;s=G(t),s===c?M[s].p(t,l):(g(),m(M[c],1,1,(()=>{M[c]=null})),v(),D=M[s],D?D.p(t,l):(D=M[s]=S[s](t),D.c()),x(D,1),D.m(n,I)),z&&z.p&&(!_||65536&l)&&y(z,C,t,t[16],_?k(C,t[16],l,null):b(t[16]),null),(!_||128&l&&V!==(V="card container "+t[7]+" rounded-xl absolute svelte-oigr2j"))&&u(e,"class",V),(!_||96&l&&N!==(N=t[5]+":"+t[6]+"px"))&&u(e,"style",N),145&l&&f(e,"selected",t[4].selection.filter(t[21]).length)},i(t){_||(x(D),x(z,t),_=!0)},o(t){m(D),m(z,t),_=!1},d(t){t&&d(e),M[s].d(),z&&z.d(t),j=!1,w(R)}}}function et(t,{delay:e=0,duration:n=80}){return{delay:e,duration:n,css:(t,e)=>`\n\t\t\t\ttransform: rotateY(${1-180*e}deg);\n\t\t\t\topacity: ${1-e};\n        ${e?"position:absolute;":"position:static"}\n\t\t\t`}}function nt(t,e,n){let s,l,c,a,r,o;D(t,Y,(t=>n(14,a=t))),D(t,F,(t=>n(15,r=t))),D(t,H,(t=>n(4,o=t)));let i,d,u,f,p,h,{$$slots:$={},$$scope:g}=e,{card:m}=e,{facedown:v=!1}=e,{stack:x}=e,{cardIndex:y=0}=e;m&&(f=["hearts","diamonds"].includes(m.suitName)?"text-red-600":"text-black",p=m.isJoker?"_joker":`${m.rank}_${m.suitName}`,h=m.isJoker?"joker":`${m.rank}${m.suit}`);return t.$$set=t=>{"card"in t&&n(0,m=t.card),"facedown"in t&&n(1,v=t.facedown),"stack"in t&&n(2,x=t.stack),"cardIndex"in t&&n(12,y=t.cardIndex),"$$scope"in t&&n(16,g=t.$$scope)},t.$$.update=()=>{4100&t.$$.dirty&&n(3,s=null==x?void 0:x.getCardDepth(y)),12&t.$$.dirty&&n(11,l=s?x.look(s):[]),31&t.$$.dirty&&n(10,c=!v&&!o.conf.multiSelect&&s&&!m.facedown&&(o.conf.selectBlockedStacks||!x.isBlocked)&&(!x.conf.limitAvailable||s<=x.conf.limitAvailable)),61444&t.$$.dirty&&x&&(n(13,i=Math.max(y-x.firstVisible,0)),n(6,u=(null==x?void 0:x.isDeck)?0:i*(x.conf.horizontal?r:a)),n(5,d=x.conf.horizontal?"left":"top"))},[m,v,x,s,o,d,u,f,p,h,c,l,y,i,a,r,g,$,function(e){I.call(this,t,e)},t=>{K.set({cards:l,cardDepth:s,fromStack:x.index}),o.clearSelected(),o.setSelected(l,x)},t=>{K.set({}),o.clearSelected(),H.set(o)},t=>(null==t?void 0:t.id)===(null==m?void 0:m.id)]}class st extends e{constructor(t){super(),n(this,t,nt,tt,s,{card:0,facedown:1,stack:2,cardIndex:12})}}function lt(t,e,n){const s=t.slice();return s[19]=e[n],s[21]=n,s}function ct(t,e,n){const s=t.slice();return s[19]=e[n],s[21]=n,s}function at(t){let e,n,s;const a=t[11].default,i=l(a,t,t[16],null);return{c(){e=c("div"),i&&i.c(),this.h()},l(t){e=r(t,"DIV",{class:!0,style:!0});var n=o(e);i&&i.l(n),n.forEach(d),this.h()},h(){u(e,"class",n="relative "+t[3]+" box-content"),R(e,"width",("-"===t[0]?t[2]/2:t[2])+"px")},m(t,n){p(t,e,n),i&&i.m(e,null),s=!0},p(t,l){i&&i.p&&(!s||65536&l)&&y(i,a,t,t[16],s?k(a,t[16],l,null):b(t[16]),null),(!s||8&l&&n!==(n="relative "+t[3]+" box-content"))&&u(e,"class",n),(!s||5&l)&&R(e,"width",("-"===t[0]?t[2]/2:t[2])+"px")},i(t){s||(x(i,t),s=!0)},o(t){m(i,t),s=!1},d(t){t&&d(e),i&&i.d(t)}}}function rt(t){let e,n,s,l,a,i=t[0]&&ot(t);return{c(){e=c("div"),n=c("div"),i&&i.c(),this.h()},l(t){e=r(t,"DIV",{class:!0,style:!0});var s=o(e);n=r(s,"DIV",{class:!0,style:!0});var l=o(n);i&&i.l(l),l.forEach(d),s.forEach(d),this.h()},h(){u(n,"class","relative h-full"),R(n,"max-width",t[2]+"px"),u(e,"class","relative justify-center box-content"),R(e,"height",t[5]+"px"),R(e,"width",t[6]+"px"),f(e,"pointer-events-auto",t[0]&&(t[0].length||t[0].isDeck||t[0].conf.showEmpty)),f(e,"p-1",t[2]>100)},m(c,r){p(c,e,r),h(e,n),i&&i.m(n,null),s=!0,l||(a=[$(e,"dragover",Dt),$(e,"drop",t[15])],l=!0)},p(t,l){t[0]?i?(i.p(t,l),1&l&&x(i,1)):(i=ot(t),i.c(),x(i,1),i.m(n,null)):i&&(g(),m(i,1,1,(()=>{i=null})),v()),(!s||4&l)&&R(n,"max-width",t[2]+"px"),(!s||32&l)&&R(e,"height",t[5]+"px"),(!s||64&l)&&R(e,"width",t[6]+"px"),1&l&&f(e,"pointer-events-auto",t[0]&&(t[0].length||t[0].isDeck||t[0].conf.showEmpty)),4&l&&f(e,"p-1",t[2]>100)},i(t){s||(x(i),s=!0)},o(t){m(i),s=!1},d(t){t&&d(e),i&&i.d(),l=!1,w(a)}}}function ot(t){let e,n,s,l;const c=[dt,it],a=[];function r(t,e){return t[0].isDeck?0:1}return e=r(t),n=a[e]=c[e](t),{c(){n.c(),s=N()},l(t){n.l(t),s=N()},m(t,n){a[e].m(t,n),p(t,s,n),l=!0},p(t,l){let o=e;e=r(t),e===o?a[e].p(t,l):(g(),m(a[o],1,1,(()=>{a[o]=null})),v(),n=a[e],n?n.p(t,l):(n=a[e]=c[e](t),n.c()),x(n,1),n.m(s.parentNode,s))},i(t){l||(x(n),l=!0)},o(t){m(n),l=!1},d(t){a[e].d(t),t&&d(s)}}}function it(t){let e,n,s=[],l=new Map,c=t[0].stack;const a=t=>t[19].id;for(let o=0;o<c.length;o+=1){let e=lt(t,c,o),n=a(e);l.set(n,s[o]=mt(n,e))}let r=null;return c.length||(r=ut(t)),{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=N(),r&&r.c()},l(t){for(let e=0;e<s.length;e+=1)s[e].l(t);e=N(),r&&r.l(t)},m(t,l){for(let e=0;e<s.length;e+=1)s[e].m(t,l);p(t,e,l),r&&r.m(t,l),n=!0},p(t,n){405&n&&(c=t[0].stack,g(),s=z(s,n,a,1,t,c,l,e.parentNode,W,mt,e,lt),v(),!c.length&&r?r.p(t,n):c.length?r&&(g(),m(r,1,1,(()=>{r=null})),v()):(r=ut(t),r.c(),x(r,1),r.m(e.parentNode,e)))},i(t){if(!n){for(let t=0;t<c.length;t+=1)x(s[t]);n=!0}},o(t){for(let e=0;e<s.length;e+=1)m(s[e]);n=!1},d(t){for(let e=0;e<s.length;e+=1)s[e].d(t);t&&d(e),r&&r.d(t)}}}function dt(t){let e,n,s=[],l=new Map,c=t[0].stack;const a=t=>t[19].id;for(let o=0;o<c.length;o+=1){let e=ct(t,c,o),n=a(e);l.set(n,s[o]=kt(n,e))}let r=null;return c.length||(r=vt(t)),{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=N(),r&&r.c()},l(t){for(let e=0;e<s.length;e+=1)s[e].l(t);e=N(),r&&r.l(t)},m(t,l){for(let e=0;e<s.length;e+=1)s[e].m(t,l);p(t,e,l),r&&r.m(t,l),n=!0},p(t,n){385&n&&(c=t[0].stack,g(),s=z(s,n,a,1,t,c,l,e.parentNode,W,kt,e,ct),v(),!c.length&&r?r.p(t,n):c.length?r&&(g(),m(r,1,1,(()=>{r=null})),v()):(r=vt(t),r.c(),x(r,1),r.m(e.parentNode,e)))},i(t){if(!n){for(let t=0;t<c.length;t+=1)x(s[t]);n=!0}},o(t){for(let e=0;e<s.length;e+=1)m(s[e]);n=!1},d(t){for(let e=0;e<s.length;e+=1)s[e].d(t);t&&d(e),r&&r.d(t)}}}function ut(t){let e,n,s=t[7].conf.showEmpty&&ft(t);return{c(){s&&s.c(),e=N()},l(t){s&&s.l(t),e=N()},m(t,l){s&&s.m(t,l),p(t,e,l),n=!0},p(t,n){t[7].conf.showEmpty?s?(s.p(t,n),128&n&&x(s,1)):(s=ft(t),s.c(),x(s,1),s.m(e.parentNode,e)):s&&(g(),m(s,1,1,(()=>{s=null})),v())},i(t){n||(x(s),n=!0)},o(t){m(s),n=!1},d(t){s&&s.d(t),t&&d(e)}}}function ft(t){let e,n;return e=new st({props:{$$slots:{default:[ht]},$$scope:{ctx:t}}}),{c(){S(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,s){G(e,t,s),n=!0},p(t,n){const s={};65556&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(x(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function pt(t){let e,n;return{c(){e=c("div"),n=A(" "),this.h()},l(t){e=r(t,"DIV",{class:!0,style:!0});var s=o(e);n=J(s," "),s.forEach(d),this.h()},h(){u(e,"class","absolute w-full top-0 bg-blue-300 opacity-40 rounded-xl -my-2"),R(e,"height",1.5*t[2]+"px")},m(t,s){p(t,e,s),h(e,n)},p(t,n){4&n&&R(e,"height",1.5*t[2]+"px")},d(t){t&&d(e)}}}function ht(t){let e,n=t[4]&&pt(t);return{c(){n&&n.c(),e=a()},l(t){n&&n.l(t),e=i(t)},m(t,s){n&&n.m(t,s),p(t,e,s)},p(t,s){t[4]?n?n.p(t,s):(n=pt(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&d(e)}}}function $t(t){let e,n;return{c(){e=c("div"),n=A(" "),this.h()},l(t){e=r(t,"DIV",{class:!0,style:!0});var s=o(e);n=J(s," "),s.forEach(d),this.h()},h(){u(e,"class","absolute w-full top-0 bg-blue-500 opacity-40 rounded-xl -my-2"),R(e,"height",1.5*t[2]+"px")},m(t,s){p(t,e,s),h(e,n)},p(t,n){4&n&&R(e,"height",1.5*t[2]+"px")},d(t){t&&d(e)}}}function gt(t){let e,n=t[4]&&t[21]===t[0].length-1&&$t(t);return{c(){n&&n.c(),e=a()},l(t){n&&n.l(t),e=i(t)},m(t,s){n&&n.m(t,s),p(t,e,s)},p(t,s){t[4]&&t[21]===t[0].length-1?n?n.p(t,s):(n=$t(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&d(e)}}}function mt(t,e){let n,s,l;return s=new st({props:{card:e[19],stack:e[0],cardIndex:e[21],$$slots:{default:[gt]},$$scope:{ctx:e}}}),s.$on("click",(function(){return e[14](e[19])})),{key:t,first:null,c(){n=N(),S(s.$$.fragment),this.h()},l(t){n=N(),M(s.$$.fragment,t),this.h()},h(){this.first=n},m(t,e){p(t,n,e),G(s,t,e),l=!0},p(t,n){e=t;const l={};1&n&&(l.card=e[19]),1&n&&(l.stack=e[0]),1&n&&(l.cardIndex=e[21]),65557&n&&(l.$$scope={dirty:n,ctx:e}),s.$set(l)},i(t){l||(x(s.$$.fragment,t),l=!0)},o(t){m(s.$$.fragment,t),l=!1},d(t){t&&d(n),C(s,t)}}}function vt(t){let e,n;return e=new st({props:{$$slots:{default:[bt]},$$scope:{ctx:t}}}),e.$on("click",t[13]),{c(){S(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,s){G(e,t,s),n=!0},p(t,n){const s={};65664&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(x(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function xt(t){let e,n,s,l=t[7].canRecycle+"";return{c(){e=A("("),n=A(l),s=A(")")},l(t){e=J(t,"("),n=J(t,l),s=J(t,")")},m(t,l){p(t,e,l),p(t,n,l),p(t,s,l)},p(t,e){128&e&&l!==(l=t[7].canRecycle+"")&&B(n,l)},d(t){t&&d(e),t&&d(n),t&&d(s)}}}function yt(t){let e,n,s;return n=new P({props:{buttons:"new,restart"}}),{c(){e=c("div"),S(n.$$.fragment)},l(t){e=r(t,"DIV",{});var s=o(e);M(n.$$.fragment,s),s.forEach(d)},m(t,l){p(t,e,l),G(n,e,null),s=!0},i(t){s||(x(n.$$.fragment,t),s=!0)},o(t){m(n.$$.fragment,t),s=!1},d(t){t&&d(e),C(n)}}}function bt(t){let e,n,s,l,u,$="number"==typeof t[7].canRecycle&&xt(t),y=!t[7].canRecycle&&yt();return{c(){e=c("div"),n=A("Cycle\n                "),$&&$.c(),s=a(),y&&y.c(),l=a(),this.h()},l(t){e=r(t,"DIV",{});var c=o(e);n=J(c,"Cycle\n                "),$&&$.l(c),c.forEach(d),s=i(t),y&&y.l(t),l=i(t),this.h()},h(){f(e,"text-gray-600",!t[7].canRecycle)},m(t,c){p(t,e,c),h(e,n),$&&$.m(e,null),p(t,s,c),y&&y.m(t,c),p(t,l,c),u=!0},p(t,n){"number"==typeof t[7].canRecycle?$?$.p(t,n):($=xt(t),$.c(),$.m(e,null)):$&&($.d(1),$=null),128&n&&f(e,"text-gray-600",!t[7].canRecycle),t[7].canRecycle?y&&(g(),m(y,1,1,(()=>{y=null})),v()):y?128&n&&x(y,1):(y=yt(),y.c(),x(y,1),y.m(l.parentNode,l))},i(t){u||(x(y),u=!0)},o(t){m(y),u=!1},d(t){t&&d(e),$&&$.d(),t&&d(s),y&&y.d(t),t&&d(l)}}}function kt(t,e){let n,s,l;return s=new st({props:{card:e[19],stack:e[7].deck,facedown:!0,cardIndex:e[21]}}),s.$on("click",e[12]),{key:t,first:null,c(){n=N(),S(s.$$.fragment),this.h()},l(t){n=N(),M(s.$$.fragment,t),this.h()},h(){this.first=n},m(t,e){p(t,n,e),G(s,t,e),l=!0},p(t,n){e=t;const l={};1&n&&(l.card=e[19]),128&n&&(l.stack=e[7].deck),1&n&&(l.cardIndex=e[21]),s.$set(l)},i(t){l||(x(s.$$.fragment,t),l=!0)},o(t){m(s.$$.fragment,t),l=!1},d(t){t&&d(n),C(s,t)}}}function wt(t){let e,n,s,l;const c=[rt,at],a=[];function r(t,e){return"string"!=typeof t[0]?0:1}return e=r(t),n=a[e]=c[e](t),{c(){n.c(),s=N()},l(t){n.l(t),s=N()},m(t,n){a[e].m(t,n),p(t,s,n),l=!0},p(t,[l]){let o=e;e=r(t),e===o?a[e].p(t,l):(g(),m(a[o],1,1,(()=>{a[o]=null})),v(),n=a[e],n?n.p(t,l):(n=a[e]=c[e](t),n.c()),x(n,1),n.m(s.parentNode,s))},i(t){l||(x(n),l=!0)},o(t){m(n),l=!1},d(t){a[e].d(t),t&&d(s)}}}const Dt=t=>{t.preventDefault()};function It(t,e,n){let s,l,c,a,r,o,i,d;D(t,K,(t=>n(1,a=t))),D(t,H,(t=>n(7,r=t))),D(t,L,(t=>n(2,o=t))),D(t,Y,(t=>n(17,i=t))),D(t,F,(t=>n(18,d=t)));let{$$slots:u={},$$scope:f}=e,{stack:p}=e,h="",$=0,g=0;function m(t,e){"string"!=typeof t&&(e?r.clickCard(e,t):r.deal(),H.set(r))}"string"==typeof p?("-"===p&&(h="flex-shrink"),"_"===p&&(h="flex-grow")):p&&!p.isDeck&&(p.conf.horizontal?g=p.maxWidth*d:$=p.maxHeight*i);return t.$$set=t=>{"stack"in t&&n(0,p=t.stack),"$$scope"in t&&n(16,f=t.$$scope)},t.$$.update=()=>{1028&t.$$.dirty&&n(6,s=o+g),516&t.$$.dirty&&n(5,l=1.5*o+$),3&t.$$.dirty&&n(4,c=p&&"string"!=typeof p&&(null==a?void 0:a.cards)&&p.wants(a.cards))},[p,a,o,h,c,l,s,r,m,$,g,u,()=>m(p),()=>m(p),t=>m(p,t),t=>{t.preventDefault(),p.wants(a.cards)&&(console.log("dropped!"),r.do(new Q("move",new T(a.cardDepth,a.fromStack,p.index))))},f]}class Et extends e{constructor(t){super(),n(this,t,It,wt,s,{stack:0})}}export{Et as S,X as p};
