import{W as t,S as e,i as n,s,K as c,e as l,k as a,c as r,a as o,n as i,d,b as u,T as f,f as p,D as h,E as g,r as m,u as $,w as v,x,L as y,M as b,N as k,O as w,J as D,X as I,Q as E,F as N,l as V,U as _,Y as j,Z as R,R as S,j as M,m as G,o as C,v as z,_ as A,t as B,g as J,h as O,$ as T}from"./vendor-bbe47adb.js";import{e as U,a as W,g as Y,d as F,m as H}from"./stores-95512afe.js";import{G as K,A as L,a as Q}from"./Game-c6420ef6.js";const X={subscribe:e=>(()=>{const e=t("__svelte__");return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:e.navigating.subscribe}},session:e.session}})().page.subscribe(e)};function Z(t){let e,n,s;return{c(){e=l("div"),n=l("img"),this.h()},l(t){e=r(t,"DIV",{});var s=o(e);n=r(s,"IMG",{draggable:!0,class:!0,src:!0,alt:!0}),s.forEach(d),this.h()},h(){u(n,"draggable","false"),u(n,"class","w-full"),E(n.src,s="/cards/_empty.svg")||u(n,"src","/cards/_empty.svg"),u(n,"alt","-")},m(t,s){p(t,e,s),h(e,n)},p:N,i:N,o:N,d(t){t&&d(e)}}}function q(t){let e,n,s,c;const l=[tt,P],a=[];function r(t,e){return t[1]||t[0].facedown?0:1}return e=r(t),n=a[e]=l[e](t),{c(){n.c(),s=V()},l(t){n.l(t),s=V()},m(t,n){a[e].m(t,n),p(t,s,n),c=!0},p(t,c){let o=e;e=r(t),e===o?a[e].p(t,c):(m(),$(a[o],1,1,(()=>{a[o]=null})),v(),n=a[e],n?n.p(t,c):(n=a[e]=l[e](t),n.c()),x(n,1),n.m(s.parentNode,s))},i(t){c||(x(n),c=!0)},o(t){$(n),c=!1},d(t){a[e].d(t),t&&d(s)}}}function P(t){let e,n,s,c,a;return{c(){e=l("div"),n=l("img"),this.h()},l(t){e=r(t,"DIV",{});var s=o(e);n=r(s,"IMG",{draggable:!0,class:!0,src:!0,alt:!0}),s.forEach(d),this.h()},h(){u(n,"draggable",t[10]),u(n,"class","w-full"),E(n.src,s="/cards/"+t[8]+".svg")||u(n,"src",s),u(n,"alt",t[9])},m(t,s){p(t,e,s),h(e,n),a=!0},p(t,e){(!a||1024&e)&&u(n,"draggable",t[10]),(!a||256&e&&!E(n.src,s="/cards/"+t[8]+".svg"))&&u(n,"src",s),(!a||512&e)&&u(n,"alt",t[9])},i(t){a||(_((()=>{c||(c=j(e,nt,{},!0)),c.run(1)})),a=!0)},o(t){c||(c=j(e,nt,{},!1)),c.run(0),a=!1},d(t){t&&d(e),t&&c&&c.end()}}}function tt(t){let e,n,s,c,a;return{c(){e=l("div"),n=l("img"),this.h()},l(t){e=r(t,"DIV",{});var s=o(e);n=r(s,"IMG",{draggable:!0,class:!0,src:!0,alt:!0}),s.forEach(d),this.h()},h(){u(n,"draggable","false"),u(n,"class","w-full"),E(n.src,s="/cards/_back.svg")||u(n,"src","/cards/_back.svg"),u(n,"alt","?")},m(t,s){p(t,e,s),h(e,n),a=!0},p:N,i(t){a||(_((()=>{c||(c=j(e,nt,{},!0)),c.run(1)})),a=!0)},o(t){c||(c=j(e,nt,{},!1)),c.run(0),a=!1},d(t){t&&d(e),t&&c&&c.end()}}}function et(t){let e,n,s,D,I,E,N,V,_,j,R;const S=[q,Z],M=[];function G(t,e){return t[0]?0:1}s=G(t),D=M[s]=S[s](t);const C=t[17].default,z=c(C,t,t[16],null);return{c(){e=l("div"),n=l("div"),D.c(),I=a(),E=l("div"),z&&z.c(),this.h()},l(t){e=r(t,"DIV",{class:!0,style:!0});var s=o(e);n=r(s,"DIV",{class:!0});var c=o(n);D.l(c),I=i(c),E=r(c,"DIV",{class:!0});var l=o(E);z&&z.l(l),l.forEach(d),c.forEach(d),s.forEach(d),this.h()},h(){u(E,"class","absolute w-full text-center top-2"),u(n,"class","cursor-pointer"),u(e,"class",N="card container "+t[7]+" rounded-xl absolute svelte-oigr2j"),u(e,"style",V=t[5]+":"+t[6]+"px"),f(e,"selected",t[4].selection.filter(t[21]).length)},m(c,l){p(c,e,l),h(e,n),M[s].m(n,null),h(n,I),h(n,E),z&&z.m(E,null),_=!0,j||(R=[g(e,"dragstart",t[19]),g(e,"dragend",t[20]),g(e,"click",t[18])],j=!0)},p(t,[c]){let l=s;s=G(t),s===l?M[s].p(t,c):(m(),$(M[l],1,1,(()=>{M[l]=null})),v(),D=M[s],D?D.p(t,c):(D=M[s]=S[s](t),D.c()),x(D,1),D.m(n,I)),z&&z.p&&(!_||65536&c)&&y(z,C,t,t[16],_?k(C,t[16],c,null):b(t[16]),null),(!_||128&c&&N!==(N="card container "+t[7]+" rounded-xl absolute svelte-oigr2j"))&&u(e,"class",N),(!_||96&c&&V!==(V=t[5]+":"+t[6]+"px"))&&u(e,"style",V),145&c&&f(e,"selected",t[4].selection.filter(t[21]).length)},i(t){_||(x(D),x(z,t),_=!0)},o(t){$(D),$(z,t),_=!1},d(t){t&&d(e),M[s].d(),z&&z.d(t),j=!1,w(R)}}}function nt(t,{delay:e=0,duration:n=80}){return{delay:e,duration:n,css:(t,e)=>`\n\t\t\t\ttransform: rotateY(${1-180*e}deg);\n\t\t\t\topacity: ${1-e};\n        ${e?"position:absolute;":"position:static"}\n\t\t\t`}}function st(t,e,n){let s,c,l,a,r,o;D(t,U,(t=>n(14,a=t))),D(t,W,(t=>n(15,r=t))),D(t,Y,(t=>n(4,o=t)));let i,d,u,f,p,h,{$$slots:g={},$$scope:m}=e,{card:$}=e,{facedown:v=!1}=e,{stack:x}=e,{cardIndex:y=0}=e;$&&(f=["hearts","diamonds"].includes($.suitName)?"text-red-600":"text-black",p=$.isJoker?"_joker":`${$.rank}_${$.suitName}`,h=$.isJoker?"joker":`${$.rank}${$.suit}`);return t.$$set=t=>{"card"in t&&n(0,$=t.card),"facedown"in t&&n(1,v=t.facedown),"stack"in t&&n(2,x=t.stack),"cardIndex"in t&&n(12,y=t.cardIndex),"$$scope"in t&&n(16,m=t.$$scope)},t.$$.update=()=>{4100&t.$$.dirty&&n(3,s=null==x?void 0:x.getCardDepth(y)),12&t.$$.dirty&&n(11,c=s?x.look(s):[]),31&t.$$.dirty&&n(10,l=!v&&!o.conf.multiSelect&&s&&!$.facedown&&(o.conf.selectBlockedStacks||!x.isBlocked)&&(!x.conf.limitAvailable||s<=x.conf.limitAvailable)),61444&t.$$.dirty&&x&&(n(13,i=Math.max(y-x.firstVisible,0)),n(6,u=(null==x?void 0:x.isDeck)?0:i*(x.conf.horizontal?r:a)),n(5,d=x.conf.horizontal?"left":"top"))},[$,v,x,s,o,d,u,f,p,h,l,c,y,i,a,r,m,g,function(e){I.call(this,t,e)},t=>{F.set({cards:c,cardDepth:s,fromStack:x.index}),o.clearSelected(),o.setSelected(c,x)},t=>{F.set({}),o.clearSelected(),Y.set(o)},t=>(null==t?void 0:t.id)===(null==$?void 0:$.id)]}class ct extends e{constructor(t){super(),n(this,t,st,et,s,{card:0,facedown:1,stack:2,cardIndex:12})}}function lt(t,e,n){const s=t.slice();return s[20]=e[n],s[22]=n,s}function at(t,e,n){const s=t.slice();return s[20]=e[n],s[22]=n,s}function rt(t){let e,n,s;const a=t[11].default,i=c(a,t,t[17],null);return{c(){e=l("div"),i&&i.c(),this.h()},l(t){e=r(t,"DIV",{class:!0,style:!0});var n=o(e);i&&i.l(n),n.forEach(d),this.h()},h(){u(e,"class",n="relative p-1 "+t[3]+" box-content"),S(e,"width",("-"===t[0]?t[2]/2:t[2])+"px")},m(t,n){p(t,e,n),i&&i.m(e,null),s=!0},p(t,c){i&&i.p&&(!s||131072&c)&&y(i,a,t,t[17],s?k(a,t[17],c,null):b(t[17]),null),(!s||8&c&&n!==(n="relative p-1 "+t[3]+" box-content"))&&u(e,"class",n),(!s||5&c)&&S(e,"width",("-"===t[0]?t[2]/2:t[2])+"px")},i(t){s||(x(i,t),s=!0)},o(t){$(i,t),s=!1},d(t){t&&d(e),i&&i.d(t)}}}function ot(t){let e,n,s,c,a,i=t[0]&&it(t);return{c(){e=l("div"),n=l("div"),i&&i.c(),this.h()},l(t){e=r(t,"DIV",{class:!0,style:!0});var s=o(e);n=r(s,"DIV",{class:!0,style:!0});var c=o(n);i&&i.l(c),c.forEach(d),s.forEach(d),this.h()},h(){u(n,"class","relative h-full"),S(n,"max-width",t[2]+"px"),u(e,"class","relative p-1 justify-center box-content"),S(e,"height",t[5]+"px"),S(e,"width",t[6]+"px"),f(e,"pointer-events-auto",t[0]&&(t[0].length||t[0].isDeck||t[0].conf.showEmpty))},m(l,r){p(l,e,r),h(e,n),i&&i.m(n,null),s=!0,c||(a=[g(e,"dragover",It),g(e,"drop",t[16])],c=!0)},p(t,c){t[0]?i?(i.p(t,c),1&c&&x(i,1)):(i=it(t),i.c(),x(i,1),i.m(n,null)):i&&(m(),$(i,1,1,(()=>{i=null})),v()),(!s||4&c)&&S(n,"max-width",t[2]+"px"),(!s||32&c)&&S(e,"height",t[5]+"px"),(!s||64&c)&&S(e,"width",t[6]+"px"),1&c&&f(e,"pointer-events-auto",t[0]&&(t[0].length||t[0].isDeck||t[0].conf.showEmpty))},i(t){s||(x(i),s=!0)},o(t){$(i),s=!1},d(t){t&&d(e),i&&i.d(),c=!1,w(a)}}}function it(t){let e,n,s,c;const l=[ut,dt],a=[];function r(t,e){return t[0].isDeck?0:1}return e=r(t),n=a[e]=l[e](t),{c(){n.c(),s=V()},l(t){n.l(t),s=V()},m(t,n){a[e].m(t,n),p(t,s,n),c=!0},p(t,c){let o=e;e=r(t),e===o?a[e].p(t,c):(m(),$(a[o],1,1,(()=>{a[o]=null})),v(),n=a[e],n?n.p(t,c):(n=a[e]=l[e](t),n.c()),x(n,1),n.m(s.parentNode,s))},i(t){c||(x(n),c=!0)},o(t){$(n),c=!1},d(t){a[e].d(t),t&&d(s)}}}function dt(t){let e,n,s=[],c=new Map,l=t[0].stack;const a=t=>t[20].id;for(let o=0;o<l.length;o+=1){let e=lt(t,l,o),n=a(e);c.set(n,s[o]=vt(n,e))}let r=null;return l.length||(r=ft(t)),{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=V(),r&&r.c()},l(t){for(let e=0;e<s.length;e+=1)s[e].l(t);e=V(),r&&r.l(t)},m(t,c){for(let e=0;e<s.length;e+=1)s[e].m(t,c);p(t,e,c),r&&r.m(t,c),n=!0},p(t,n){405&n&&(l=t[0].stack,m(),s=A(s,n,a,1,t,l,c,e.parentNode,T,vt,e,lt),v(),!l.length&&r?r.p(t,n):l.length?r&&(m(),$(r,1,1,(()=>{r=null})),v()):(r=ft(t),r.c(),x(r,1),r.m(e.parentNode,e)))},i(t){if(!n){for(let t=0;t<l.length;t+=1)x(s[t]);n=!0}},o(t){for(let e=0;e<s.length;e+=1)$(s[e]);n=!1},d(t){for(let e=0;e<s.length;e+=1)s[e].d(t);t&&d(e),r&&r.d(t)}}}function ut(t){let e,n,s=[],c=new Map,l=t[0].stack;const a=t=>t[20].id;for(let o=0;o<l.length;o+=1){let e=at(t,l,o),n=a(e);c.set(n,s[o]=wt(n,e))}let r=null;return l.length||(r=xt(t)),{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=V(),r&&r.c()},l(t){for(let e=0;e<s.length;e+=1)s[e].l(t);e=V(),r&&r.l(t)},m(t,c){for(let e=0;e<s.length;e+=1)s[e].m(t,c);p(t,e,c),r&&r.m(t,c),n=!0},p(t,n){385&n&&(l=t[0].stack,m(),s=A(s,n,a,1,t,l,c,e.parentNode,T,wt,e,at),v(),!l.length&&r?r.p(t,n):l.length?r&&(m(),$(r,1,1,(()=>{r=null})),v()):(r=xt(t),r.c(),x(r,1),r.m(e.parentNode,e)))},i(t){if(!n){for(let t=0;t<l.length;t+=1)x(s[t]);n=!0}},o(t){for(let e=0;e<s.length;e+=1)$(s[e]);n=!1},d(t){for(let e=0;e<s.length;e+=1)s[e].d(t);t&&d(e),r&&r.d(t)}}}function ft(t){let e,n,s=t[7].conf.showEmpty&&pt(t);return{c(){s&&s.c(),e=V()},l(t){s&&s.l(t),e=V()},m(t,c){s&&s.m(t,c),p(t,e,c),n=!0},p(t,n){t[7].conf.showEmpty?s?(s.p(t,n),128&n&&x(s,1)):(s=pt(t),s.c(),x(s,1),s.m(e.parentNode,e)):s&&(m(),$(s,1,1,(()=>{s=null})),v())},i(t){n||(x(s),n=!0)},o(t){$(s),n=!1},d(t){s&&s.d(t),t&&d(e)}}}function pt(t){let e,n;return e=new ct({props:{$$slots:{default:[gt]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,s){C(e,t,s),n=!0},p(t,n){const s={};131092&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(x(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function ht(t){let e,n;return{c(){e=l("div"),n=B(" "),this.h()},l(t){e=r(t,"DIV",{class:!0,style:!0});var s=o(e);n=J(s," "),s.forEach(d),this.h()},h(){u(e,"class","absolute w-full top-0 bg-blue-300 opacity-40 rounded-xl -my-2"),S(e,"height",1.5*t[2]+"px")},m(t,s){p(t,e,s),h(e,n)},p(t,n){4&n&&S(e,"height",1.5*t[2]+"px")},d(t){t&&d(e)}}}function gt(t){let e,n=t[4]&&ht(t);return{c(){n&&n.c(),e=a()},l(t){n&&n.l(t),e=i(t)},m(t,s){n&&n.m(t,s),p(t,e,s)},p(t,s){t[4]?n?n.p(t,s):(n=ht(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&d(e)}}}function mt(t){let e,n;return{c(){e=l("div"),n=B(" "),this.h()},l(t){e=r(t,"DIV",{class:!0,style:!0});var s=o(e);n=J(s," "),s.forEach(d),this.h()},h(){u(e,"class","absolute w-full top-0 bg-blue-500 opacity-40 rounded-xl -my-2"),S(e,"height",1.5*t[2]+"px")},m(t,s){p(t,e,s),h(e,n)},p(t,n){4&n&&S(e,"height",1.5*t[2]+"px")},d(t){t&&d(e)}}}function $t(t){let e,n=t[4]&&t[22]===t[0].length-1&&mt(t);return{c(){n&&n.c(),e=a()},l(t){n&&n.l(t),e=i(t)},m(t,s){n&&n.m(t,s),p(t,e,s)},p(t,s){t[4]&&t[22]===t[0].length-1?n?n.p(t,s):(n=mt(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&d(e)}}}function vt(t,e){let n,s,c;return s=new ct({props:{card:e[20],stack:e[0],cardIndex:e[22],$$slots:{default:[$t]},$$scope:{ctx:e}}}),s.$on("click",(function(){return e[15](e[20])})),{key:t,first:null,c(){n=V(),M(s.$$.fragment),this.h()},l(t){n=V(),G(s.$$.fragment,t),this.h()},h(){this.first=n},m(t,e){p(t,n,e),C(s,t,e),c=!0},p(t,n){e=t;const c={};1&n&&(c.card=e[20]),1&n&&(c.stack=e[0]),1&n&&(c.cardIndex=e[22]),131093&n&&(c.$$scope={dirty:n,ctx:e}),s.$set(c)},i(t){c||(x(s.$$.fragment,t),c=!0)},o(t){$(s.$$.fragment,t),c=!1},d(t){t&&d(n),z(s,t)}}}function xt(t){let e,n;return e=new ct({props:{$$slots:{default:[kt]},$$scope:{ctx:t}}}),e.$on("click",t[14]),{c(){M(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,s){C(e,t,s),n=!0},p(t,n){const s={};131200&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(x(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function yt(t){let e,n,s,c=t[7].canRecycle+"";return{c(){e=B("("),n=B(c),s=B(")")},l(t){e=J(t,"("),n=J(t,c),s=J(t,")")},m(t,c){p(t,e,c),p(t,n,c),p(t,s,c)},p(t,e){128&e&&c!==(c=t[7].canRecycle+"")&&O(n,c)},d(t){t&&d(e),t&&d(n),t&&d(s)}}}function bt(t){let e,n,s,c,a;return{c(){e=l("div"),n=l("button"),s=B("New")},l(t){e=r(t,"DIV",{});var c=o(e);n=r(c,"BUTTON",{});var l=o(n);s=J(l,"New"),l.forEach(d),c.forEach(d)},m(l,r){p(l,e,r),h(e,n),h(n,s),c||(a=g(n,"click",t[13]),c=!0)},p:N,d(t){t&&d(e),c=!1,a()}}}function kt(t){let e,n,s,c,u="number"==typeof t[7].canRecycle&&yt(t),g=!t[7].canRecycle&&bt(t);return{c(){e=l("div"),n=B("Cycle\n                "),u&&u.c(),s=a(),g&&g.c(),c=a(),this.h()},l(t){e=r(t,"DIV",{});var l=o(e);n=J(l,"Cycle\n                "),u&&u.l(l),l.forEach(d),s=i(t),g&&g.l(t),c=i(t),this.h()},h(){f(e,"text-gray-600",!t[7].canRecycle)},m(t,l){p(t,e,l),h(e,n),u&&u.m(e,null),p(t,s,l),g&&g.m(t,l),p(t,c,l)},p(t,n){"number"==typeof t[7].canRecycle?u?u.p(t,n):(u=yt(t),u.c(),u.m(e,null)):u&&(u.d(1),u=null),128&n&&f(e,"text-gray-600",!t[7].canRecycle),t[7].canRecycle?g&&(g.d(1),g=null):g?g.p(t,n):(g=bt(t),g.c(),g.m(c.parentNode,c))},d(t){t&&d(e),u&&u.d(),t&&d(s),g&&g.d(t),t&&d(c)}}}function wt(t,e){let n,s,c;return s=new ct({props:{card:e[20],stack:e[7].deck,facedown:!0,cardIndex:e[22]}}),s.$on("click",e[12]),{key:t,first:null,c(){n=V(),M(s.$$.fragment),this.h()},l(t){n=V(),G(s.$$.fragment,t),this.h()},h(){this.first=n},m(t,e){p(t,n,e),C(s,t,e),c=!0},p(t,n){e=t;const c={};1&n&&(c.card=e[20]),128&n&&(c.stack=e[7].deck),1&n&&(c.cardIndex=e[22]),s.$set(c)},i(t){c||(x(s.$$.fragment,t),c=!0)},o(t){$(s.$$.fragment,t),c=!1},d(t){t&&d(n),z(s,t)}}}function Dt(t){let e,n,s,c;const l=[ot,rt],a=[];function r(t,e){return"string"!=typeof t[0]?0:1}return e=r(t),n=a[e]=l[e](t),{c(){n.c(),s=V()},l(t){n.l(t),s=V()},m(t,n){a[e].m(t,n),p(t,s,n),c=!0},p(t,[c]){let o=e;e=r(t),e===o?a[e].p(t,c):(m(),$(a[o],1,1,(()=>{a[o]=null})),v(),n=a[e],n?n.p(t,c):(n=a[e]=l[e](t),n.c()),x(n,1),n.m(s.parentNode,s))},i(t){c||(x(n),c=!0)},o(t){$(n),c=!1},d(t){a[e].d(t),t&&d(s)}}}const It=t=>{t.preventDefault()};function Et(t,e,n){let s,c,l,a,r,o,i,d;D(t,F,(t=>n(1,a=t))),D(t,Y,(t=>n(7,r=t))),D(t,H,(t=>n(2,o=t))),D(t,U,(t=>n(18,i=t))),D(t,W,(t=>n(19,d=t)));let{$$slots:u={},$$scope:f}=e,{stack:p}=e,h="",g=0,m=0;function $(t,e){"string"!=typeof t&&(e?r.clickCard(e,t):r.deal(),Y.set(r))}"string"==typeof p?("-"===p&&(h="flex-shrink"),"_"===p&&(h="flex-grow")):p&&!p.isDeck&&(p.conf.horizontal?m=p.maxWidth*d:g=p.maxHeight*i);return t.$$set=t=>{"stack"in t&&n(0,p=t.stack),"$$scope"in t&&n(17,f=t.$$scope)},t.$$.update=()=>{1028&t.$$.dirty&&n(6,s=o+m),516&t.$$.dirty&&n(5,c=1.5*o+g),3&t.$$.dirty&&n(4,l=p&&"string"!=typeof p&&(null==a?void 0:a.cards)&&p.wants(a.cards))},[p,a,o,h,l,c,s,r,$,g,m,u,()=>$(p),()=>{R(Y,r=new K(Object.assign({},r.conf,r.deck.conf)),r)},()=>$(p),t=>$(p,t),t=>{t.preventDefault(),p.wants(a.cards)&&(console.log("dropped!"),r.do(new L("move",new Q(a.cardDepth,a.fromStack,p.index))))},f]}class Nt extends e{constructor(t){super(),n(this,t,Et,Dt,s,{stack:0})}}export{Nt as S,X as p};
