import{a3 as t,S as e,i as l,s as n,F as s,e as c,k as r,c as o,a,n as i,d as f,b as d,a2 as u,f as h,K as g,G as p,r as $,u as m,w as x,x as v,H as y,I as w,J as k,M as b,W as I,P as D,a0 as E,T as V,l as R,a4 as j,a5 as N,a1 as _,j as M,m as S,o as G,v as B,a6 as H,t as C,g as z,a7 as A,h as J,U as W,a8 as T}from"./vendor-33d0214b.js";import{e as F,a as K,g as P,m as U,d as Y,G as q}from"./GameControls-30a03239.js";import{A as L,a as O}from"./Game-f1a072f2.js";const Q={subscribe:e=>(()=>{const e=t("__svelte__");return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:e.navigating.subscribe}},session:e.session}})().page.subscribe(e)};function X(t){let e,l,n;return{c(){e=c("div"),l=c("img"),this.h()},l(t){e=o(t,"DIV",{});var n=a(e);l=o(n,"IMG",{draggable:!0,class:!0,src:!0,alt:!0}),n.forEach(f),this.h()},h(){d(l,"draggable","false"),d(l,"class","w-full"),E(l.src,n="/cards/_empty.svg")||d(l,"src","/cards/_empty.svg"),d(l,"alt","-")},m(t,n){h(t,e,n),g(e,l)},p:V,i:V,o:V,d(t){t&&f(e)}}}function Z(t){let e,l,n,s;const c=[et,tt],r=[];function o(t,e){return t[1]||t[0].facedown?0:1}return e=o(t),l=r[e]=c[e](t),{c(){l.c(),n=R()},l(t){l.l(t),n=R()},m(t,l){r[e].m(t,l),h(t,n,l),s=!0},p(t,s){let a=e;e=o(t),e===a?r[e].p(t,s):($(),m(r[a],1,1,(()=>{r[a]=null})),x(),l=r[e],l?l.p(t,s):(l=r[e]=c[e](t),l.c()),v(l,1),l.m(n.parentNode,n))},i(t){s||(v(l),s=!0)},o(t){m(l),s=!1},d(t){r[e].d(t),t&&f(n)}}}function tt(t){let e,l,n,s,r;return{c(){e=c("div"),l=c("img"),this.h()},l(t){e=o(t,"DIV",{});var n=a(e);l=o(n,"IMG",{draggable:!0,class:!0,src:!0,alt:!0}),n.forEach(f),this.h()},h(){d(l,"draggable",t[10]),d(l,"class","w-full"),E(l.src,n="/cards/"+t[8]+".svg")||d(l,"src",n),d(l,"alt",t[9])},m(t,n){h(t,e,n),g(e,l),r=!0},p(t,e){(!r||1024&e)&&d(l,"draggable",t[10]),(!r||256&e&&!E(l.src,n="/cards/"+t[8]+".svg"))&&d(l,"src",n),(!r||512&e)&&d(l,"alt",t[9])},i(t){r||(j((()=>{s||(s=N(e,nt,{},!0)),s.run(1)})),r=!0)},o(t){s||(s=N(e,nt,{},!1)),s.run(0),r=!1},d(t){t&&f(e),t&&s&&s.end()}}}function et(t){let e,l,n,s,r;return{c(){e=c("div"),l=c("img"),this.h()},l(t){e=o(t,"DIV",{});var n=a(e);l=o(n,"IMG",{draggable:!0,class:!0,src:!0,alt:!0}),n.forEach(f),this.h()},h(){d(l,"draggable","false"),d(l,"class","w-full"),E(l.src,n="/cards/_back.svg")||d(l,"src","/cards/_back.svg"),d(l,"alt","?")},m(t,n){h(t,e,n),g(e,l),r=!0},p:V,i(t){r||(j((()=>{s||(s=N(e,nt,{},!0)),s.run(1)})),r=!0)},o(t){s||(s=N(e,nt,{},!1)),s.run(0),r=!1},d(t){t&&f(e),t&&s&&s.end()}}}function lt(t){let e,l,n,I,D,E,V,R,j,N,_,M;const S=[Z,X],G=[];function B(t,e){return t[0]?0:1}n=B(t),I=G[n]=S[n](t);const H=t[18].default,C=s(H,t,t[17],null);return{c(){e=c("div"),l=c("div"),I.c(),D=r(),E=c("div"),C&&C.c(),this.h()},l(t){e=o(t,"DIV",{class:!0,style:!0});var n=a(e);l=o(n,"DIV",{class:!0});var s=a(l);I.l(s),D=i(s),E=o(s,"DIV",{class:!0});var c=a(E);C&&C.l(c),c.forEach(f),s.forEach(f),n.forEach(f),this.h()},h(){d(E,"class",V="absolute w-full h-full text-center top-2 text-"+(t[12]<100?"xs":"sm")),d(l,"class","cursor-pointer"),d(e,"class",R="card container "+t[7]+" rounded-xl absolute svelte-oigr2j"),d(e,"style",j=t[5]+":"+t[6]+"px"),u(e,"selected",t[4].selection.filter(t[22]).length)},m(s,c){h(s,e,c),g(e,l),G[n].m(l,null),g(l,D),g(l,E),C&&C.m(E,null),N=!0,_||(M=[p(e,"dragstart",t[20]),p(e,"dragend",t[21]),p(e,"click",t[19])],_=!0)},p(t,[s]){let c=n;n=B(t),n===c?G[n].p(t,s):($(),m(G[c],1,1,(()=>{G[c]=null})),x(),I=G[n],I?I.p(t,s):(I=G[n]=S[n](t),I.c()),v(I,1),I.m(l,D)),C&&C.p&&(!N||131072&s)&&y(C,H,t,t[17],N?k(H,t[17],s,null):w(t[17]),null),(!N||4096&s&&V!==(V="absolute w-full h-full text-center top-2 text-"+(t[12]<100?"xs":"sm")))&&d(E,"class",V),(!N||128&s&&R!==(R="card container "+t[7]+" rounded-xl absolute svelte-oigr2j"))&&d(e,"class",R),(!N||96&s&&j!==(j=t[5]+":"+t[6]+"px"))&&d(e,"style",j),145&s&&u(e,"selected",t[4].selection.filter(t[22]).length)},i(t){N||(v(I),v(C,t),N=!0)},o(t){m(I),m(C,t),N=!1},d(t){t&&f(e),G[n].d(),C&&C.d(t),_=!1,b(M)}}}function nt(t,{delay:e=0,duration:l=80}){return{delay:e,duration:l,css:(t,e)=>`\n\t\t\t\ttransform: rotateY(${1-180*e}deg);\n\t\t\t\topacity: ${1-e};\n        ${e?"position:absolute;":"position:static"}\n\t\t\t`}}function st(t,e,l){let n,s,c,r,o,a,i;I(t,F,(t=>l(15,r=t))),I(t,K,(t=>l(16,o=t))),I(t,P,(t=>l(4,a=t))),I(t,U,(t=>l(12,i=t)));let f,d,u,h,g,p,{$$slots:$={},$$scope:m}=e,{card:x}=e,{facedown:v=!1}=e,{stack:y}=e,{cardIndex:w=0}=e;x&&(h=["hearts","diamonds"].includes(x.suitName)?"text-red-600":"text-black",g=x.isJoker?"_joker":`${x.rank}_${x.suitName}`,p=x.isJoker?"joker":`${x.rank}${x.suit}`);return t.$$set=t=>{"card"in t&&l(0,x=t.card),"facedown"in t&&l(1,v=t.facedown),"stack"in t&&l(2,y=t.stack),"cardIndex"in t&&l(13,w=t.cardIndex),"$$scope"in t&&l(17,m=t.$$scope)},t.$$.update=()=>{8196&t.$$.dirty&&l(3,n=null==y?void 0:y.getCardDepth(w)),12&t.$$.dirty&&l(11,s=n?y.look(n):[]),31&t.$$.dirty&&l(10,c=!v&&!a.conf.multiSelect&&n&&!x.facedown&&(a.conf.selectBlockedStacks||!y.isBlocked)&&(!y.conf.limitAvailable||n<=y.conf.limitAvailable)),122884&t.$$.dirty&&y&&(l(14,f=Math.max(w-y.firstVisible,0)),l(6,u=(null==y?void 0:y.isDeck)?0:f*(y.conf.horizontal?o:r)),l(5,d=y.conf.horizontal?"left":"top"))},[x,v,y,n,a,d,u,h,g,p,c,s,i,w,f,r,o,m,$,function(e){D.call(this,t,e)},t=>{Y.set({cards:s,cardDepth:n,fromStack:y.index}),a.clearSelected(),a.setSelected(s,y)},t=>{Y.set({}),a.clearSelected(),P.set(a)},t=>(null==t?void 0:t.id)===(null==x?void 0:x.id)]}class ct extends e{constructor(t){super(),l(this,t,st,lt,n,{card:0,facedown:1,stack:2,cardIndex:13})}}function rt(t,e,l){const n=t.slice();return n[19]=e[l],n[21]=l,n}function ot(t,e,l){const n=t.slice();return n[19]=e[l],n[21]=l,n}function at(t){let e,l,n;const r=t[11].default,i=s(r,t,t[16],null);return{c(){e=c("div"),i&&i.c(),this.h()},l(t){e=o(t,"DIV",{class:!0,style:!0});var l=a(e);i&&i.l(l),l.forEach(f),this.h()},h(){d(e,"class",l="relative "+t[3]+" box-content"),_(e,"width",("-"===t[0]?t[2]/2:t[2])+"px")},m(t,l){h(t,e,l),i&&i.m(e,null),n=!0},p(t,s){i&&i.p&&(!n||65536&s)&&y(i,r,t,t[16],n?k(r,t[16],s,null):w(t[16]),null),(!n||8&s&&l!==(l="relative "+t[3]+" box-content"))&&d(e,"class",l),(!n||5&s)&&_(e,"width",("-"===t[0]?t[2]/2:t[2])+"px")},i(t){n||(v(i,t),n=!0)},o(t){m(i,t),n=!1},d(t){t&&f(e),i&&i.d(t)}}}function it(t){let e,l,n,s,r,i=t[0]&&ft(t);return{c(){e=c("div"),l=c("div"),i&&i.c(),this.h()},l(t){e=o(t,"DIV",{class:!0,style:!0});var n=a(e);l=o(n,"DIV",{class:!0,style:!0});var s=a(l);i&&i.l(s),s.forEach(f),n.forEach(f),this.h()},h(){d(l,"class","relative h-full"),_(l,"max-width",t[2]+"px"),d(e,"class","relative justify-center"),_(e,"height",t[5]+"px"),_(e,"width",t[6]+"px"),u(e,"pointer-events-auto",t[0]&&(t[0].length||t[0].isDeck||t[0].conf.showEmpty)),u(e,"p-1",t[2]>100)},m(c,o){h(c,e,o),g(e,l),i&&i.m(l,null),n=!0,s||(r=[p(e,"dragover",Vt),p(e,"drop",t[15])],s=!0)},p(t,s){t[0]?i?(i.p(t,s),1&s&&v(i,1)):(i=ft(t),i.c(),v(i,1),i.m(l,null)):i&&($(),m(i,1,1,(()=>{i=null})),x()),(!n||4&s)&&_(l,"max-width",t[2]+"px"),(!n||32&s)&&_(e,"height",t[5]+"px"),(!n||64&s)&&_(e,"width",t[6]+"px"),1&s&&u(e,"pointer-events-auto",t[0]&&(t[0].length||t[0].isDeck||t[0].conf.showEmpty)),4&s&&u(e,"p-1",t[2]>100)},i(t){n||(v(i),n=!0)},o(t){m(i),n=!1},d(t){t&&f(e),i&&i.d(),s=!1,b(r)}}}function ft(t){let e,l,n,s;const c=[ut,dt],r=[];function o(t,e){return t[0].isDeck?0:1}return e=o(t),l=r[e]=c[e](t),{c(){l.c(),n=R()},l(t){l.l(t),n=R()},m(t,l){r[e].m(t,l),h(t,n,l),s=!0},p(t,s){let a=e;e=o(t),e===a?r[e].p(t,s):($(),m(r[a],1,1,(()=>{r[a]=null})),x(),l=r[e],l?l.p(t,s):(l=r[e]=c[e](t),l.c()),v(l,1),l.m(n.parentNode,n))},i(t){s||(v(l),s=!0)},o(t){m(l),s=!1},d(t){r[e].d(t),t&&f(n)}}}function dt(t){let e,l,n=[],s=new Map,c=t[0].stack;const r=t=>t[19].id;for(let a=0;a<c.length;a+=1){let e=rt(t,c,a),l=r(e);s.set(l,n[a]=vt(l,e))}let o=null;return c.length||(o=ht(t)),{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=R(),o&&o.c()},l(t){for(let e=0;e<n.length;e+=1)n[e].l(t);e=R(),o&&o.l(t)},m(t,s){for(let e=0;e<n.length;e+=1)n[e].m(t,s);h(t,e,s),o&&o.m(t,s),l=!0},p(t,l){405&l&&(c=t[0].stack,$(),n=H(n,l,r,1,t,c,s,e.parentNode,A,vt,e,rt),x(),!c.length&&o?o.p(t,l):c.length?o&&($(),m(o,1,1,(()=>{o=null})),x()):(o=ht(t),o.c(),v(o,1),o.m(e.parentNode,e)))},i(t){if(!l){for(let t=0;t<c.length;t+=1)v(n[t]);l=!0}},o(t){for(let e=0;e<n.length;e+=1)m(n[e]);l=!1},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&f(e),o&&o.d(t)}}}function ut(t){let e,l,n=[],s=new Map,c=t[0].stack;const r=t=>t[19].id;for(let a=0;a<c.length;a+=1){let e=ot(t,c,a),l=r(e);s.set(l,n[a]=Dt(l,e))}let o=null;return c.length||(o=yt(t)),{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=R(),o&&o.c()},l(t){for(let e=0;e<n.length;e+=1)n[e].l(t);e=R(),o&&o.l(t)},m(t,s){for(let e=0;e<n.length;e+=1)n[e].m(t,s);h(t,e,s),o&&o.m(t,s),l=!0},p(t,l){389&l&&(c=t[0].stack,$(),n=H(n,l,r,1,t,c,s,e.parentNode,A,Dt,e,ot),x(),!c.length&&o?o.p(t,l):c.length?o&&($(),m(o,1,1,(()=>{o=null})),x()):(o=yt(t),o.c(),v(o,1),o.m(e.parentNode,e)))},i(t){if(!l){for(let t=0;t<c.length;t+=1)v(n[t]);l=!0}},o(t){for(let e=0;e<n.length;e+=1)m(n[e]);l=!1},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&f(e),o&&o.d(t)}}}function ht(t){let e,l,n=t[7].conf.showEmpty&&gt(t);return{c(){n&&n.c(),e=R()},l(t){n&&n.l(t),e=R()},m(t,s){n&&n.m(t,s),h(t,e,s),l=!0},p(t,l){t[7].conf.showEmpty?n?(n.p(t,l),128&l&&v(n,1)):(n=gt(t),n.c(),v(n,1),n.m(e.parentNode,e)):n&&($(),m(n,1,1,(()=>{n=null})),x())},i(t){l||(v(n),l=!0)},o(t){m(n),l=!1},d(t){n&&n.d(t),t&&f(e)}}}function gt(t){let e,l;return e=new ct({props:{$$slots:{default:[$t]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){G(e,t,n),l=!0},p(t,l){const n={};65556&l&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function pt(t){let e,l;return{c(){e=c("div"),l=C(" "),this.h()},l(t){e=o(t,"DIV",{class:!0,style:!0});var n=a(e);l=z(n," "),n.forEach(f),this.h()},h(){d(e,"class","absolute w-full top-0 bg-blue-300 opacity-40 rounded-xl -my-2"),_(e,"height",1.5*t[2]+"px")},m(t,n){h(t,e,n),g(e,l)},p(t,l){4&l&&_(e,"height",1.5*t[2]+"px")},d(t){t&&f(e)}}}function $t(t){let e,l=t[4]&&pt(t);return{c(){l&&l.c(),e=r()},l(t){l&&l.l(t),e=i(t)},m(t,n){l&&l.m(t,n),h(t,e,n)},p(t,n){t[4]?l?l.p(t,n):(l=pt(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){l&&l.d(t),t&&f(e)}}}function mt(t){let e,l;return{c(){e=c("div"),l=C(" "),this.h()},l(t){e=o(t,"DIV",{class:!0,style:!0});var n=a(e);l=z(n," "),n.forEach(f),this.h()},h(){d(e,"class","absolute w-full top-0 bg-blue-500 opacity-40 rounded-xl -my-2"),_(e,"height",1.5*t[2]+"px")},m(t,n){h(t,e,n),g(e,l)},p(t,l){4&l&&_(e,"height",1.5*t[2]+"px")},d(t){t&&f(e)}}}function xt(t){let e,l=t[4]&&t[21]===t[0].length-1&&mt(t);return{c(){l&&l.c(),e=r()},l(t){l&&l.l(t),e=i(t)},m(t,n){l&&l.m(t,n),h(t,e,n)},p(t,n){t[4]&&t[21]===t[0].length-1?l?l.p(t,n):(l=mt(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){l&&l.d(t),t&&f(e)}}}function vt(t,e){let l,n,s;return n=new ct({props:{card:e[19],stack:e[0],cardIndex:e[21],$$slots:{default:[xt]},$$scope:{ctx:e}}}),n.$on("click",(function(){return e[14](e[19])})),{key:t,first:null,c(){l=R(),M(n.$$.fragment),this.h()},l(t){l=R(),S(n.$$.fragment,t),this.h()},h(){this.first=l},m(t,e){h(t,l,e),G(n,t,e),s=!0},p(t,l){e=t;const s={};1&l&&(s.card=e[19]),1&l&&(s.stack=e[0]),1&l&&(s.cardIndex=e[21]),65557&l&&(s.$$scope={dirty:l,ctx:e}),n.$set(s)},i(t){s||(v(n.$$.fragment,t),s=!0)},o(t){m(n.$$.fragment,t),s=!1},d(t){t&&f(l),B(n,t)}}}function yt(t){let e,l;return e=new ct({props:{$$slots:{default:[It]},$$scope:{ctx:t}}}),e.$on("click",t[13]),{c(){M(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){G(e,t,n),l=!0},p(t,l){const n={};65668&l&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function wt(t){let e,l,n;return l=new q({props:{buttons:t[2]>56?"new,restart":"new",text:t[2]>72,class:"w-full"}}),{c(){e=c("div"),M(l.$$.fragment)},l(t){e=o(t,"DIV",{});var n=a(e);S(l.$$.fragment,n),n.forEach(f)},m(t,s){h(t,e,s),G(l,e,null),n=!0},p(t,e){const n={};4&e&&(n.buttons=t[2]>56?"new,restart":"new"),4&e&&(n.text=t[2]>72),l.$set(n)},i(t){n||(v(l.$$.fragment,t),n=!0)},o(t){m(l.$$.fragment,t),n=!1},d(t){t&&f(e),B(l)}}}function kt(t){let e,l,n="number"==typeof t[7].canRecycle&&bt(t);return{c(){e=c("div"),l=C("Cycle\n                  "),n&&n.c(),this.h()},l(t){e=o(t,"DIV",{});var s=a(e);l=z(s,"Cycle\n                  "),n&&n.l(s),s.forEach(f),this.h()},h(){u(e,"text-gray-600",!t[7].canRecycle)},m(t,s){h(t,e,s),g(e,l),n&&n.m(e,null)},p(t,l){"number"==typeof t[7].canRecycle?n?n.p(t,l):(n=bt(t),n.c(),n.m(e,null)):n&&(n.d(1),n=null),128&l&&u(e,"text-gray-600",!t[7].canRecycle)},i:V,o:V,d(t){t&&f(e),n&&n.d()}}}function bt(t){let e,l,n,s=t[7].canRecycle+"";return{c(){e=C("("),l=C(s),n=C(")")},l(t){e=z(t,"("),l=z(t,s),n=z(t,")")},m(t,s){h(t,e,s),h(t,l,s),h(t,n,s)},p(t,e){128&e&&s!==(s=t[7].canRecycle+"")&&J(l,s)},d(t){t&&f(e),t&&f(l),t&&f(n)}}}function It(t){let e,l,n,s;const c=[kt,wt],o=[];function a(t,e){return t[7].canRecycle?0:1}return e=a(t),l=o[e]=c[e](t),{c(){l.c(),n=r()},l(t){l.l(t),n=i(t)},m(t,l){o[e].m(t,l),h(t,n,l),s=!0},p(t,s){let r=e;e=a(t),e===r?o[e].p(t,s):($(),m(o[r],1,1,(()=>{o[r]=null})),x(),l=o[e],l?l.p(t,s):(l=o[e]=c[e](t),l.c()),v(l,1),l.m(n.parentNode,n))},i(t){s||(v(l),s=!0)},o(t){m(l),s=!1},d(t){o[e].d(t),t&&f(n)}}}function Dt(t,e){let l,n,s;return n=new ct({props:{card:e[19],stack:e[7].deck,facedown:!0,cardIndex:e[21]}}),n.$on("click",e[12]),{key:t,first:null,c(){l=R(),M(n.$$.fragment),this.h()},l(t){l=R(),S(n.$$.fragment,t),this.h()},h(){this.first=l},m(t,e){h(t,l,e),G(n,t,e),s=!0},p(t,l){e=t;const s={};1&l&&(s.card=e[19]),128&l&&(s.stack=e[7].deck),1&l&&(s.cardIndex=e[21]),n.$set(s)},i(t){s||(v(n.$$.fragment,t),s=!0)},o(t){m(n.$$.fragment,t),s=!1},d(t){t&&f(l),B(n,t)}}}function Et(t){let e,l,n,s;const c=[it,at],r=[];function o(t,e){return"string"!=typeof t[0]?0:1}return e=o(t),l=r[e]=c[e](t),{c(){l.c(),n=R()},l(t){l.l(t),n=R()},m(t,l){r[e].m(t,l),h(t,n,l),s=!0},p(t,[s]){let a=e;e=o(t),e===a?r[e].p(t,s):($(),m(r[a],1,1,(()=>{r[a]=null})),x(),l=r[e],l?l.p(t,s):(l=r[e]=c[e](t),l.c()),v(l,1),l.m(n.parentNode,n))},i(t){s||(v(l),s=!0)},o(t){m(l),s=!1},d(t){r[e].d(t),t&&f(n)}}}const Vt=t=>{t.preventDefault()};function Rt(t,e,l){let n,s,c,r,o,a,i,f;I(t,Y,(t=>l(1,r=t))),I(t,P,(t=>l(7,o=t))),I(t,U,(t=>l(2,a=t))),I(t,F,(t=>l(17,i=t))),I(t,K,(t=>l(18,f=t)));let{$$slots:d={},$$scope:u}=e,{stack:h}=e,g="",p=0,$=0;function m(t,e){"string"!=typeof t&&(e?o.clickCard(e,t):o.deal(),P.set(o))}"string"==typeof h?("-"===h&&(g="flex-shrink"),"_"===h&&(g="flex-grow")):h&&!h.isDeck&&(h.conf.horizontal?$=h.maxWidth*f:p=h.maxHeight*i);return t.$$set=t=>{"stack"in t&&l(0,h=t.stack),"$$scope"in t&&l(16,u=t.$$scope)},t.$$.update=()=>{1028&t.$$.dirty&&l(6,n=a+$),516&t.$$.dirty&&l(5,s=1.5*a+p),3&t.$$.dirty&&l(4,c=h&&"string"!=typeof h&&(null==r?void 0:r.cards)&&h.wants(r.cards))},[h,r,a,g,c,s,n,o,m,p,$,d,()=>m(h),()=>m(h),t=>m(h,t),t=>{t.preventDefault(),h.wants(r.cards)&&(console.log("dropped!"),o.do(new L("move",new O(r.cardDepth,r.fromStack,h.index))))},u]}class jt extends e{constructor(t){super(),l(this,t,Rt,Et,n,{stack:0})}}function Nt(t,e,l){const n=t.slice();return n[10]=e[l],n}function _t(t,e,l){const n=t.slice();return n[13]=e[l],n}function Mt(t,e,l){const n=t.slice();return n[10]=e[l],n[17]=l,n}function St(t,e,l){const n=t.slice();return n[13]=e[l],n}function Gt(t){let e,l;return e=new jt({props:{stack:t[13]}}),{c(){M(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){G(e,t,n),l=!0},p(t,l){const n={};4&l&&(n.stack=t[13]),e.$set(n)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Bt(t){let e,l,n=t[10].stacks,s=[];for(let c=0;c<n.length;c+=1)s[c]=Gt(St(t,n,c));const r=t=>m(s[t],1,1,(()=>{s[t]=null}));return{c(){e=c("div");for(let t=0;t<s.length;t+=1)s[t].c();this.h()},l(t){e=o(t,"DIV",{class:!0,style:!0});var l=a(e);for(let e=0;e<s.length;e+=1)s[e].l(l);l.forEach(f),this.h()},h(){d(e,"class","flex flex-row w-full relative md:p-4 pointer-events-none"),_(e,"height",(t[2].conf.overlayRows&&t[17]!==t[2].layout.length-1?.4*t[3]:t[3]+t[10].maxHeight*t[4]+t[4])+"px"),u(e,"justify-center",t[2].conf.centerRows)},m(t,n){h(t,e,n);for(let l=0;l<s.length;l+=1)s[l].m(e,null);l=!0},p(t,c){if(4&c){let l;for(n=t[10].stacks,l=0;l<n.length;l+=1){const r=St(t,n,l);s[l]?(s[l].p(r,c),v(s[l],1)):(s[l]=Gt(r),s[l].c(),v(s[l],1),s[l].m(e,null))}for($(),l=n.length;l<s.length;l+=1)r(l);x()}(!l||28&c)&&_(e,"height",(t[2].conf.overlayRows&&t[17]!==t[2].layout.length-1?.4*t[3]:t[3]+t[10].maxHeight*t[4]+t[4])+"px"),4&c&&u(e,"justify-center",t[2].conf.centerRows)},i(t){if(!l){for(let t=0;t<n.length;t+=1)v(s[t]);l=!0}},o(t){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)m(s[e]);l=!1},d(t){t&&f(e),W(s,t)}}}function Ht(t){let e,l;return e=new jt({props:{stack:t[13]}}),{c(){M(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){G(e,t,n),l=!0},p(t,l){const n={};4&l&&(n.stack=t[13]),e.$set(n)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ct(t){let e,l,n,s=t[10].stacks,p=[];for(let c=0;c<s.length;c+=1)p[c]=Ht(_t(t,s,c));const y=t=>m(p[t],1,1,(()=>{p[t]=null}));return{c(){e=c("div");for(let t=0;t<p.length;t+=1)p[t].c();l=r(),this.h()},l(t){e=o(t,"DIV",{class:!0,style:!0});var n=a(e);for(let e=0;e<p.length;e+=1)p[e].l(n);l=i(n),n.forEach(f),this.h()},h(){d(e,"class","flex flex-row w-full relative md:p-4 pointer-events-none"),_(e,"height",t[3]+"px"),u(e,"justify-center",t[2].conf.centerRows)},m(t,s){h(t,e,s);for(let l=0;l<p.length;l+=1)p[l].m(e,null);g(e,l),n=!0},p(t,c){if(4&c){let n;for(s=t[10].stacks,n=0;n<s.length;n+=1){const r=_t(t,s,n);p[n]?(p[n].p(r,c),v(p[n],1)):(p[n]=Ht(r),p[n].c(),v(p[n],1),p[n].m(e,l))}for($(),n=s.length;n<p.length;n+=1)y(n);x()}(!n||8&c)&&_(e,"height",t[3]+"px"),4&c&&u(e,"justify-center",t[2].conf.centerRows)},i(t){if(!n){for(let t=0;t<s.length;t+=1)v(p[t]);n=!0}},o(t){p=p.filter(Boolean);for(let e=0;e<p.length;e+=1)m(p[e]);n=!1},d(t){t&&f(e),W(p,t)}}}function zt(t){let e,l,n,s,u=t[2].layout,p=[];for(let c=0;c<u.length;c+=1)p[c]=Bt(Mt(t,u,c));const y=t=>m(p[t],1,1,(()=>{p[t]=null}));let w=t[2].footer,k=[];for(let c=0;c<w.length;c+=1)k[c]=Ct(Nt(t,w,c));const b=t=>m(k[t],1,1,(()=>{k[t]=null}));return{c(){e=c("div");for(let t=0;t<p.length;t+=1)p[t].c();l=r();for(let t=0;t<k.length;t+=1)k[t].c();this.h()},l(t){e=o(t,"DIV",{id:!0,class:!0});var n=a(e);for(let e=0;e<p.length;e+=1)p[e].l(n);l=i(n);for(let e=0;e<k.length;e+=1)k[e].l(n);n.forEach(f),this.h()},h(){d(e,"id","game"),d(e,"class","flex flex-col text-white h-full"),j((()=>t[9].call(e)))},m(c,r){h(c,e,r);for(let t=0;t<p.length;t+=1)p[t].m(e,null);g(e,l);for(let t=0;t<k.length;t+=1)k[t].m(e,null);n=T(e,t[9].bind(e)),s=!0},p(t,[n]){if(28&n){let s;for(u=t[2].layout,s=0;s<u.length;s+=1){const c=Mt(t,u,s);p[s]?(p[s].p(c,n),v(p[s],1)):(p[s]=Bt(c),p[s].c(),v(p[s],1),p[s].m(e,l))}for($(),s=u.length;s<p.length;s+=1)y(s);x()}if(12&n){let l;for(w=t[2].footer,l=0;l<w.length;l+=1){const s=Nt(t,w,l);k[l]?(k[l].p(s,n),v(k[l],1)):(k[l]=Ct(s),k[l].c(),v(k[l],1),k[l].m(e,null))}for($(),l=w.length;l<k.length;l+=1)b(l);x()}},i(t){if(!s){for(let t=0;t<u.length;t+=1)v(p[t]);for(let t=0;t<w.length;t+=1)v(k[t]);s=!0}},o(t){p=p.filter(Boolean);for(let e=0;e<p.length;e+=1)m(p[e]);k=k.filter(Boolean);for(let e=0;e<k.length;e+=1)m(k[e]);s=!1},d(t){t&&f(e),W(p,t),W(k,t),n()}}}function At(t,e,l){let n,s,c,r,o,a;I(t,U,(t=>l(8,r=t))),I(t,P,(t=>l(2,o=t))),I(t,F,(t=>l(4,a=t)));let{editing:i=!1}=e,f=0,d=0;return t.$$set=t=>{"editing"in t&&l(5,i=t.editing)},t.$$.update=()=>{4&t.$$.dirty&&l(6,n=o.layout.length+o.footer.length),4&t.$$.dirty&&l(7,s=o.layout.reduce(((t,e)=>t+(e.maxHeight-1)),0)),199&t.$$.dirty&&U.set(Math.min(f/o.longestRow-5,(-.018*d*s+.66*d)/(n*(o.conf.overlayRows?.1*o.layout.length:1)))),256&t.$$.dirty&&l(3,c=1.5*r)},[f,d,o,c,a,i,n,s,r,function(){f=this.clientWidth,d=this.clientHeight,l(0,f),l(1,d)}]}class Jt extends e{constructor(t){super(),l(this,t,At,zt,n,{editing:5})}}export{Jt as T,Q as p};
