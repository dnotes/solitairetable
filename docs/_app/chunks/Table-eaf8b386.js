import{ac as t,S as e,i as l,s as n,F as s,e as c,k as r,c as o,a,n as i,d as f,b as d,a3 as u,f as h,K as g,G as p,r as m,u as $,w as v,x,H as y,I as w,J as k,M as b,W as I,P as D,a1 as E,T as V,l as R,a7 as j,ad as _,a2 as N,j as M,m as S,o as G,v as B,ae as H,t as C,g as z,af as A,h as J,U as W,ag as T}from"./vendor-d4f88a2a.js";import{m as F,e as K,a as P,g as U,d as Y,G as q}from"./GameControls-2d4a3440.js";import{A as L,c as O}from"./Game-7fded968.js";const Q={subscribe:e=>(()=>{const e=t("__svelte__");return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:e.navigating.subscribe}},session:e.session}})().page.subscribe(e)};function X(t){let e,l,n;return{c(){e=c("div"),l=c("img"),this.h()},l(t){e=o(t,"DIV",{});var n=a(e);l=o(n,"IMG",{draggable:!0,class:!0,src:!0,alt:!0}),n.forEach(f),this.h()},h(){d(l,"draggable","false"),d(l,"class","w-full"),E(l.src,n=t[11]+"_empty.svg")||d(l,"src",n),d(l,"alt","-")},m(t,n){h(t,e,n),g(e,l)},p(t,e){2048&e&&!E(l.src,n=t[11]+"_empty.svg")&&d(l,"src",n)},i:V,o:V,d(t){t&&f(e)}}}function Z(t){let e,l,n,s;const c=[et,tt],r=[];function o(t,e){return t[1]||t[0].facedown?0:1}return e=o(t),l=r[e]=c[e](t),{c(){l.c(),n=R()},l(t){l.l(t),n=R()},m(t,l){r[e].m(t,l),h(t,n,l),s=!0},p(t,s){let a=e;e=o(t),e===a?r[e].p(t,s):(m(),$(r[a],1,1,(()=>{r[a]=null})),v(),l=r[e],l?l.p(t,s):(l=r[e]=c[e](t),l.c()),x(l,1),l.m(n.parentNode,n))},i(t){s||(x(l),s=!0)},o(t){$(l),s=!1},d(t){r[e].d(t),t&&f(n)}}}function tt(t){let e,l,n,s,r;return{c(){e=c("div"),l=c("img"),this.h()},l(t){e=o(t,"DIV",{});var n=a(e);l=o(n,"IMG",{draggable:!0,class:!0,src:!0,alt:!0}),n.forEach(f),this.h()},h(){d(l,"draggable",t[12]),d(l,"class","w-full"),E(l.src,n=t[11]+t[9]+".svg")||d(l,"src",n),d(l,"alt",t[10])},m(t,n){h(t,e,n),g(e,l),r=!0},p(t,e){(!r||4096&e)&&d(l,"draggable",t[12]),(!r||2560&e&&!E(l.src,n=t[11]+t[9]+".svg"))&&d(l,"src",n),(!r||1024&e)&&d(l,"alt",t[10])},i(t){r||(j((()=>{s||(s=_(e,nt,{},!0)),s.run(1)})),r=!0)},o(t){s||(s=_(e,nt,{},!1)),s.run(0),r=!1},d(t){t&&f(e),t&&s&&s.end()}}}function et(t){let e,l,n,s,r;return{c(){e=c("div"),l=c("img"),this.h()},l(t){e=o(t,"DIV",{});var n=a(e);l=o(n,"IMG",{draggable:!0,class:!0,src:!0,alt:!0}),n.forEach(f),this.h()},h(){d(l,"draggable","false"),d(l,"class","w-full"),E(l.src,n=t[11]+"_back.svg")||d(l,"src",n),d(l,"alt","?")},m(t,n){h(t,e,n),g(e,l),r=!0},p(t,e){(!r||2048&e&&!E(l.src,n=t[11]+"_back.svg"))&&d(l,"src",n)},i(t){r||(j((()=>{s||(s=_(e,nt,{},!0)),s.run(1)})),r=!0)},o(t){s||(s=_(e,nt,{},!1)),s.run(0),r=!1},d(t){t&&f(e),t&&s&&s.end()}}}function lt(t){let e,l,n,I,D,E,V,R,j,_,N,M;const S=[Z,X],G=[];function B(t,e){return t[0]?0:1}n=B(t),I=G[n]=S[n](t);const H=t[19].default,C=s(H,t,t[18],null);return{c(){e=c("div"),l=c("div"),I.c(),D=r(),E=c("div"),C&&C.c(),this.h()},l(t){e=o(t,"DIV",{class:!0,style:!0});var n=a(e);l=o(n,"DIV",{class:!0});var s=a(l);I.l(s),D=i(s),E=o(s,"DIV",{class:!0});var c=a(E);C&&C.l(c),c.forEach(f),s.forEach(f),n.forEach(f),this.h()},h(){d(E,"class",V="absolute w-full h-full text-center top-2 text-"+(t[4]<100?"xs":"sm")),d(l,"class","cursor-pointer"),d(e,"class",R="card container "+t[8]+" rounded-xl absolute svelte-oigr2j"),d(e,"style",j=t[6]+":"+t[7]+"px"),u(e,"selected",t[5].selection.filter(t[23]).length)},m(s,c){h(s,e,c),g(e,l),G[n].m(l,null),g(l,D),g(l,E),C&&C.m(E,null),_=!0,N||(M=[p(e,"dragstart",t[21]),p(e,"dragend",t[22]),p(e,"click",t[20])],N=!0)},p(t,[s]){let c=n;n=B(t),n===c?G[n].p(t,s):(m(),$(G[c],1,1,(()=>{G[c]=null})),v(),I=G[n],I?I.p(t,s):(I=G[n]=S[n](t),I.c()),x(I,1),I.m(l,D)),C&&C.p&&(!_||262144&s)&&y(C,H,t,t[18],_?k(H,t[18],s,null):w(t[18]),null),(!_||16&s&&V!==(V="absolute w-full h-full text-center top-2 text-"+(t[4]<100?"xs":"sm")))&&d(E,"class",V),(!_||256&s&&R!==(R="card container "+t[8]+" rounded-xl absolute svelte-oigr2j"))&&d(e,"class",R),(!_||192&s&&j!==(j=t[6]+":"+t[7]+"px"))&&d(e,"style",j),289&s&&u(e,"selected",t[5].selection.filter(t[23]).length)},i(t){_||(x(I),x(C,t),_=!0)},o(t){$(I),$(C,t),_=!1},d(t){t&&f(e),G[n].d(),C&&C.d(t),N=!1,b(M)}}}function nt(t,{delay:e=0,duration:l=80}){return{delay:e,duration:l,css:(t,e)=>`\n\t\t\t\ttransform: rotateY(${1-180*e}deg);\n\t\t\t\topacity: ${1-e};\n        ${e?"position:absolute;":"position:static"}\n\t\t\t`}}function st(t,e,l){let n,s,c,r,o,a,i,f;I(t,F,(t=>l(4,o=t))),I(t,K,(t=>l(16,a=t))),I(t,P,(t=>l(17,i=t))),I(t,U,(t=>l(5,f=t)));let d,u,h,g,p,m,{$$slots:$={},$$scope:v}=e,{card:x}=e,{facedown:y=!1}=e,{stack:w}=e,{cardIndex:k=0}=e;x&&(g=["hearts","diamonds"].includes(x.suitName)?"text-red-600":"text-black",p=x.isJoker?"1"===x.char?"_joker_black":"_joker_red":`${x.rank}_${x.suitName}`,m=x.isJoker?"joker":`${x.rank}${x.suit}`);return t.$$set=t=>{"card"in t&&l(0,x=t.card),"facedown"in t&&l(1,y=t.facedown),"stack"in t&&l(2,w=t.stack),"cardIndex"in t&&l(14,k=t.cardIndex),"$$scope"in t&&l(18,v=t.$$scope)},t.$$.update=()=>{16388&t.$$.dirty&&l(3,n=null==w?void 0:w.getCardDepth(k)),12&t.$$.dirty&&l(13,s=n?w.look(n):[]),47&t.$$.dirty&&l(12,c=!y&&!f.conf.multiSelect&&n&&!x.facedown&&(f.conf.selectBlockedStacks||!w.isBlocked)&&(!w.conf.limitAvailable||n<=w.conf.limitAvailable)),245764&t.$$.dirty&&w&&(l(15,d=Math.max(k-w.firstVisible,0)),l(7,h=(null==w?void 0:w.isDeck)?0:d*(w.conf.horizontal?i:a)),l(6,u=w.conf.horizontal?"left":"top")),16&t.$$.dirty&&l(11,r=o>100?"/cards/":"/cards/small/")},[x,y,w,n,o,f,u,h,g,p,m,r,c,s,k,d,a,i,v,$,function(e){D.call(this,t,e)},t=>{Y.set({cards:s,cardDepth:n,fromStack:w.index}),f.clearSelected(),f.setSelected(s,w)},t=>{Y.set({}),f.clearSelected(),U.set(f)},t=>(null==t?void 0:t.id)===(null==x?void 0:x.id)]}class ct extends e{constructor(t){super(),l(this,t,st,lt,n,{card:0,facedown:1,stack:2,cardIndex:14})}}function rt(t,e,l){const n=t.slice();return n[19]=e[l],n[21]=l,n}function ot(t,e,l){const n=t.slice();return n[19]=e[l],n[21]=l,n}function at(t){let e,l,n;const r=t[11].default,i=s(r,t,t[16],null);return{c(){e=c("div"),i&&i.c(),this.h()},l(t){e=o(t,"DIV",{class:!0,style:!0});var l=a(e);i&&i.l(l),l.forEach(f),this.h()},h(){d(e,"class",l="relative "+t[3]+" box-content"),N(e,"width",("-"===t[0]?t[2]/2:t[2])+"px")},m(t,l){h(t,e,l),i&&i.m(e,null),n=!0},p(t,s){i&&i.p&&(!n||65536&s)&&y(i,r,t,t[16],n?k(r,t[16],s,null):w(t[16]),null),(!n||8&s&&l!==(l="relative "+t[3]+" box-content"))&&d(e,"class",l),(!n||5&s)&&N(e,"width",("-"===t[0]?t[2]/2:t[2])+"px")},i(t){n||(x(i,t),n=!0)},o(t){$(i,t),n=!1},d(t){t&&f(e),i&&i.d(t)}}}function it(t){let e,l,n,s,r,i=t[0]&&ft(t);return{c(){e=c("div"),l=c("div"),i&&i.c(),this.h()},l(t){e=o(t,"DIV",{class:!0,style:!0});var n=a(e);l=o(n,"DIV",{class:!0,style:!0});var s=a(l);i&&i.l(s),s.forEach(f),n.forEach(f),this.h()},h(){d(l,"class","relative h-full"),N(l,"max-width",t[2]+"px"),d(e,"class","relative justify-center"),N(e,"height",t[5]+"px"),N(e,"width",t[6]+"px"),u(e,"pointer-events-auto",t[0]&&(t[0].length||t[0].isDeck||t[0].conf.showEmpty)),u(e,"p-1",t[2]>100)},m(c,o){h(c,e,o),g(e,l),i&&i.m(l,null),n=!0,s||(r=[p(e,"dragover",Vt),p(e,"drop",t[15])],s=!0)},p(t,s){t[0]?i?(i.p(t,s),1&s&&x(i,1)):(i=ft(t),i.c(),x(i,1),i.m(l,null)):i&&(m(),$(i,1,1,(()=>{i=null})),v()),(!n||4&s)&&N(l,"max-width",t[2]+"px"),(!n||32&s)&&N(e,"height",t[5]+"px"),(!n||64&s)&&N(e,"width",t[6]+"px"),1&s&&u(e,"pointer-events-auto",t[0]&&(t[0].length||t[0].isDeck||t[0].conf.showEmpty)),4&s&&u(e,"p-1",t[2]>100)},i(t){n||(x(i),n=!0)},o(t){$(i),n=!1},d(t){t&&f(e),i&&i.d(),s=!1,b(r)}}}function ft(t){let e,l,n,s;const c=[ut,dt],r=[];function o(t,e){return t[0].isDeck?0:1}return e=o(t),l=r[e]=c[e](t),{c(){l.c(),n=R()},l(t){l.l(t),n=R()},m(t,l){r[e].m(t,l),h(t,n,l),s=!0},p(t,s){let a=e;e=o(t),e===a?r[e].p(t,s):(m(),$(r[a],1,1,(()=>{r[a]=null})),v(),l=r[e],l?l.p(t,s):(l=r[e]=c[e](t),l.c()),x(l,1),l.m(n.parentNode,n))},i(t){s||(x(l),s=!0)},o(t){$(l),s=!1},d(t){r[e].d(t),t&&f(n)}}}function dt(t){let e,l,n=[],s=new Map,c=t[0].stack;const r=t=>t[19].id;for(let a=0;a<c.length;a+=1){let e=rt(t,c,a),l=r(e);s.set(l,n[a]=xt(l,e))}let o=null;return c.length||(o=ht(t)),{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=R(),o&&o.c()},l(t){for(let e=0;e<n.length;e+=1)n[e].l(t);e=R(),o&&o.l(t)},m(t,s){for(let e=0;e<n.length;e+=1)n[e].m(t,s);h(t,e,s),o&&o.m(t,s),l=!0},p(t,l){405&l&&(c=t[0].stack,m(),n=H(n,l,r,1,t,c,s,e.parentNode,A,xt,e,rt),v(),!c.length&&o?o.p(t,l):c.length?o&&(m(),$(o,1,1,(()=>{o=null})),v()):(o=ht(t),o.c(),x(o,1),o.m(e.parentNode,e)))},i(t){if(!l){for(let t=0;t<c.length;t+=1)x(n[t]);l=!0}},o(t){for(let e=0;e<n.length;e+=1)$(n[e]);l=!1},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&f(e),o&&o.d(t)}}}function ut(t){let e,l,n=[],s=new Map,c=t[0].stack;const r=t=>t[19].id;for(let a=0;a<c.length;a+=1){let e=ot(t,c,a),l=r(e);s.set(l,n[a]=Dt(l,e))}let o=null;return c.length||(o=yt(t)),{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=R(),o&&o.c()},l(t){for(let e=0;e<n.length;e+=1)n[e].l(t);e=R(),o&&o.l(t)},m(t,s){for(let e=0;e<n.length;e+=1)n[e].m(t,s);h(t,e,s),o&&o.m(t,s),l=!0},p(t,l){389&l&&(c=t[0].stack,m(),n=H(n,l,r,1,t,c,s,e.parentNode,A,Dt,e,ot),v(),!c.length&&o?o.p(t,l):c.length?o&&(m(),$(o,1,1,(()=>{o=null})),v()):(o=yt(t),o.c(),x(o,1),o.m(e.parentNode,e)))},i(t){if(!l){for(let t=0;t<c.length;t+=1)x(n[t]);l=!0}},o(t){for(let e=0;e<n.length;e+=1)$(n[e]);l=!1},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&f(e),o&&o.d(t)}}}function ht(t){let e,l,n=t[7].conf.showEmpty&&gt(t);return{c(){n&&n.c(),e=R()},l(t){n&&n.l(t),e=R()},m(t,s){n&&n.m(t,s),h(t,e,s),l=!0},p(t,l){t[7].conf.showEmpty?n?(n.p(t,l),128&l&&x(n,1)):(n=gt(t),n.c(),x(n,1),n.m(e.parentNode,e)):n&&(m(),$(n,1,1,(()=>{n=null})),v())},i(t){l||(x(n),l=!0)},o(t){$(n),l=!1},d(t){n&&n.d(t),t&&f(e)}}}function gt(t){let e,l;return e=new ct({props:{$$slots:{default:[mt]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){G(e,t,n),l=!0},p(t,l){const n={};65556&l&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){l||(x(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function pt(t){let e,l;return{c(){e=c("div"),l=C(" "),this.h()},l(t){e=o(t,"DIV",{class:!0,style:!0});var n=a(e);l=z(n," "),n.forEach(f),this.h()},h(){d(e,"class","absolute w-full top-0 bg-blue-300 opacity-40 rounded-xl -my-2"),N(e,"height",1.5*t[2]+"px")},m(t,n){h(t,e,n),g(e,l)},p(t,l){4&l&&N(e,"height",1.5*t[2]+"px")},d(t){t&&f(e)}}}function mt(t){let e,l=t[4]&&pt(t);return{c(){l&&l.c(),e=r()},l(t){l&&l.l(t),e=i(t)},m(t,n){l&&l.m(t,n),h(t,e,n)},p(t,n){t[4]?l?l.p(t,n):(l=pt(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){l&&l.d(t),t&&f(e)}}}function $t(t){let e,l;return{c(){e=c("div"),l=C(" "),this.h()},l(t){e=o(t,"DIV",{class:!0,style:!0});var n=a(e);l=z(n," "),n.forEach(f),this.h()},h(){d(e,"class","absolute w-full top-0 bg-blue-500 opacity-40 rounded-xl -my-2"),N(e,"height",1.5*t[2]+"px")},m(t,n){h(t,e,n),g(e,l)},p(t,l){4&l&&N(e,"height",1.5*t[2]+"px")},d(t){t&&f(e)}}}function vt(t){let e,l=t[4]&&t[21]===t[0].length-1&&$t(t);return{c(){l&&l.c(),e=r()},l(t){l&&l.l(t),e=i(t)},m(t,n){l&&l.m(t,n),h(t,e,n)},p(t,n){t[4]&&t[21]===t[0].length-1?l?l.p(t,n):(l=$t(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){l&&l.d(t),t&&f(e)}}}function xt(t,e){let l,n,s;return n=new ct({props:{card:e[19],stack:e[0],cardIndex:e[21],$$slots:{default:[vt]},$$scope:{ctx:e}}}),n.$on("click",(function(){return e[14](e[19])})),{key:t,first:null,c(){l=R(),M(n.$$.fragment),this.h()},l(t){l=R(),S(n.$$.fragment,t),this.h()},h(){this.first=l},m(t,e){h(t,l,e),G(n,t,e),s=!0},p(t,l){e=t;const s={};1&l&&(s.card=e[19]),1&l&&(s.stack=e[0]),1&l&&(s.cardIndex=e[21]),65557&l&&(s.$$scope={dirty:l,ctx:e}),n.$set(s)},i(t){s||(x(n.$$.fragment,t),s=!0)},o(t){$(n.$$.fragment,t),s=!1},d(t){t&&f(l),B(n,t)}}}function yt(t){let e,l;return e=new ct({props:{$$slots:{default:[It]},$$scope:{ctx:t}}}),e.$on("click",t[13]),{c(){M(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){G(e,t,n),l=!0},p(t,l){const n={};65668&l&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){l||(x(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function wt(t){let e,l,n;return l=new q({props:{buttons:t[2]>56?"new,restart":"new",text:t[2]>72,class:"w-full"}}),{c(){e=c("div"),M(l.$$.fragment)},l(t){e=o(t,"DIV",{});var n=a(e);S(l.$$.fragment,n),n.forEach(f)},m(t,s){h(t,e,s),G(l,e,null),n=!0},p(t,e){const n={};4&e&&(n.buttons=t[2]>56?"new,restart":"new"),4&e&&(n.text=t[2]>72),l.$set(n)},i(t){n||(x(l.$$.fragment,t),n=!0)},o(t){$(l.$$.fragment,t),n=!1},d(t){t&&f(e),B(l)}}}function kt(t){let e,l,n="number"==typeof t[7].canRecycle&&bt(t);return{c(){e=c("div"),l=C("Cycle\n                  "),n&&n.c(),this.h()},l(t){e=o(t,"DIV",{});var s=a(e);l=z(s,"Cycle\n                  "),n&&n.l(s),s.forEach(f),this.h()},h(){u(e,"text-gray-600",!t[7].canRecycle)},m(t,s){h(t,e,s),g(e,l),n&&n.m(e,null)},p(t,l){"number"==typeof t[7].canRecycle?n?n.p(t,l):(n=bt(t),n.c(),n.m(e,null)):n&&(n.d(1),n=null),128&l&&u(e,"text-gray-600",!t[7].canRecycle)},i:V,o:V,d(t){t&&f(e),n&&n.d()}}}function bt(t){let e,l,n,s=t[7].canRecycle+"";return{c(){e=C("("),l=C(s),n=C(")")},l(t){e=z(t,"("),l=z(t,s),n=z(t,")")},m(t,s){h(t,e,s),h(t,l,s),h(t,n,s)},p(t,e){128&e&&s!==(s=t[7].canRecycle+"")&&J(l,s)},d(t){t&&f(e),t&&f(l),t&&f(n)}}}function It(t){let e,l,n,s;const c=[kt,wt],o=[];function a(t,e){return t[7].canRecycle?0:1}return e=a(t),l=o[e]=c[e](t),{c(){l.c(),n=r()},l(t){l.l(t),n=i(t)},m(t,l){o[e].m(t,l),h(t,n,l),s=!0},p(t,s){let r=e;e=a(t),e===r?o[e].p(t,s):(m(),$(o[r],1,1,(()=>{o[r]=null})),v(),l=o[e],l?l.p(t,s):(l=o[e]=c[e](t),l.c()),x(l,1),l.m(n.parentNode,n))},i(t){s||(x(l),s=!0)},o(t){$(l),s=!1},d(t){o[e].d(t),t&&f(n)}}}function Dt(t,e){let l,n,s;return n=new ct({props:{card:e[19],stack:e[7].deck,facedown:!0,cardIndex:e[21]}}),n.$on("click",e[12]),{key:t,first:null,c(){l=R(),M(n.$$.fragment),this.h()},l(t){l=R(),S(n.$$.fragment,t),this.h()},h(){this.first=l},m(t,e){h(t,l,e),G(n,t,e),s=!0},p(t,l){e=t;const s={};1&l&&(s.card=e[19]),128&l&&(s.stack=e[7].deck),1&l&&(s.cardIndex=e[21]),n.$set(s)},i(t){s||(x(n.$$.fragment,t),s=!0)},o(t){$(n.$$.fragment,t),s=!1},d(t){t&&f(l),B(n,t)}}}function Et(t){let e,l,n,s;const c=[it,at],r=[];function o(t,e){return"string"!=typeof t[0]?0:1}return e=o(t),l=r[e]=c[e](t),{c(){l.c(),n=R()},l(t){l.l(t),n=R()},m(t,l){r[e].m(t,l),h(t,n,l),s=!0},p(t,[s]){let a=e;e=o(t),e===a?r[e].p(t,s):(m(),$(r[a],1,1,(()=>{r[a]=null})),v(),l=r[e],l?l.p(t,s):(l=r[e]=c[e](t),l.c()),x(l,1),l.m(n.parentNode,n))},i(t){s||(x(l),s=!0)},o(t){$(l),s=!1},d(t){r[e].d(t),t&&f(n)}}}const Vt=t=>{t.preventDefault()};function Rt(t,e,l){let n,s,c,r,o,a,i,f;I(t,Y,(t=>l(1,r=t))),I(t,U,(t=>l(7,o=t))),I(t,F,(t=>l(2,a=t))),I(t,K,(t=>l(17,i=t))),I(t,P,(t=>l(18,f=t)));let{$$slots:d={},$$scope:u}=e,{stack:h}=e,g="",p=0,m=0;function $(t,e){"string"!=typeof t&&(e?o.clickCard(e,t):o.deal(),U.set(o))}"string"==typeof h?("-"===h&&(g="flex-shrink"),"_"===h&&(g="flex-grow")):h&&!h.isDeck&&(h.conf.horizontal?m=h.maxWidth*f:p=h.maxHeight*i);return t.$$set=t=>{"stack"in t&&l(0,h=t.stack),"$$scope"in t&&l(16,u=t.$$scope)},t.$$.update=()=>{1028&t.$$.dirty&&l(6,n=a+m),516&t.$$.dirty&&l(5,s=1.5*a+p),3&t.$$.dirty&&l(4,c=h&&"string"!=typeof h&&(null==r?void 0:r.cards)&&h.wants(r.cards))},[h,r,a,g,c,s,n,o,$,p,m,d,()=>$(h),()=>$(h),t=>$(h,t),t=>{t.preventDefault(),h.wants(r.cards)&&(console.log("dropped!"),o.do(new L("move",new O(r.cardDepth,r.fromStack,h.index))))},u]}class jt extends e{constructor(t){super(),l(this,t,Rt,Et,n,{stack:0})}}function _t(t,e,l){const n=t.slice();return n[10]=e[l],n}function Nt(t,e,l){const n=t.slice();return n[13]=e[l],n}function Mt(t,e,l){const n=t.slice();return n[10]=e[l],n[17]=l,n}function St(t,e,l){const n=t.slice();return n[13]=e[l],n}function Gt(t){let e;return{c(){e=c("div"),this.h()},l(t){e=o(t,"DIV",{class:!0}),a(e).forEach(f),this.h()},h(){d(e,"class","w-full relative md:p-4 pointer-events-none")},m(t,l){h(t,e,l)},d(t){t&&f(e)}}}function Bt(t){let e,l;return e=new jt({props:{stack:t[13]}}),{c(){M(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){G(e,t,n),l=!0},p(t,l){const n={};4&l&&(n.stack=t[13]),e.$set(n)},i(t){l||(x(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ht(t){let e,l,n=t[10].stacks,s=[];for(let c=0;c<n.length;c+=1)s[c]=Bt(St(t,n,c));const r=t=>$(s[t],1,1,(()=>{s[t]=null}));return{c(){e=c("div");for(let t=0;t<s.length;t+=1)s[t].c();this.h()},l(t){e=o(t,"DIV",{class:!0,style:!0});var l=a(e);for(let e=0;e<s.length;e+=1)s[e].l(l);l.forEach(f),this.h()},h(){d(e,"class","flex flex-row w-full relative md:p-4 pointer-events-none"),N(e,"height",(t[2].conf.overlayRows&&t[17]!==t[2].layout.length-1?.4*t[3]:t[3]+t[10].maxHeight*t[4]+t[4])+"px"),u(e,"justify-center",t[2].conf.centerRows)},m(t,n){h(t,e,n);for(let l=0;l<s.length;l+=1)s[l].m(e,null);l=!0},p(t,c){if(4&c){let l;for(n=t[10].stacks,l=0;l<n.length;l+=1){const r=St(t,n,l);s[l]?(s[l].p(r,c),x(s[l],1)):(s[l]=Bt(r),s[l].c(),x(s[l],1),s[l].m(e,null))}for(m(),l=n.length;l<s.length;l+=1)r(l);v()}(!l||28&c)&&N(e,"height",(t[2].conf.overlayRows&&t[17]!==t[2].layout.length-1?.4*t[3]:t[3]+t[10].maxHeight*t[4]+t[4])+"px"),4&c&&u(e,"justify-center",t[2].conf.centerRows)},i(t){if(!l){for(let t=0;t<n.length;t+=1)x(s[t]);l=!0}},o(t){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)$(s[e]);l=!1},d(t){t&&f(e),W(s,t)}}}function Ct(t){let e;return{c(){e=c("div"),this.h()},l(t){e=o(t,"DIV",{class:!0}),a(e).forEach(f),this.h()},h(){d(e,"class","w-full relative md:p-4 pointer-events-none")},m(t,l){h(t,e,l)},d(t){t&&f(e)}}}function zt(t){let e,l;return e=new jt({props:{stack:t[13]}}),{c(){M(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){G(e,t,n),l=!0},p(t,l){const n={};4&l&&(n.stack=t[13]),e.$set(n)},i(t){l||(x(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function At(t){let e,l,n,s=t[10].stacks,p=[];for(let c=0;c<s.length;c+=1)p[c]=zt(Nt(t,s,c));const y=t=>$(p[t],1,1,(()=>{p[t]=null}));return{c(){e=c("div");for(let t=0;t<p.length;t+=1)p[t].c();l=r(),this.h()},l(t){e=o(t,"DIV",{class:!0,style:!0});var n=a(e);for(let e=0;e<p.length;e+=1)p[e].l(n);l=i(n),n.forEach(f),this.h()},h(){d(e,"class","flex flex-row w-full relative md:p-4 pointer-events-none"),N(e,"height",t[3]+"px"),u(e,"justify-center",t[2].conf.centerRows)},m(t,s){h(t,e,s);for(let l=0;l<p.length;l+=1)p[l].m(e,null);g(e,l),n=!0},p(t,c){if(4&c){let n;for(s=t[10].stacks,n=0;n<s.length;n+=1){const r=Nt(t,s,n);p[n]?(p[n].p(r,c),x(p[n],1)):(p[n]=zt(r),p[n].c(),x(p[n],1),p[n].m(e,l))}for(m(),n=s.length;n<p.length;n+=1)y(n);v()}(!n||8&c)&&N(e,"height",t[3]+"px"),4&c&&u(e,"justify-center",t[2].conf.centerRows)},i(t){if(!n){for(let t=0;t<s.length;t+=1)x(p[t]);n=!0}},o(t){p=p.filter(Boolean);for(let e=0;e<p.length;e+=1)$(p[e]);n=!1},d(t){t&&f(e),W(p,t)}}}function Jt(t){let e,l,n,s,u=t[2].layout,p=[];for(let c=0;c<u.length;c+=1)p[c]=Ht(Mt(t,u,c));const y=t=>$(p[t],1,1,(()=>{p[t]=null}));let w=null;u.length||(w=Gt());let k=t[2].footer,b=[];for(let c=0;c<k.length;c+=1)b[c]=At(_t(t,k,c));const I=t=>$(b[t],1,1,(()=>{b[t]=null}));let D=null;return k.length||(D=Ct()),{c(){e=c("div");for(let t=0;t<p.length;t+=1)p[t].c();w&&w.c(),l=r();for(let t=0;t<b.length;t+=1)b[t].c();D&&D.c(),this.h()},l(t){e=o(t,"DIV",{id:!0,class:!0});var n=a(e);for(let e=0;e<p.length;e+=1)p[e].l(n);w&&w.l(n),l=i(n);for(let e=0;e<b.length;e+=1)b[e].l(n);D&&D.l(n),n.forEach(f),this.h()},h(){d(e,"id","game"),d(e,"class","flex flex-col text-white h-full"),j((()=>t[9].call(e)))},m(c,r){h(c,e,r);for(let t=0;t<p.length;t+=1)p[t].m(e,null);w&&w.m(e,null),g(e,l);for(let t=0;t<b.length;t+=1)b[t].m(e,null);D&&D.m(e,null),n=T(e,t[9].bind(e)),s=!0},p(t,[n]){if(28&n){let s;for(u=t[2].layout,s=0;s<u.length;s+=1){const c=Mt(t,u,s);p[s]?(p[s].p(c,n),x(p[s],1)):(p[s]=Ht(c),p[s].c(),x(p[s],1),p[s].m(e,l))}for(m(),s=u.length;s<p.length;s+=1)y(s);v(),u.length?w&&(w.d(1),w=null):w||(w=Gt(),w.c(),w.m(e,l))}if(12&n){let l;for(k=t[2].footer,l=0;l<k.length;l+=1){const s=_t(t,k,l);b[l]?(b[l].p(s,n),x(b[l],1)):(b[l]=At(s),b[l].c(),x(b[l],1),b[l].m(e,null))}for(m(),l=k.length;l<b.length;l+=1)I(l);v(),k.length?D&&(D.d(1),D=null):D||(D=Ct(),D.c(),D.m(e,null))}},i(t){if(!s){for(let t=0;t<u.length;t+=1)x(p[t]);for(let t=0;t<k.length;t+=1)x(b[t]);s=!0}},o(t){p=p.filter(Boolean);for(let e=0;e<p.length;e+=1)$(p[e]);b=b.filter(Boolean);for(let e=0;e<b.length;e+=1)$(b[e]);s=!1},d(t){t&&f(e),W(p,t),w&&w.d(),W(b,t),D&&D.d(),n()}}}function Wt(t,e,l){let n,s,c,r,o,a;I(t,F,(t=>l(8,r=t))),I(t,U,(t=>l(2,o=t))),I(t,K,(t=>l(4,a=t)));let{editing:i=!1}=e,f=0,d=0;return t.$$set=t=>{"editing"in t&&l(5,i=t.editing)},t.$$.update=()=>{4&t.$$.dirty&&l(6,n=o.layout.length+o.footer.length),4&t.$$.dirty&&l(7,s=o.layout.reduce(((t,e)=>t+(e.maxHeight-1)),0)),199&t.$$.dirty&&F.set(Math.min(f/o.longestRow-5,(-.018*d*s+.66*d)/(n*(o.conf.overlayRows?.1*o.layout.length:1)))),256&t.$$.dirty&&l(3,c=1.5*r)},[f,d,o,c,a,i,n,s,r,function(){f=this.clientWidth,d=this.clientHeight,l(0,f),l(1,d)}]}class Tt extends e{constructor(t){super(),l(this,t,Wt,Jt,n,{editing:5})}}export{Tt as T,Q as p};
